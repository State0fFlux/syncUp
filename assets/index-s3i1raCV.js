(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function Zg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Nh={exports:{}},ma={},Dh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function R0(){if(Im)return Re;Im=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.iterator;function V(O){return O===null||typeof O!="object"?null:(O=C&&O[C]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,X={};function H(O,B,ue){this.props=O,this.context=B,this.refs=X,this.updater=ue||U}H.prototype.isReactComponent={},H.prototype.setState=function(O,B){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,B,"setState")},H.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ye(){}ye.prototype=H.prototype;function _e(O,B,ue){this.props=O,this.context=B,this.refs=X,this.updater=ue||U}var Ee=_e.prototype=new ye;Ee.constructor=_e,Q(Ee,H.prototype),Ee.isPureReactComponent=!0;var me=Array.isArray,We=Object.prototype.hasOwnProperty,Ie={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(O,B,ue){var Se,Ae={},xe=null,be=null;if(B!=null)for(Se in B.ref!==void 0&&(be=B.ref),B.key!==void 0&&(xe=""+B.key),B)We.call(B,Se)&&!x.hasOwnProperty(Se)&&(Ae[Se]=B[Se]);var Fe=arguments.length-2;if(Fe===1)Ae.children=ue;else if(1<Fe){for(var qe=Array(Fe),yt=0;yt<Fe;yt++)qe[yt]=arguments[yt+2];Ae.children=qe}if(O&&O.defaultProps)for(Se in Fe=O.defaultProps,Fe)Ae[Se]===void 0&&(Ae[Se]=Fe[Se]);return{$$typeof:i,type:O,key:xe,ref:be,props:Ae,_owner:Ie.current}}function A(O,B){return{$$typeof:i,type:O.type,key:B,ref:O.ref,props:O.props,_owner:O._owner}}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function N(O){var B={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return B[ue]})}var L=/\/+/g;function S(O,B){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):B.toString(36)}function Me(O,B,ue,Se,Ae){var xe=typeof O;(xe==="undefined"||xe==="boolean")&&(O=null);var be=!1;if(O===null)be=!0;else switch(xe){case"string":case"number":be=!0;break;case"object":switch(O.$$typeof){case i:case e:be=!0}}if(be)return be=O,Ae=Ae(be),O=Se===""?"."+S(be,0):Se,me(Ae)?(ue="",O!=null&&(ue=O.replace(L,"$&/")+"/"),Me(Ae,B,ue,"",function(yt){return yt})):Ae!=null&&(P(Ae)&&(Ae=A(Ae,ue+(!Ae.key||be&&be.key===Ae.key?"":(""+Ae.key).replace(L,"$&/")+"/")+O)),B.push(Ae)),1;if(be=0,Se=Se===""?".":Se+":",me(O))for(var Fe=0;Fe<O.length;Fe++){xe=O[Fe];var qe=Se+S(xe,Fe);be+=Me(xe,B,ue,qe,Ae)}else if(qe=V(O),typeof qe=="function")for(O=qe.call(O),Fe=0;!(xe=O.next()).done;)xe=xe.value,qe=Se+S(xe,Fe++),be+=Me(xe,B,ue,qe,Ae);else if(xe==="object")throw B=String(O),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return be}function Ue(O,B,ue){if(O==null)return O;var Se=[],Ae=0;return Me(O,Se,"","",function(xe){return B.call(ue,xe,Ae++)}),Se}function Ze(O){if(O._status===-1){var B=O._result;B=B(),B.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=B)}if(O._status===1)return O._result.default;throw O._result}var je={current:null},Z={transition:null},ie={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Ie};function te(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:Ue,forEach:function(O,B,ue){Ue(O,function(){B.apply(this,arguments)},ue)},count:function(O){var B=0;return Ue(O,function(){B++}),B},toArray:function(O){return Ue(O,function(B){return B})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Re.Component=H,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=_e,Re.StrictMode=s,Re.Suspense=g,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Re.act=te,Re.cloneElement=function(O,B,ue){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Se=Q({},O.props),Ae=O.key,xe=O.ref,be=O._owner;if(B!=null){if(B.ref!==void 0&&(xe=B.ref,be=Ie.current),B.key!==void 0&&(Ae=""+B.key),O.type&&O.type.defaultProps)var Fe=O.type.defaultProps;for(qe in B)We.call(B,qe)&&!x.hasOwnProperty(qe)&&(Se[qe]=B[qe]===void 0&&Fe!==void 0?Fe[qe]:B[qe])}var qe=arguments.length-2;if(qe===1)Se.children=ue;else if(1<qe){Fe=Array(qe);for(var yt=0;yt<qe;yt++)Fe[yt]=arguments[yt+2];Se.children=Fe}return{$$typeof:i,type:O.type,key:Ae,ref:xe,props:Se,_owner:be}},Re.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:u,_context:O},O.Consumer=O},Re.createElement=I,Re.createFactory=function(O){var B=I.bind(null,O);return B.type=O,B},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:m,render:O}},Re.isValidElement=P,Re.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:Ze}},Re.memo=function(O,B){return{$$typeof:v,type:O,compare:B===void 0?null:B}},Re.startTransition=function(O){var B=Z.transition;Z.transition={};try{O()}finally{Z.transition=B}},Re.unstable_act=te,Re.useCallback=function(O,B){return je.current.useCallback(O,B)},Re.useContext=function(O){return je.current.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O){return je.current.useDeferredValue(O)},Re.useEffect=function(O,B){return je.current.useEffect(O,B)},Re.useId=function(){return je.current.useId()},Re.useImperativeHandle=function(O,B,ue){return je.current.useImperativeHandle(O,B,ue)},Re.useInsertionEffect=function(O,B){return je.current.useInsertionEffect(O,B)},Re.useLayoutEffect=function(O,B){return je.current.useLayoutEffect(O,B)},Re.useMemo=function(O,B){return je.current.useMemo(O,B)},Re.useReducer=function(O,B,ue){return je.current.useReducer(O,B,ue)},Re.useRef=function(O){return je.current.useRef(O)},Re.useState=function(O){return je.current.useState(O)},Re.useSyncExternalStore=function(O,B,ue){return je.current.useSyncExternalStore(O,B,ue)},Re.useTransition=function(){return je.current.useTransition()},Re.version="18.3.1",Re}var Sm;function Td(){return Sm||(Sm=1,Dh.exports=R0()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function C0(){if(Am)return ma;Am=1;var i=Td(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var E,C={},V=null,U=null;v!==void 0&&(V=""+v),g.key!==void 0&&(V=""+g.key),g.ref!==void 0&&(U=g.ref);for(E in g)s.call(g,E)&&!u.hasOwnProperty(E)&&(C[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)C[E]===void 0&&(C[E]=g[E]);return{$$typeof:e,type:m,key:V,ref:U,props:C,_owner:o.current}}return ma.Fragment=t,ma.jsx=h,ma.jsxs=h,ma}var Rm;function P0(){return Rm||(Rm=1,Nh.exports=C0()),Nh.exports}var D=P0(),Te=Td();const k0=Zg(Te);var hu={},Vh={exports:{}},Jt={},Oh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function x0(){return Cm||(Cm=1,(function(i){function e(Z,ie){var te=Z.length;Z.push(ie);e:for(;0<te;){var O=te-1>>>1,B=Z[O];if(0<o(B,ie))Z[O]=ie,Z[te]=B,te=O;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ie=Z[0],te=Z.pop();if(te!==ie){Z[0]=te;e:for(var O=0,B=Z.length,ue=B>>>1;O<ue;){var Se=2*(O+1)-1,Ae=Z[Se],xe=Se+1,be=Z[xe];if(0>o(Ae,te))xe<B&&0>o(be,Ae)?(Z[O]=be,Z[xe]=te,O=xe):(Z[O]=Ae,Z[Se]=te,O=Se);else if(xe<B&&0>o(be,te))Z[O]=be,Z[xe]=te,O=xe;else break e}}return ie}function o(Z,ie){var te=Z.sortIndex-ie.sortIndex;return te!==0?te:Z.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],v=[],E=1,C=null,V=3,U=!1,Q=!1,X=!1,H=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ee(Z){for(var ie=t(v);ie!==null;){if(ie.callback===null)s(v);else if(ie.startTime<=Z)s(v),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(v)}}function me(Z){if(X=!1,Ee(Z),!Q)if(t(g)!==null)Q=!0,Ze(We);else{var ie=t(v);ie!==null&&je(me,ie.startTime-Z)}}function We(Z,ie){Q=!1,X&&(X=!1,ye(I),I=-1),U=!0;var te=V;try{for(Ee(ie),C=t(g);C!==null&&(!(C.expirationTime>ie)||Z&&!N());){var O=C.callback;if(typeof O=="function"){C.callback=null,V=C.priorityLevel;var B=O(C.expirationTime<=ie);ie=i.unstable_now(),typeof B=="function"?C.callback=B:C===t(g)&&s(g),Ee(ie)}else s(g);C=t(g)}if(C!==null)var ue=!0;else{var Se=t(v);Se!==null&&je(me,Se.startTime-ie),ue=!1}return ue}finally{C=null,V=te,U=!1}}var Ie=!1,x=null,I=-1,A=5,P=-1;function N(){return!(i.unstable_now()-P<A)}function L(){if(x!==null){var Z=i.unstable_now();P=Z;var ie=!0;try{ie=x(!0,Z)}finally{ie?S():(Ie=!1,x=null)}}else Ie=!1}var S;if(typeof _e=="function")S=function(){_e(L)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Ue=Me.port2;Me.port1.onmessage=L,S=function(){Ue.postMessage(null)}}else S=function(){H(L,0)};function Ze(Z){x=Z,Ie||(Ie=!0,S())}function je(Z,ie){I=H(function(){Z(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){Q||U||(Q=!0,Ze(We))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return V},i.unstable_getFirstCallbackNode=function(){return t(g)},i.unstable_next=function(Z){switch(V){case 1:case 2:case 3:var ie=3;break;default:ie=V}var te=V;V=ie;try{return Z()}finally{V=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ie){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var te=V;V=Z;try{return ie()}finally{V=te}},i.unstable_scheduleCallback=function(Z,ie,te){var O=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?O+te:O):te=O,Z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=te+B,Z={id:E++,callback:ie,priorityLevel:Z,startTime:te,expirationTime:B,sortIndex:-1},te>O?(Z.sortIndex=te,e(v,Z),t(g)===null&&Z===t(v)&&(X?(ye(I),I=-1):X=!0,je(me,te-O))):(Z.sortIndex=B,e(g,Z),Q||U||(Q=!0,Ze(We))),Z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(Z){var ie=V;return function(){var te=V;V=ie;try{return Z.apply(this,arguments)}finally{V=te}}}})(Lh)),Lh}var Pm;function N0(){return Pm||(Pm=1,Oh.exports=x0()),Oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function D0(){if(km)return Jt;km=1;var i=Td(),e=N0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},C={};function V(n){return g.call(C,n)?!0:g.call(E,n)?!1:v.test(n)?C[n]=!0:(E[n]=!0,!1)}function U(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,r,a,c){if(r===null||typeof r>"u"||U(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(n,r,a,c,d,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){H[n]=new X(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];H[r]=new X(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){H[n]=new X(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){H[n]=new X(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){H[n]=new X(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){H[n]=new X(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){H[n]=new X(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){H[n]=new X(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){H[n]=new X(n,5,!1,n.toLowerCase(),null,!1,!1)});var ye=/[\-:]([a-z])/g;function _e(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(ye,_e);H[r]=new X(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(ye,_e);H[r]=new X(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(ye,_e);H[r]=new X(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){H[n]=new X(n,1,!1,n.toLowerCase(),null,!1,!1)}),H.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){H[n]=new X(n,1,!1,n.toLowerCase(),null,!0,!0)});function Ee(n,r,a,c){var d=H.hasOwnProperty(r)?H[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Q(r,a,d,c)&&(a=null),c||d===null?V(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var me=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,We=Symbol.for("react.element"),Ie=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ie(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,O;function B(n){if(O===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+n}var ue=!1;function Se(n,r){if(!n||ue)return"";ue=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var c=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){c=j}n.call(r.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var d=j.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,T=p.length-1;1<=_&&0<=T&&d[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(d[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||d[_]!==p[T]){var R=`
`+d[_].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=_&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?B(n):""}function Ae(n){switch(n.tag){case 5:return B(n.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case Ie:return"Portal";case A:return"Profiler";case I:return"StrictMode";case S:return"Suspense";case Me:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case L:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ue:return r=n.displayName||null,r!==null?r:xe(n.type)||"Memo";case Ze:r=n._payload,n=n._init;try{return xe(n(r))}catch{}}return null}function be(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(n){var r=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function tr(n){n._valueTracker||(n._valueTracker=yt(n))}function ss(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function yi(n,r){var a=r.checked;return te({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function os(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Fe(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Eo(n,r){r=r.checked,r!=null&&Ee(n,"checked",r,!1)}function To(n,r){Eo(n,r);var a=Fe(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?as(n,r.type,a):r.hasOwnProperty("defaultValue")&&as(n,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Ya(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function as(n,r,a){(r!=="number"||Nr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var nr=Array.isArray;function rr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Io(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ls(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(nr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Fe(a)}}function us(n,r){var a=Fe(r.value),c=Fe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function So(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ir,Ao=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ir.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Dr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(n){vi.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),_i[r]=_i[n]})});function Ro(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||_i.hasOwnProperty(n)&&_i[n]?(""+r).trim():r+"px"}function Co(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Ro(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Po=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(n,r){if(r){if(Po[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function xo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function cs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hs=null,un=null,jn=null;function ds(n){if(n=ea(n)){if(typeof hs!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Rl(r),hs(n.stateNode,n.type,r))}}function zn(n){un?jn?jn.push(n):jn=[n]:un=n}function No(){if(un){var n=un,r=jn;if(jn=un=null,ds(n),r)for(n=0;n<r.length;n++)ds(r[n])}}function Ei(n,r){return n(r)}function Do(){}var sr=!1;function Vo(n,r,a){if(sr)return n(r,a);sr=!0;try{return Ei(n,r,a)}finally{sr=!1,(un!==null||jn!==null)&&(Do(),No())}}function it(n,r){var a=n.stateNode;if(a===null)return null;var c=Rl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var fs=!1;if(m)try{var En={};Object.defineProperty(En,"passive",{get:function(){fs=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{fs=!1}function Ti(n,r,a,c,d,p,_,T,R){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch(q){this.onError(q)}}var Ii=!1,ps=null,Tn=!1,Oo=null,sc={onError:function(n){Ii=!0,ps=n}};function ms(n,r,a,c,d,p,_,T,R){Ii=!1,ps=null,Ti.apply(sc,arguments)}function Xa(n,r,a,c,d,p,_,T,R){if(ms.apply(this,arguments),Ii){if(Ii){var j=ps;Ii=!1,ps=null}else throw Error(t(198));Tn||(Tn=!0,Oo=j)}}function In(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Si(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Sn(n){if(In(n)!==n)throw Error(t(188))}function Ja(n){var r=n.alternate;if(!r){if(r=In(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Sn(d),n;if(p===c)return Sn(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var _=!1,T=d.child;T;){if(T===a){_=!0,a=d,c=p;break}if(T===c){_=!0,c=d,a=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===a){_=!0,a=p,c=d;break}if(T===c){_=!0,c=p,a=d;break}T=T.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Lo(n){return n=Ja(n),n!==null?gs(n):null}function gs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=gs(n);if(r!==null)return r;n=n.sibling}return null}var ys=e.unstable_scheduleCallback,Mo=e.unstable_cancelCallback,Za=e.unstable_shouldYield,oc=e.unstable_requestPaint,He=e.unstable_now,el=e.unstable_getCurrentPriorityLevel,Ai=e.unstable_ImmediatePriority,Vr=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,bo=e.unstable_LowPriority,tl=e.unstable_IdlePriority,Ri=null,en=null;function nl(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ri,n,void 0,(n.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:il,Fo=Math.log,rl=Math.LN2;function il(n){return n>>>=0,n===0?32:31-(Fo(n)/rl|0)|0}var _s=64,vs=4194304;function Or(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ci(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,_=a&268435455;if(_!==0){var T=_&~d;T!==0?c=Or(T):(p&=_,p!==0&&(c=Or(p)))}else _=a&~d,_!==0?c=Or(_):p!==0&&(c=Or(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-jt(r),d=1<<a,c|=n[a],r&=~d;return c}function ac(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function or(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var _=31-jt(p),T=1<<_,R=d[_];R===-1?((T&a)===0||(T&c)!==0)&&(d[_]=ac(T,r)):R<=r&&(n.expiredLanes|=T),p&=~T}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Pi(){var n=_s;return _s<<=1,(_s&4194240)===0&&(_s=64),n}function Lr(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Mr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-jt(r),n[r]=a}function $e(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-jt(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function br(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-jt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Pe=0;function Fr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var sl,ws,ol,al,ll,Uo=!1,Bn=[],It=null,An=null,Rn=null,Ur=new Map,hn=new Map,$n=[],lc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ul(n,r){switch(n){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Ur.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function qt(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=ea(r),r!==null&&ws(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function uc(n,r,a,c,d){switch(r){case"focusin":return It=qt(It,n,r,a,c,d),!0;case"dragenter":return An=qt(An,n,r,a,c,d),!0;case"mouseover":return Rn=qt(Rn,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Ur.set(p,qt(Ur.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,hn.set(p,qt(hn.get(p)||null,n,r,a,c,d)),!0}return!1}function cl(n){var r=Vi(n.target);if(r!==null){var a=In(r);if(a!==null){if(r=a.tag,r===13){if(r=Si(a),r!==null){n.blockedOn=r,ll(n.priority,function(){ol(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ar(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Es(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);wi=c,a.target.dispatchEvent(c),wi=null}else return r=ea(a),r!==null&&ws(r),n.blockedOn=a,!1;r.shift()}return!0}function ki(n,r,a){ar(n)&&a.delete(r)}function hl(){Uo=!1,It!==null&&ar(It)&&(It=null),An!==null&&ar(An)&&(An=null),Rn!==null&&ar(Rn)&&(Rn=null),Ur.forEach(ki),hn.forEach(ki)}function Cn(n,r){n.blockedOn===r&&(n.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hl)))}function Pn(n){function r(d){return Cn(d,n)}if(0<Bn.length){Cn(Bn[0],n);for(var a=1;a<Bn.length;a++){var c=Bn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(It!==null&&Cn(It,n),An!==null&&Cn(An,n),Rn!==null&&Cn(Rn,n),Ur.forEach(r),hn.forEach(r),a=0;a<$n.length;a++)c=$n[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)cl(a),a.blockedOn===null&&$n.shift()}var lr=me.ReactCurrentBatchConfig,jr=!0;function Xe(n,r,a,c){var d=Pe,p=lr.transition;lr.transition=null;try{Pe=1,jo(n,r,a,c)}finally{Pe=d,lr.transition=p}}function cc(n,r,a,c){var d=Pe,p=lr.transition;lr.transition=null;try{Pe=4,jo(n,r,a,c)}finally{Pe=d,lr.transition=p}}function jo(n,r,a,c){if(jr){var d=Es(n,r,a,c);if(d===null)Ec(n,r,c,xi,a),ul(n,c);else if(uc(d,n,r,a,c))c.stopPropagation();else if(ul(n,c),r&4&&-1<lc.indexOf(n)){for(;d!==null;){var p=ea(d);if(p!==null&&sl(p),p=Es(n,r,a,c),p===null&&Ec(n,r,c,xi,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else Ec(n,r,c,null,a)}}var xi=null;function Es(n,r,a,c){if(xi=null,n=cs(c),n=Vi(n),n!==null)if(r=In(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Si(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return xi=n,null}function zo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(el()){case Ai:return 1;case Vr:return 4;case cn:case bo:return 16;case tl:return 536870912;default:return 16}default:return 16}}var nn=null,Ts=null,Ht=null;function Bo(){if(Ht)return Ht;var n,r=Ts,a=r.length,c,d="value"in nn?nn.value:nn.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===d[p-c];c++);return Ht=d.slice(n,1<c?1-c:void 0)}function Is(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Wn(){return!0}function $o(){return!1}function St(n){function r(a,c,d,p,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wn:$o,this.isPropagationStopped=$o,this}return te(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),r}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=St(kn),qn=te({},kn,{view:0,detail:0}),hc=St(qn),As,ur,zr,Ni=te({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zr&&(zr&&n.type==="mousemove"?(As=n.screenX-zr.screenX,ur=n.screenY-zr.screenY):ur=As=0,zr=n),As)},movementY:function(n){return"movementY"in n?n.movementY:ur}}),Rs=St(Ni),Wo=te({},Ni,{dataTransfer:0}),dl=St(Wo),Cs=te({},qn,{relatedTarget:0}),Ps=St(Cs),fl=te({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),cr=St(fl),pl=te({},kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ml=St(pl),gl=te({},kn,{data:0}),qo=St(gl),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _l(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=yl[n])?!!r[n]:!1}function Hn(){return _l}var l=te({},qn,{key:function(n){if(n.key){var r=ks[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Is(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(n){return n.type==="keypress"?Is(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Is(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=St(l),y=te({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=St(y),M=te({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),z=St(M),J=te({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=St(J),ft=te({},Ni,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=St(ft),_t=[9,13,27,32],at=m&&"CompositionEvent"in window,dn=null;m&&"documentMode"in document&&(dn=document.documentMode);var rn=m&&"TextEvent"in window&&!dn,Di=m&&(!at||dn&&8<dn&&11>=dn),xs=" ",yf=!1;function _f(n,r){switch(n){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function Iv(n,r){switch(n){case"compositionend":return vf(r);case"keypress":return r.which!==32?null:(yf=!0,xs);case"textInput":return n=r.data,n===xs&&yf?null:n;default:return null}}function Sv(n,r){if(Ns)return n==="compositionend"||!at&&_f(n,r)?(n=Bo(),Ht=Ts=nn=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Di&&r.locale!=="ko"?null:r.data;default:return null}}var Av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Av[n.type]:r==="textarea"}function Ef(n,r,a,c){zn(c),r=Il(r,"onChange"),0<r.length&&(a=new Ss("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Ho=null,Ko=null;function Rv(n){Uf(n,0)}function vl(n){var r=Ms(n);if(ss(r))return n}function Cv(n,r){if(n==="change")return r}var Tf=!1;if(m){var dc;if(m){var fc="oninput"in document;if(!fc){var If=document.createElement("div");If.setAttribute("oninput","return;"),fc=typeof If.oninput=="function"}dc=fc}else dc=!1;Tf=dc&&(!document.documentMode||9<document.documentMode)}function Sf(){Ho&&(Ho.detachEvent("onpropertychange",Af),Ko=Ho=null)}function Af(n){if(n.propertyName==="value"&&vl(Ko)){var r=[];Ef(r,Ko,n,cs(n)),Vo(Rv,r)}}function Pv(n,r,a){n==="focusin"?(Sf(),Ho=r,Ko=a,Ho.attachEvent("onpropertychange",Af)):n==="focusout"&&Sf()}function kv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vl(Ko)}function xv(n,r){if(n==="click")return vl(r)}function Nv(n,r){if(n==="input"||n==="change")return vl(r)}function Dv(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var xn=typeof Object.is=="function"?Object.is:Dv;function Go(n,r){if(xn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!xn(n[d],r[d]))return!1}return!0}function Rf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Cf(n,r){var a=Rf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rf(a)}}function Pf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Pf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function kf(){for(var n=window,r=Nr();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Nr(n.document)}return r}function pc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Vv(n){var r=kf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Pf(a.ownerDocument.documentElement,a)){if(c!==null&&pc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Cf(a,p);var _=Cf(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ov=m&&"documentMode"in document&&11>=document.documentMode,Ds=null,mc=null,Qo=null,gc=!1;function xf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gc||Ds==null||Ds!==Nr(c)||(c=Ds,"selectionStart"in c&&pc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Qo&&Go(Qo,c)||(Qo=c,c=Il(mc,"onSelect"),0<c.length&&(r=new Ss("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Ds)))}function wl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Vs={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},yc={},Nf={};m&&(Nf=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function El(n){if(yc[n])return yc[n];if(!Vs[n])return n;var r=Vs[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Nf)return yc[n]=r[a];return n}var Df=El("animationend"),Vf=El("animationiteration"),Of=El("animationstart"),Lf=El("transitionend"),Mf=new Map,bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(n,r){Mf.set(n,r),u(r,[n])}for(var _c=0;_c<bf.length;_c++){var vc=bf[_c],Lv=vc.toLowerCase(),Mv=vc[0].toUpperCase()+vc.slice(1);Br(Lv,"on"+Mv)}Br(Df,"onAnimationEnd"),Br(Vf,"onAnimationIteration"),Br(Of,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Lf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function Ff(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,Xa(c,r,void 0,n),n.currentTarget=null}function Uf(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var T=c[_],R=T.instance,j=T.currentTarget;if(T=T.listener,R!==p&&d.isPropagationStopped())break e;Ff(d,T,j),p=R}else for(_=0;_<c.length;_++){if(T=c[_],R=T.instance,j=T.currentTarget,T=T.listener,R!==p&&d.isPropagationStopped())break e;Ff(d,T,j),p=R}}}if(Tn)throw n=Oo,Tn=!1,Oo=null,n}function Ge(n,r){var a=r[Cc];a===void 0&&(a=r[Cc]=new Set);var c=n+"__bubble";a.has(c)||(jf(r,n,2,!1),a.add(c))}function wc(n,r,a){var c=0;r&&(c|=4),jf(a,n,c,r)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Xo(n){if(!n[Tl]){n[Tl]=!0,s.forEach(function(a){a!=="selectionchange"&&(bv.has(a)||wc(a,!1,n),wc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Tl]||(r[Tl]=!0,wc("selectionchange",!1,r))}}function jf(n,r,a,c){switch(zo(r)){case 1:var d=Xe;break;case 4:d=cc;break;default:d=jo}a=d.bind(null,r,a,n),d=void 0,!fs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Ec(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var T=c.stateNode.containerInfo;if(T===d||T.nodeType===8&&T.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===d||R.nodeType===8&&R.parentNode===d))return;_=_.return}for(;T!==null;){if(_=Vi(T),_===null)return;if(R=_.tag,R===5||R===6){c=p=_;continue e}T=T.parentNode}}c=c.return}Vo(function(){var j=p,q=cs(a),G=[];e:{var W=Mf.get(n);if(W!==void 0){var ee=Ss,se=n;switch(n){case"keypress":if(Is(a)===0)break e;case"keydown":case"keyup":ee=f;break;case"focusin":se="focus",ee=Ps;break;case"focusout":se="blur",ee=Ps;break;case"beforeblur":case"afterblur":ee=Ps;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=z;break;case Df:case Vf:case Of:ee=cr;break;case Lf:ee=ze;break;case"scroll":ee=hc;break;case"wheel":ee=Ne;break;case"copy":case"cut":case"paste":ee=ml;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=w}var oe=(r&4)!==0,st=!oe&&n==="scroll",b=oe?W!==null?W+"Capture":null:W;oe=[];for(var k=j,F;k!==null;){F=k;var Y=F.stateNode;if(F.tag===5&&Y!==null&&(F=Y,b!==null&&(Y=it(k,b),Y!=null&&oe.push(Jo(k,Y,F)))),st)break;k=k.return}0<oe.length&&(W=new ee(W,se,null,a,q),G.push({event:W,listeners:oe}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",W&&a!==wi&&(se=a.relatedTarget||a.fromElement)&&(Vi(se)||se[hr]))break e;if((ee||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(se=a.relatedTarget||a.toElement,ee=j,se=se?Vi(se):null,se!==null&&(st=In(se),se!==st||se.tag!==5&&se.tag!==6)&&(se=null)):(ee=null,se=j),ee!==se)){if(oe=Rs,Y="onMouseLeave",b="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(oe=w,Y="onPointerLeave",b="onPointerEnter",k="pointer"),st=ee==null?W:Ms(ee),F=se==null?W:Ms(se),W=new oe(Y,k+"leave",ee,a,q),W.target=st,W.relatedTarget=F,Y=null,Vi(q)===j&&(oe=new oe(b,k+"enter",se,a,q),oe.target=F,oe.relatedTarget=st,Y=oe),st=Y,ee&&se)t:{for(oe=ee,b=se,k=0,F=oe;F;F=Os(F))k++;for(F=0,Y=b;Y;Y=Os(Y))F++;for(;0<k-F;)oe=Os(oe),k--;for(;0<F-k;)b=Os(b),F--;for(;k--;){if(oe===b||b!==null&&oe===b.alternate)break t;oe=Os(oe),b=Os(b)}oe=null}else oe=null;ee!==null&&zf(G,W,ee,oe,!1),se!==null&&st!==null&&zf(G,st,se,oe,!0)}}e:{if(W=j?Ms(j):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var le=Cv;else if(wf(W))if(Tf)le=Nv;else{le=kv;var he=Pv}else(ee=W.nodeName)&&ee.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(le=xv);if(le&&(le=le(n,j))){Ef(G,le,a,q);break e}he&&he(n,W,j),n==="focusout"&&(he=W._wrapperState)&&he.controlled&&W.type==="number"&&as(W,"number",W.value)}switch(he=j?Ms(j):window,n){case"focusin":(wf(he)||he.contentEditable==="true")&&(Ds=he,mc=j,Qo=null);break;case"focusout":Qo=mc=Ds=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,xf(G,a,q);break;case"selectionchange":if(Ov)break;case"keydown":case"keyup":xf(G,a,q)}var de;if(at)e:{switch(n){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ns?_f(n,a)&&(pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(Di&&a.locale!=="ko"&&(Ns||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ns&&(de=Bo()):(nn=q,Ts="value"in nn?nn.value:nn.textContent,Ns=!0)),he=Il(j,pe),0<he.length&&(pe=new qo(pe,n,null,a,q),G.push({event:pe,listeners:he}),de?pe.data=de:(de=vf(a),de!==null&&(pe.data=de)))),(de=rn?Iv(n,a):Sv(n,a))&&(j=Il(j,"onBeforeInput"),0<j.length&&(q=new qo("onBeforeInput","beforeinput",null,a,q),G.push({event:q,listeners:j}),q.data=de))}Uf(G,r)})}function Jo(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Il(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=it(n,a),p!=null&&c.unshift(Jo(n,p,d)),p=it(n,r),p!=null&&c.push(Jo(n,p,d))),n=n.return}return c}function Os(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zf(n,r,a,c,d){for(var p=r._reactName,_=[];a!==null&&a!==c;){var T=a,R=T.alternate,j=T.stateNode;if(R!==null&&R===c)break;T.tag===5&&j!==null&&(T=j,d?(R=it(a,p),R!=null&&_.unshift(Jo(a,R,T))):d||(R=it(a,p),R!=null&&_.push(Jo(a,R,T)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var Fv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function Bf(n){return(typeof n=="string"?n:""+n).replace(Fv,`
`).replace(Uv,"")}function Sl(n,r,a){if(r=Bf(r),Bf(n)!==r&&a)throw Error(t(425))}function Al(){}var Tc=null,Ic=null;function Sc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ac=typeof setTimeout=="function"?setTimeout:void 0,jv=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,zv=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(n){return $f.resolve(null).then(n).catch(Bv)}:Ac;function Bv(n){setTimeout(function(){throw n})}function Rc(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Pn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Pn(r)}function $r(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Wf(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Ls,Zo="__reactProps$"+Ls,hr="__reactContainer$"+Ls,Cc="__reactEvents$"+Ls,$v="__reactListeners$"+Ls,Wv="__reactHandles$"+Ls;function Vi(n){var r=n[Kn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[hr]||a[Kn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Wf(n);n!==null;){if(a=n[Kn])return a;n=Wf(n)}return r}n=a,a=n.parentNode}return null}function ea(n){return n=n[Kn]||n[hr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ms(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Rl(n){return n[Zo]||null}var Pc=[],bs=-1;function Wr(n){return{current:n}}function Qe(n){0>bs||(n.current=Pc[bs],Pc[bs]=null,bs--)}function Ke(n,r){bs++,Pc[bs]=n.current,n.current=r}var qr={},Dt=Wr(qr),Kt=Wr(!1),Oi=qr;function Fs(n,r){var a=n.type.contextTypes;if(!a)return qr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Gt(n){return n=n.childContextTypes,n!=null}function Cl(){Qe(Kt),Qe(Dt)}function qf(n,r,a){if(Dt.current!==qr)throw Error(t(168));Ke(Dt,r),Ke(Kt,a)}function Hf(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,be(n)||"Unknown",d));return te({},a,c)}function Pl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qr,Oi=Dt.current,Ke(Dt,n),Ke(Kt,Kt.current),!0}function Kf(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Hf(n,r,Oi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Kt),Qe(Dt),Ke(Dt,n)):Qe(Kt),Ke(Kt,a)}var dr=null,kl=!1,kc=!1;function Gf(n){dr===null?dr=[n]:dr.push(n)}function qv(n){kl=!0,Gf(n)}function Hr(){if(!kc&&dr!==null){kc=!0;var n=0,r=Pe;try{var a=dr;for(Pe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}dr=null,kl=!1}catch(d){throw dr!==null&&(dr=dr.slice(n+1)),ys(Ai,Hr),d}finally{Pe=r,kc=!1}}return null}var Us=[],js=0,xl=null,Nl=0,fn=[],pn=0,Li=null,fr=1,pr="";function Mi(n,r){Us[js++]=Nl,Us[js++]=xl,xl=n,Nl=r}function Qf(n,r,a){fn[pn++]=fr,fn[pn++]=pr,fn[pn++]=Li,Li=n;var c=fr;n=pr;var d=32-jt(c)-1;c&=~(1<<d),a+=1;var p=32-jt(r)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,fr=1<<32-jt(r)+d|a<<d|c,pr=p+n}else fr=1<<p|a<<d|c,pr=n}function xc(n){n.return!==null&&(Mi(n,1),Qf(n,1,0))}function Nc(n){for(;n===xl;)xl=Us[--js],Us[js]=null,Nl=Us[--js],Us[js]=null;for(;n===Li;)Li=fn[--pn],fn[pn]=null,pr=fn[--pn],fn[pn]=null,fr=fn[--pn],fn[pn]=null}var sn=null,on=null,Je=!1,Nn=null;function Yf(n,r){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Xf(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,sn=n,on=$r(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,sn=n,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Li!==null?{id:fr,overflow:pr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,sn=n,on=null,!0):!1;default:return!1}}function Dc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vc(n){if(Je){var r=on;if(r){var a=r;if(!Xf(n,r)){if(Dc(n))throw Error(t(418));r=$r(a.nextSibling);var c=sn;r&&Xf(n,r)?Yf(c,a):(n.flags=n.flags&-4097|2,Je=!1,sn=n)}}else{if(Dc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Je=!1,sn=n}}}function Jf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sn=n}function Dl(n){if(n!==sn)return!1;if(!Je)return Jf(n),Je=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Sc(n.type,n.memoizedProps)),r&&(r=on)){if(Dc(n))throw Zf(),Error(t(418));for(;r;)Yf(n,r),r=$r(r.nextSibling)}if(Jf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){on=$r(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}on=null}}else on=sn?$r(n.stateNode.nextSibling):null;return!0}function Zf(){for(var n=on;n;)n=$r(n.nextSibling)}function zs(){on=sn=null,Je=!1}function Oc(n){Nn===null?Nn=[n]:Nn.push(n)}var Hv=me.ReactCurrentBatchConfig;function ta(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=d.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Vl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function ep(n){var r=n._init;return r(n._payload)}function tp(n){function r(b,k){if(n){var F=b.deletions;F===null?(b.deletions=[k],b.flags|=16):F.push(k)}}function a(b,k){if(!n)return null;for(;k!==null;)r(b,k),k=k.sibling;return null}function c(b,k){for(b=new Map;k!==null;)k.key!==null?b.set(k.key,k):b.set(k.index,k),k=k.sibling;return b}function d(b,k){return b=ei(b,k),b.index=0,b.sibling=null,b}function p(b,k,F){return b.index=F,n?(F=b.alternate,F!==null?(F=F.index,F<k?(b.flags|=2,k):F):(b.flags|=2,k)):(b.flags|=1048576,k)}function _(b){return n&&b.alternate===null&&(b.flags|=2),b}function T(b,k,F,Y){return k===null||k.tag!==6?(k=Ah(F,b.mode,Y),k.return=b,k):(k=d(k,F),k.return=b,k)}function R(b,k,F,Y){var le=F.type;return le===x?q(b,k,F.props.children,Y,F.key):k!==null&&(k.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ze&&ep(le)===k.type)?(Y=d(k,F.props),Y.ref=ta(b,k,F),Y.return=b,Y):(Y=ru(F.type,F.key,F.props,null,b.mode,Y),Y.ref=ta(b,k,F),Y.return=b,Y)}function j(b,k,F,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Rh(F,b.mode,Y),k.return=b,k):(k=d(k,F.children||[]),k.return=b,k)}function q(b,k,F,Y,le){return k===null||k.tag!==7?(k=Wi(F,b.mode,Y,le),k.return=b,k):(k=d(k,F),k.return=b,k)}function G(b,k,F){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ah(""+k,b.mode,F),k.return=b,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case We:return F=ru(k.type,k.key,k.props,null,b.mode,F),F.ref=ta(b,null,k),F.return=b,F;case Ie:return k=Rh(k,b.mode,F),k.return=b,k;case Ze:var Y=k._init;return G(b,Y(k._payload),F)}if(nr(k)||ie(k))return k=Wi(k,b.mode,F,null),k.return=b,k;Vl(b,k)}return null}function W(b,k,F,Y){var le=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return le!==null?null:T(b,k,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case We:return F.key===le?R(b,k,F,Y):null;case Ie:return F.key===le?j(b,k,F,Y):null;case Ze:return le=F._init,W(b,k,le(F._payload),Y)}if(nr(F)||ie(F))return le!==null?null:q(b,k,F,Y,null);Vl(b,F)}return null}function ee(b,k,F,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return b=b.get(F)||null,T(k,b,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case We:return b=b.get(Y.key===null?F:Y.key)||null,R(k,b,Y,le);case Ie:return b=b.get(Y.key===null?F:Y.key)||null,j(k,b,Y,le);case Ze:var he=Y._init;return ee(b,k,F,he(Y._payload),le)}if(nr(Y)||ie(Y))return b=b.get(F)||null,q(k,b,Y,le,null);Vl(k,Y)}return null}function se(b,k,F,Y){for(var le=null,he=null,de=k,pe=k=0,Et=null;de!==null&&pe<F.length;pe++){de.index>pe?(Et=de,de=null):Et=de.sibling;var Oe=W(b,de,F[pe],Y);if(Oe===null){de===null&&(de=Et);break}n&&de&&Oe.alternate===null&&r(b,de),k=p(Oe,k,pe),he===null?le=Oe:he.sibling=Oe,he=Oe,de=Et}if(pe===F.length)return a(b,de),Je&&Mi(b,pe),le;if(de===null){for(;pe<F.length;pe++)de=G(b,F[pe],Y),de!==null&&(k=p(de,k,pe),he===null?le=de:he.sibling=de,he=de);return Je&&Mi(b,pe),le}for(de=c(b,de);pe<F.length;pe++)Et=ee(de,b,pe,F[pe],Y),Et!==null&&(n&&Et.alternate!==null&&de.delete(Et.key===null?pe:Et.key),k=p(Et,k,pe),he===null?le=Et:he.sibling=Et,he=Et);return n&&de.forEach(function(ti){return r(b,ti)}),Je&&Mi(b,pe),le}function oe(b,k,F,Y){var le=ie(F);if(typeof le!="function")throw Error(t(150));if(F=le.call(F),F==null)throw Error(t(151));for(var he=le=null,de=k,pe=k=0,Et=null,Oe=F.next();de!==null&&!Oe.done;pe++,Oe=F.next()){de.index>pe?(Et=de,de=null):Et=de.sibling;var ti=W(b,de,Oe.value,Y);if(ti===null){de===null&&(de=Et);break}n&&de&&ti.alternate===null&&r(b,de),k=p(ti,k,pe),he===null?le=ti:he.sibling=ti,he=ti,de=Et}if(Oe.done)return a(b,de),Je&&Mi(b,pe),le;if(de===null){for(;!Oe.done;pe++,Oe=F.next())Oe=G(b,Oe.value,Y),Oe!==null&&(k=p(Oe,k,pe),he===null?le=Oe:he.sibling=Oe,he=Oe);return Je&&Mi(b,pe),le}for(de=c(b,de);!Oe.done;pe++,Oe=F.next())Oe=ee(de,b,pe,Oe.value,Y),Oe!==null&&(n&&Oe.alternate!==null&&de.delete(Oe.key===null?pe:Oe.key),k=p(Oe,k,pe),he===null?le=Oe:he.sibling=Oe,he=Oe);return n&&de.forEach(function(A0){return r(b,A0)}),Je&&Mi(b,pe),le}function st(b,k,F,Y){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case We:e:{for(var le=F.key,he=k;he!==null;){if(he.key===le){if(le=F.type,le===x){if(he.tag===7){a(b,he.sibling),k=d(he,F.props.children),k.return=b,b=k;break e}}else if(he.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ze&&ep(le)===he.type){a(b,he.sibling),k=d(he,F.props),k.ref=ta(b,he,F),k.return=b,b=k;break e}a(b,he);break}else r(b,he);he=he.sibling}F.type===x?(k=Wi(F.props.children,b.mode,Y,F.key),k.return=b,b=k):(Y=ru(F.type,F.key,F.props,null,b.mode,Y),Y.ref=ta(b,k,F),Y.return=b,b=Y)}return _(b);case Ie:e:{for(he=F.key;k!==null;){if(k.key===he)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){a(b,k.sibling),k=d(k,F.children||[]),k.return=b,b=k;break e}else{a(b,k);break}else r(b,k);k=k.sibling}k=Rh(F,b.mode,Y),k.return=b,b=k}return _(b);case Ze:return he=F._init,st(b,k,he(F._payload),Y)}if(nr(F))return se(b,k,F,Y);if(ie(F))return oe(b,k,F,Y);Vl(b,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,k!==null&&k.tag===6?(a(b,k.sibling),k=d(k,F),k.return=b,b=k):(a(b,k),k=Ah(F,b.mode,Y),k.return=b,b=k),_(b)):a(b,k)}return st}var Bs=tp(!0),np=tp(!1),Ol=Wr(null),Ll=null,$s=null,Lc=null;function Mc(){Lc=$s=Ll=null}function bc(n){var r=Ol.current;Qe(Ol),n._currentValue=r}function Fc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Ws(n,r){Ll=n,Lc=$s=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Qt=!0),n.firstContext=null)}function mn(n){var r=n._currentValue;if(Lc!==n)if(n={context:n,memoizedValue:r,next:null},$s===null){if(Ll===null)throw Error(t(308));$s=n,Ll.dependencies={lanes:0,firstContext:n}}else $s=$s.next=n;return r}var bi=null;function Uc(n){bi===null?bi=[n]:bi.push(n)}function rp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Uc(r)):(a.next=d.next,d.next=a),r.interleaved=a,mr(n,c)}function mr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Kr=!1;function jc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ip(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function gr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Gr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ve&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,mr(n,a)}return d=c.interleaved,d===null?(r.next=r,Uc(c)):(r.next=d.next,d.next=r),c.interleaved=r,mr(n,a)}function Ml(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,br(n,a)}}function sp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function bl(n,r,a,c){var d=n.updateQueue;Kr=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var R=T,j=R.next;R.next=null,_===null?p=j:_.next=j,_=R;var q=n.alternate;q!==null&&(q=q.updateQueue,T=q.lastBaseUpdate,T!==_&&(T===null?q.firstBaseUpdate=j:T.next=j,q.lastBaseUpdate=R))}if(p!==null){var G=d.baseState;_=0,q=j=R=null,T=p;do{var W=T.lane,ee=T.eventTime;if((c&W)===W){q!==null&&(q=q.next={eventTime:ee,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var se=n,oe=T;switch(W=r,ee=a,oe.tag){case 1:if(se=oe.payload,typeof se=="function"){G=se.call(ee,G,W);break e}G=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=oe.payload,W=typeof se=="function"?se.call(ee,G,W):se,W==null)break e;G=te({},G,W);break e;case 2:Kr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=d.effects,W===null?d.effects=[T]:W.push(T))}else ee={eventTime:ee,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},q===null?(j=q=ee,R=G):q=q.next=ee,_|=W;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;W=T,T=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);if(q===null&&(R=G),d.baseState=R,d.firstBaseUpdate=j,d.lastBaseUpdate=q,r=d.shared.interleaved,r!==null){d=r;do _|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);ji|=_,n.lanes=_,n.memoizedState=G}}function op(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var na={},Gn=Wr(na),ra=Wr(na),ia=Wr(na);function Fi(n){if(n===na)throw Error(t(174));return n}function zc(n,r){switch(Ke(ia,r),Ke(ra,n),Ke(Gn,na),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:dt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=dt(r,n)}Qe(Gn),Ke(Gn,r)}function qs(){Qe(Gn),Qe(ra),Qe(ia)}function ap(n){Fi(ia.current);var r=Fi(Gn.current),a=dt(r,n.type);r!==a&&(Ke(ra,n),Ke(Gn,a))}function Bc(n){ra.current===n&&(Qe(Gn),Qe(ra))}var et=Wr(0);function Fl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $c=[];function Wc(){for(var n=0;n<$c.length;n++)$c[n]._workInProgressVersionPrimary=null;$c.length=0}var Ul=me.ReactCurrentDispatcher,qc=me.ReactCurrentBatchConfig,Ui=0,tt=null,pt=null,vt=null,jl=!1,sa=!1,oa=0,Kv=0;function Vt(){throw Error(t(321))}function Hc(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!xn(n[a],r[a]))return!1;return!0}function Kc(n,r,a,c,d,p){if(Ui=p,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ul.current=n===null||n.memoizedState===null?Xv:Jv,n=a(c,d),sa){p=0;do{if(sa=!1,oa=0,25<=p)throw Error(t(301));p+=1,vt=pt=null,r.updateQueue=null,Ul.current=Zv,n=a(c,d)}while(sa)}if(Ul.current=$l,r=pt!==null&&pt.next!==null,Ui=0,vt=pt=tt=null,jl=!1,r)throw Error(t(300));return n}function Gc(){var n=oa!==0;return oa=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?tt.memoizedState=vt=n:vt=vt.next=n,vt}function gn(){if(pt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var r=vt===null?tt.memoizedState:vt.next;if(r!==null)vt=r,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?tt.memoizedState=vt=n:vt=vt.next=n}return vt}function aa(n,r){return typeof r=="function"?r(n):r}function Qc(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=pt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var T=_=null,R=null,j=p;do{var q=j.lane;if((Ui&q)===q)R!==null&&(R=R.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var G={lane:q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};R===null?(T=R=G,_=c):R=R.next=G,tt.lanes|=q,ji|=q}j=j.next}while(j!==null&&j!==p);R===null?_=c:R.next=T,xn(c,r.memoizedState)||(Qt=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=R,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,tt.lanes|=p,ji|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Yc(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do p=n(p,_.action),_=_.next;while(_!==d);xn(p,r.memoizedState)||(Qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function lp(){}function up(n,r){var a=tt,c=gn(),d=r(),p=!xn(c.memoizedState,d);if(p&&(c.memoizedState=d,Qt=!0),c=c.queue,Xc(dp.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,la(9,hp.bind(null,a,c,d,r),void 0,null),wt===null)throw Error(t(349));(Ui&30)!==0||cp(a,r,d)}return d}function cp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function hp(n,r,a,c){r.value=a,r.getSnapshot=c,fp(r)&&pp(n)}function dp(n,r,a){return a(function(){fp(r)&&pp(n)})}function fp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!xn(n,a)}catch{return!0}}function pp(n){var r=mr(n,1);r!==null&&Ln(r,n,1,-1)}function mp(n){var r=Qn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:n},r.queue=n,n=n.dispatch=Yv.bind(null,tt,n),[r.memoizedState,n]}function la(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function gp(){return gn().memoizedState}function zl(n,r,a,c){var d=Qn();tt.flags|=n,d.memoizedState=la(1|r,a,void 0,c===void 0?null:c)}function Bl(n,r,a,c){var d=gn();c=c===void 0?null:c;var p=void 0;if(pt!==null){var _=pt.memoizedState;if(p=_.destroy,c!==null&&Hc(c,_.deps)){d.memoizedState=la(r,a,p,c);return}}tt.flags|=n,d.memoizedState=la(1|r,a,p,c)}function yp(n,r){return zl(8390656,8,n,r)}function Xc(n,r){return Bl(2048,8,n,r)}function _p(n,r){return Bl(4,2,n,r)}function vp(n,r){return Bl(4,4,n,r)}function wp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ep(n,r,a){return a=a!=null?a.concat([n]):null,Bl(4,4,wp.bind(null,r,n),a)}function Jc(){}function Tp(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hc(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Ip(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hc(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Sp(n,r,a){return(Ui&21)===0?(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a):(xn(a,r)||(a=Pi(),tt.lanes|=a,ji|=a,n.baseState=!0),r)}function Gv(n,r){var a=Pe;Pe=a!==0&&4>a?a:4,n(!0);var c=qc.transition;qc.transition={};try{n(!1),r()}finally{Pe=a,qc.transition=c}}function Ap(){return gn().memoizedState}function Qv(n,r,a){var c=Jr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Rp(n))Cp(r,a);else if(a=rp(n,r,a,c),a!==null){var d=$t();Ln(a,n,c,d),Pp(a,r,c)}}function Yv(n,r,a){var c=Jr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rp(n))Cp(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,a);if(d.hasEagerState=!0,d.eagerState=T,xn(T,_)){var R=r.interleaved;R===null?(d.next=d,Uc(r)):(d.next=R.next,R.next=d),r.interleaved=d;return}}catch{}finally{}a=rp(n,r,d,c),a!==null&&(d=$t(),Ln(a,n,c,d),Pp(a,r,c))}}function Rp(n){var r=n.alternate;return n===tt||r!==null&&r===tt}function Cp(n,r){sa=jl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Pp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,br(n,a)}}var $l={readContext:mn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},Xv={readContext:mn,useCallback:function(n,r){return Qn().memoizedState=[n,r===void 0?null:r],n},useContext:mn,useEffect:yp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,zl(4194308,4,wp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return zl(4194308,4,n,r)},useInsertionEffect:function(n,r){return zl(4,2,n,r)},useMemo:function(n,r){var a=Qn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Qn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Qv.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var r=Qn();return n={current:n},r.memoizedState=n},useState:mp,useDebugValue:Jc,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=mp(!1),r=n[0];return n=Gv.bind(null,n[1]),Qn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=tt,d=Qn();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),wt===null)throw Error(t(349));(Ui&30)!==0||cp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,yp(dp.bind(null,c,p,n),[n]),c.flags|=2048,la(9,hp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=Qn(),r=wt.identifierPrefix;if(Je){var a=pr,c=fr;a=(c&~(1<<32-jt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=oa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Kv++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Jv={readContext:mn,useCallback:Tp,useContext:mn,useEffect:Xc,useImperativeHandle:Ep,useInsertionEffect:_p,useLayoutEffect:vp,useMemo:Ip,useReducer:Qc,useRef:gp,useState:function(){return Qc(aa)},useDebugValue:Jc,useDeferredValue:function(n){var r=gn();return Sp(r,pt.memoizedState,n)},useTransition:function(){var n=Qc(aa)[0],r=gn().memoizedState;return[n,r]},useMutableSource:lp,useSyncExternalStore:up,useId:Ap,unstable_isNewReconciler:!1},Zv={readContext:mn,useCallback:Tp,useContext:mn,useEffect:Xc,useImperativeHandle:Ep,useInsertionEffect:_p,useLayoutEffect:vp,useMemo:Ip,useReducer:Yc,useRef:gp,useState:function(){return Yc(aa)},useDebugValue:Jc,useDeferredValue:function(n){var r=gn();return pt===null?r.memoizedState=n:Sp(r,pt.memoizedState,n)},useTransition:function(){var n=Yc(aa)[0],r=gn().memoizedState;return[n,r]},useMutableSource:lp,useSyncExternalStore:up,useId:Ap,unstable_isNewReconciler:!1};function Dn(n,r){if(n&&n.defaultProps){r=te({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Zc(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:te({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wl={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=$t(),d=Jr(n),p=gr(c,d);p.payload=r,a!=null&&(p.callback=a),r=Gr(n,p,d),r!==null&&(Ln(r,n,d,c),Ml(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=$t(),d=Jr(n),p=gr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=Gr(n,p,d),r!==null&&(Ln(r,n,d,c),Ml(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=$t(),c=Jr(n),d=gr(a,c);d.tag=2,r!=null&&(d.callback=r),r=Gr(n,d,c),r!==null&&(Ln(r,n,c,a),Ml(r,n,c))}};function kp(n,r,a,c,d,p,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!Go(a,c)||!Go(d,p):!0}function xp(n,r,a){var c=!1,d=qr,p=r.contextType;return typeof p=="object"&&p!==null?p=mn(p):(d=Gt(r)?Oi:Dt.current,c=r.contextTypes,p=(c=c!=null)?Fs(n,d):qr),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Wl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function Np(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Wl.enqueueReplaceState(r,r.state,null)}function eh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},jc(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=mn(p):(p=Gt(r)?Oi:Dt.current,d.context=Fs(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Zc(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Wl.enqueueReplaceState(d,d.state,null),bl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Hs(n,r){try{var a="",c=r;do a+=Ae(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function th(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function nh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var e0=typeof WeakMap=="function"?WeakMap:Map;function Dp(n,r,a){a=gr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Xl||(Xl=!0,yh=c),nh(n,r)},a}function Vp(n,r,a){a=gr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){nh(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){nh(n,r),typeof c!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),a}function Op(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new e0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=p0.bind(null,n,r,a),r.then(n,n))}function Lp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Mp(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=gr(-1,1),r.tag=2,Gr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var t0=me.ReactCurrentOwner,Qt=!1;function Bt(n,r,a,c){r.child=n===null?np(r,null,a,c):Bs(r,n.child,a,c)}function bp(n,r,a,c,d){a=a.render;var p=r.ref;return Ws(r,d),c=Kc(n,r,a,c,p,d),a=Gc(),n!==null&&!Qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,yr(n,r,d)):(Je&&a&&xc(r),r.flags|=1,Bt(n,r,c,d),r.child)}function Fp(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Sh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Up(n,r,p,c,d)):(n=ru(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:Go,a(_,c)&&n.ref===r.ref)return yr(n,r,d)}return r.flags|=1,n=ei(p,c),n.ref=r.ref,n.return=r,r.child=n}function Up(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(Go(p,c)&&n.ref===r.ref)if(Qt=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Qt=!0);else return r.lanes=n.lanes,yr(n,r,d)}return rh(n,r,a,c,d)}function jp(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Gs,an),an|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Ke(Gs,an),an|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ke(Gs,an),an|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Ke(Gs,an),an|=c;return Bt(n,r,d,a),r.child}function zp(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function rh(n,r,a,c,d){var p=Gt(a)?Oi:Dt.current;return p=Fs(r,p),Ws(r,d),a=Kc(n,r,a,c,p,d),c=Gc(),n!==null&&!Qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,yr(n,r,d)):(Je&&c&&xc(r),r.flags|=1,Bt(n,r,a,d),r.child)}function Bp(n,r,a,c,d){if(Gt(a)){var p=!0;Pl(r)}else p=!1;if(Ws(r,d),r.stateNode===null)Hl(n,r),xp(r,a,c),eh(r,a,c,d),c=!0;else if(n===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var R=_.context,j=a.contextType;typeof j=="object"&&j!==null?j=mn(j):(j=Gt(a)?Oi:Dt.current,j=Fs(r,j));var q=a.getDerivedStateFromProps,G=typeof q=="function"||typeof _.getSnapshotBeforeUpdate=="function";G||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==c||R!==j)&&Np(r,_,c,j),Kr=!1;var W=r.memoizedState;_.state=W,bl(r,c,_,d),R=r.memoizedState,T!==c||W!==R||Kt.current||Kr?(typeof q=="function"&&(Zc(r,a,q,c),R=r.memoizedState),(T=Kr||kp(r,a,T,c,W,R,j))?(G||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=R),_.props=c,_.state=R,_.context=j,c=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,ip(n,r),T=r.memoizedProps,j=r.type===r.elementType?T:Dn(r.type,T),_.props=j,G=r.pendingProps,W=_.context,R=a.contextType,typeof R=="object"&&R!==null?R=mn(R):(R=Gt(a)?Oi:Dt.current,R=Fs(r,R));var ee=a.getDerivedStateFromProps;(q=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==G||W!==R)&&Np(r,_,c,R),Kr=!1,W=r.memoizedState,_.state=W,bl(r,c,_,d);var se=r.memoizedState;T!==G||W!==se||Kt.current||Kr?(typeof ee=="function"&&(Zc(r,a,ee,c),se=r.memoizedState),(j=Kr||kp(r,a,j,c,W,se,R)||!1)?(q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,se,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,se,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=se),_.props=c,_.state=se,_.context=R,c=j):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return ih(n,r,a,c,p,d)}function ih(n,r,a,c,d,p){zp(n,r);var _=(r.flags&128)!==0;if(!c&&!_)return d&&Kf(r,a,!1),yr(n,r,p);c=r.stateNode,t0.current=r;var T=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&_?(r.child=Bs(r,n.child,null,p),r.child=Bs(r,null,T,p)):Bt(n,r,T,p),r.memoizedState=c.state,d&&Kf(r,a,!0),r.child}function $p(n){var r=n.stateNode;r.pendingContext?qf(n,r.pendingContext,r.pendingContext!==r.context):r.context&&qf(n,r.context,!1),zc(n,r.containerInfo)}function Wp(n,r,a,c,d){return zs(),Oc(d),r.flags|=256,Bt(n,r,a,c),r.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function oh(n){return{baseLanes:n,cachePool:null,transitions:null}}function qp(n,r,a){var c=r.pendingProps,d=et.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=n!==null&&n.memoizedState===null?!1:(d&2)!==0),T?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ke(et,d&1),n===null)return Vc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,n=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=iu(_,c,0,null),n=Wi(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=oh(a),r.memoizedState=sh,n):ah(r,_));if(d=n.memoizedState,d!==null&&(T=d.dehydrated,T!==null))return n0(n,r,_,c,T,d,a);if(p){p=c.fallback,_=r.mode,d=n.child,T=d.sibling;var R={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=R,r.deletions=null):(c=ei(d,R),c.subtreeFlags=d.subtreeFlags&14680064),T!==null?p=ei(T,p):(p=Wi(p,_,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=n.child.memoizedState,_=_===null?oh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=n.childLanes&~a,r.memoizedState=sh,c}return p=n.child,n=p.sibling,c=ei(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function ah(n,r){return r=iu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function ql(n,r,a,c){return c!==null&&Oc(c),Bs(r,n.child,null,a),n=ah(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function n0(n,r,a,c,d,p,_){if(a)return r.flags&256?(r.flags&=-257,c=th(Error(t(422))),ql(n,r,_,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=iu({mode:"visible",children:c.children},d,0,null),p=Wi(p,d,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&Bs(r,n.child,null,_),r.child.memoizedState=oh(_),r.memoizedState=sh,p);if((r.mode&1)===0)return ql(n,r,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var T=c.dgst;return c=T,p=Error(t(419)),c=th(p,c,void 0),ql(n,r,_,c)}if(T=(_&n.childLanes)!==0,Qt||T){if(c=wt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,mr(n,d),Ln(c,n,d,-1))}return Ih(),c=th(Error(t(421))),ql(n,r,_,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=m0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,on=$r(d.nextSibling),sn=r,Je=!0,Nn=null,n!==null&&(fn[pn++]=fr,fn[pn++]=pr,fn[pn++]=Li,fr=n.id,pr=n.overflow,Li=r),r=ah(r,c.children),r.flags|=4096,r)}function Hp(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Fc(n.return,r,a)}function lh(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Kp(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(Bt(n,r,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hp(n,a,r);else if(n.tag===19)Hp(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ke(et,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Fl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),lh(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Fl(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}lh(r,!0,a,null,p);break;case"together":lh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Hl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function yr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),ji|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=ei(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ei(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function r0(n,r,a){switch(r.tag){case 3:$p(r),zs();break;case 5:ap(r);break;case 1:Gt(r.type)&&Pl(r);break;case 4:zc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Ke(Ol,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ke(et,et.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?qp(n,r,a):(Ke(et,et.current&1),n=yr(n,r,a),n!==null?n.sibling:null);Ke(et,et.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Kp(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ke(et,et.current),c)break;return null;case 22:case 23:return r.lanes=0,jp(n,r,a)}return yr(n,r,a)}var Gp,uh,Qp,Yp;Gp=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},uh=function(){},Qp=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Fi(Gn.current);var p=null;switch(a){case"input":d=yi(n,d),c=yi(n,c),p=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),p=[];break;case"textarea":d=Io(n,d),c=Io(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Al)}ko(a,c);var _;a=null;for(j in d)if(!c.hasOwnProperty(j)&&d.hasOwnProperty(j)&&d[j]!=null)if(j==="style"){var T=d[j];for(_ in T)T.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?p||(p=[]):(p=p||[]).push(j,null));for(j in c){var R=c[j];if(T=d!=null?d[j]:void 0,c.hasOwnProperty(j)&&R!==T&&(R!=null||T!=null))if(j==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in R)R.hasOwnProperty(_)&&T[_]!==R[_]&&(a||(a={}),a[_]=R[_])}else a||(p||(p=[]),p.push(j,a)),a=R;else j==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(j,R)):j==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(j,""+R):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(R!=null&&j==="onScroll"&&Ge("scroll",n),p||T===R||(p=[])):(p=p||[]).push(j,R))}a&&(p=p||[]).push("style",a);var j=p;(r.updateQueue=j)&&(r.flags|=4)}},Yp=function(n,r,a,c){a!==c&&(r.flags|=4)};function ua(n,r){if(!Je)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function i0(n,r,a){var c=r.pendingProps;switch(Nc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(r),null;case 1:return Gt(r.type)&&Cl(),Ot(r),null;case 3:return c=r.stateNode,qs(),Qe(Kt),Qe(Dt),Wc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Dl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nn!==null&&(wh(Nn),Nn=null))),uh(n,r),Ot(r),null;case 5:Bc(r);var d=Fi(ia.current);if(a=r.type,n!==null&&r.stateNode!=null)Qp(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ot(r),null}if(n=Fi(Gn.current),Dl(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[Kn]=r,c[Zo]=p,n=(r.mode&1)!==0,a){case"dialog":Ge("cancel",c),Ge("close",c);break;case"iframe":case"object":case"embed":Ge("load",c);break;case"video":case"audio":for(d=0;d<Yo.length;d++)Ge(Yo[d],c);break;case"source":Ge("error",c);break;case"img":case"image":case"link":Ge("error",c),Ge("load",c);break;case"details":Ge("toggle",c);break;case"input":os(c,p),Ge("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ge("invalid",c);break;case"textarea":ls(c,p),Ge("invalid",c)}ko(a,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?c.textContent!==T&&(p.suppressHydrationWarning!==!0&&Sl(c.textContent,T,n),d=["children",T]):typeof T=="number"&&c.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Sl(c.textContent,T,n),d=["children",""+T]):o.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&Ge("scroll",c)}switch(a){case"input":tr(c),Ya(c,p,!0);break;case"textarea":tr(c),So(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Al)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Kn]=r,n[Zo]=c,Gp(n,r,!1,!1),r.stateNode=n;e:{switch(_=xo(a,c),a){case"dialog":Ge("cancel",n),Ge("close",n),d=c;break;case"iframe":case"object":case"embed":Ge("load",n),d=c;break;case"video":case"audio":for(d=0;d<Yo.length;d++)Ge(Yo[d],n);d=c;break;case"source":Ge("error",n),d=c;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),d=c;break;case"details":Ge("toggle",n),d=c;break;case"input":os(n,c),d=yi(n,c),Ge("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),Ge("invalid",n);break;case"textarea":ls(n,c),d=Io(n,c),Ge("invalid",n);break;default:d=c}ko(a,d),T=d;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?Co(n,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ao(n,R)):p==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&Dr(n,R):typeof R=="number"&&Dr(n,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?R!=null&&p==="onScroll"&&Ge("scroll",n):R!=null&&Ee(n,p,R,_))}switch(a){case"input":tr(n),Ya(n,c,!1);break;case"textarea":tr(n),So(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?rr(n,!!c.multiple,p,!1):c.defaultValue!=null&&rr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Al)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ot(r),null;case 6:if(n&&r.stateNode!=null)Yp(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Fi(ia.current),Fi(Gn.current),Dl(r)){if(c=r.stateNode,a=r.memoizedProps,c[Kn]=r,(p=c.nodeValue!==a)&&(n=sn,n!==null))switch(n.tag){case 3:Sl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Sl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Kn]=r,r.stateNode=c}return Ot(r),null;case 13:if(Qe(et),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&on!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Zf(),zs(),r.flags|=98560,p=!1;else if(p=Dl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Kn]=r}else zs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ot(r),p=!1}else Nn!==null&&(wh(Nn),Nn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(et.current&1)!==0?mt===0&&(mt=3):Ih())),r.updateQueue!==null&&(r.flags|=4),Ot(r),null);case 4:return qs(),uh(n,r),n===null&&Xo(r.stateNode.containerInfo),Ot(r),null;case 10:return bc(r.type._context),Ot(r),null;case 17:return Gt(r.type)&&Cl(),Ot(r),null;case 19:if(Qe(et),p=r.memoizedState,p===null)return Ot(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)ua(p,!1);else{if(mt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=Fl(n),_!==null){for(r.flags|=128,ua(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,n=_.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(et,et.current&1|2),r.child}n=n.sibling}p.tail!==null&&He()>Qs&&(r.flags|=128,c=!0,ua(p,!1),r.lanes=4194304)}else{if(!c)if(n=Fl(_),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ua(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Je)return Ot(r),null}else 2*He()-p.renderingStartTime>Qs&&a!==1073741824&&(r.flags|=128,c=!0,ua(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(a=p.last,a!==null?a.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=He(),r.sibling=null,a=et.current,Ke(et,c?a&1|2:a&1),r):(Ot(r),null);case 22:case 23:return Th(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(an&1073741824)!==0&&(Ot(r),r.subtreeFlags&6&&(r.flags|=8192)):Ot(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function s0(n,r){switch(Nc(r),r.tag){case 1:return Gt(r.type)&&Cl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return qs(),Qe(Kt),Qe(Dt),Wc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Bc(r),null;case 13:if(Qe(et),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));zs()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Qe(et),null;case 4:return qs(),null;case 10:return bc(r.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Kl=!1,Lt=!1,o0=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ks(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){rt(n,r,c)}else a.current=null}function ch(n,r,a){try{a()}catch(c){rt(n,r,c)}}var Xp=!1;function a0(n,r){if(Tc=jr,n=kf(),pc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,T=-1,R=-1,j=0,q=0,G=n,W=null;t:for(;;){for(var ee;G!==a||d!==0&&G.nodeType!==3||(T=_+d),G!==p||c!==0&&G.nodeType!==3||(R=_+c),G.nodeType===3&&(_+=G.nodeValue.length),(ee=G.firstChild)!==null;)W=G,G=ee;for(;;){if(G===n)break t;if(W===a&&++j===d&&(T=_),W===p&&++q===c&&(R=_),(ee=G.nextSibling)!==null)break;G=W,W=G.parentNode}G=ee}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ic={focusedElem:n,selectionRange:a},jr=!1,ne=r;ne!==null;)if(r=ne,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ne=n;else for(;ne!==null;){r=ne;try{var se=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var oe=se.memoizedProps,st=se.memoizedState,b=r.stateNode,k=b.getSnapshotBeforeUpdate(r.elementType===r.type?oe:Dn(r.type,oe),st);b.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){rt(r,r.return,Y)}if(n=r.sibling,n!==null){n.return=r.return,ne=n;break}ne=r.return}return se=Xp,Xp=!1,se}function ca(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ch(r,a,p)}d=d.next}while(d!==c)}}function Gl(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function hh(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Jp(n){var r=n.alternate;r!==null&&(n.alternate=null,Jp(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Kn],delete r[Zo],delete r[Cc],delete r[$v],delete r[Wv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zp(n){return n.tag===5||n.tag===3||n.tag===4}function em(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Al));else if(c!==4&&(n=n.child,n!==null))for(dh(n,r,a),n=n.sibling;n!==null;)dh(n,r,a),n=n.sibling}function fh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(fh(n,r,a),n=n.sibling;n!==null;)fh(n,r,a),n=n.sibling}var At=null,Vn=!1;function Qr(n,r,a){for(a=a.child;a!==null;)tm(n,r,a),a=a.sibling}function tm(n,r,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ri,a)}catch{}switch(a.tag){case 5:Lt||Ks(a,r);case 6:var c=At,d=Vn;At=null,Qr(n,r,a),At=c,Vn=d,At!==null&&(Vn?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Vn?(n=At,a=a.stateNode,n.nodeType===8?Rc(n.parentNode,a):n.nodeType===1&&Rc(n,a),Pn(n)):Rc(At,a.stateNode));break;case 4:c=At,d=Vn,At=a.stateNode.containerInfo,Vn=!0,Qr(n,r,a),At=c,Vn=d;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&ch(a,r,_),d=d.next}while(d!==c)}Qr(n,r,a);break;case 1:if(!Lt&&(Ks(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(T){rt(a,r,T)}Qr(n,r,a);break;case 21:Qr(n,r,a);break;case 22:a.mode&1?(Lt=(c=Lt)||a.memoizedState!==null,Qr(n,r,a),Lt=c):Qr(n,r,a);break;default:Qr(n,r,a)}}function nm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new o0),r.forEach(function(c){var d=g0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:At=T.stateNode,Vn=!1;break e;case 3:At=T.stateNode.containerInfo,Vn=!0;break e;case 4:At=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(At===null)throw Error(t(160));tm(p,_,d),At=null,Vn=!1;var R=d.alternate;R!==null&&(R.return=null),d.return=null}catch(j){rt(d,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)rm(r,n),r=r.sibling}function rm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(r,n),Yn(n),c&4){try{ca(3,n,n.return),Gl(3,n)}catch(oe){rt(n,n.return,oe)}try{ca(5,n,n.return)}catch(oe){rt(n,n.return,oe)}}break;case 1:On(r,n),Yn(n),c&512&&a!==null&&Ks(a,a.return);break;case 5:if(On(r,n),Yn(n),c&512&&a!==null&&Ks(a,a.return),n.flags&32){var d=n.stateNode;try{Dr(d,"")}catch(oe){rt(n,n.return,oe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,_=a!==null?a.memoizedProps:p,T=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Eo(d,p),xo(T,_);var j=xo(T,p);for(_=0;_<R.length;_+=2){var q=R[_],G=R[_+1];q==="style"?Co(d,G):q==="dangerouslySetInnerHTML"?Ao(d,G):q==="children"?Dr(d,G):Ee(d,q,G,j)}switch(T){case"input":To(d,p);break;case"textarea":us(d,p);break;case"select":var W=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ee=p.value;ee!=null?rr(d,!!p.multiple,ee,!1):W!==!!p.multiple&&(p.defaultValue!=null?rr(d,!!p.multiple,p.defaultValue,!0):rr(d,!!p.multiple,p.multiple?[]:"",!1))}d[Zo]=p}catch(oe){rt(n,n.return,oe)}}break;case 6:if(On(r,n),Yn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(oe){rt(n,n.return,oe)}}break;case 3:if(On(r,n),Yn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(r.containerInfo)}catch(oe){rt(n,n.return,oe)}break;case 4:On(r,n),Yn(n);break;case 13:On(r,n),Yn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(gh=He())),c&4&&nm(n);break;case 22:if(q=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=(j=Lt)||q,On(r,n),Lt=j):On(r,n),Yn(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!q&&(n.mode&1)!==0)for(ne=n,q=n.child;q!==null;){for(G=ne=q;ne!==null;){switch(W=ne,ee=W.child,W.tag){case 0:case 11:case 14:case 15:ca(4,W,W.return);break;case 1:Ks(W,W.return);var se=W.stateNode;if(typeof se.componentWillUnmount=="function"){c=W,a=W.return;try{r=c,se.props=r.memoizedProps,se.state=r.memoizedState,se.componentWillUnmount()}catch(oe){rt(c,a,oe)}}break;case 5:Ks(W,W.return);break;case 22:if(W.memoizedState!==null){om(G);continue}}ee!==null?(ee.return=W,ne=ee):om(G)}q=q.sibling}e:for(q=null,G=n;;){if(G.tag===5){if(q===null){q=G;try{d=G.stateNode,j?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=G.stateNode,R=G.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Ro("display",_))}catch(oe){rt(n,n.return,oe)}}}else if(G.tag===6){if(q===null)try{G.stateNode.nodeValue=j?"":G.memoizedProps}catch(oe){rt(n,n.return,oe)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===n)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===n)break e;for(;G.sibling===null;){if(G.return===null||G.return===n)break e;q===G&&(q=null),G=G.return}q===G&&(q=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:On(r,n),Yn(n),c&4&&nm(n);break;case 21:break;default:On(r,n),Yn(n)}}function Yn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Zp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Dr(d,""),c.flags&=-33);var p=em(n);fh(n,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,T=em(n);dh(n,T,_);break;default:throw Error(t(161))}}catch(R){rt(n,n.return,R)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function l0(n,r,a){ne=n,im(n)}function im(n,r,a){for(var c=(n.mode&1)!==0;ne!==null;){var d=ne,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||Kl;if(!_){var T=d.alternate,R=T!==null&&T.memoizedState!==null||Lt;T=Kl;var j=Lt;if(Kl=_,(Lt=R)&&!j)for(ne=d;ne!==null;)_=ne,R=_.child,_.tag===22&&_.memoizedState!==null?am(d):R!==null?(R.return=_,ne=R):am(d);for(;p!==null;)ne=p,im(p),p=p.sibling;ne=d,Kl=T,Lt=j}sm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ne=p):sm(n)}}function sm(n){for(;ne!==null;){var r=ne;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Lt||Gl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Lt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Dn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&op(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}op(r,_,a)}break;case 5:var T=r.stateNode;if(a===null&&r.flags&4){a=T;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var q=j.memoizedState;if(q!==null){var G=q.dehydrated;G!==null&&Pn(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||r.flags&512&&hh(r)}catch(W){rt(r,r.return,W)}}if(r===n){ne=null;break}if(a=r.sibling,a!==null){a.return=r.return,ne=a;break}ne=r.return}}function om(n){for(;ne!==null;){var r=ne;if(r===n){ne=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ne=a;break}ne=r.return}}function am(n){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Gl(4,r)}catch(R){rt(r,a,R)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(R){rt(r,d,R)}}var p=r.return;try{hh(r)}catch(R){rt(r,p,R)}break;case 5:var _=r.return;try{hh(r)}catch(R){rt(r,_,R)}}}catch(R){rt(r,r.return,R)}if(r===n){ne=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ne=T;break}ne=r.return}}var u0=Math.ceil,Ql=me.ReactCurrentDispatcher,ph=me.ReactCurrentOwner,yn=me.ReactCurrentBatchConfig,Ve=0,wt=null,lt=null,Rt=0,an=0,Gs=Wr(0),mt=0,ha=null,ji=0,Yl=0,mh=0,da=null,Yt=null,gh=0,Qs=1/0,_r=null,Xl=!1,yh=null,Yr=null,Jl=!1,Xr=null,Zl=0,fa=0,_h=null,eu=-1,tu=0;function $t(){return(Ve&6)!==0?He():eu!==-1?eu:eu=He()}function Jr(n){return(n.mode&1)===0?1:(Ve&2)!==0&&Rt!==0?Rt&-Rt:Hv.transition!==null?(tu===0&&(tu=Pi()),tu):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:zo(n.type)),n)}function Ln(n,r,a,c){if(50<fa)throw fa=0,_h=null,Error(t(185));Mr(n,a,c),((Ve&2)===0||n!==wt)&&(n===wt&&((Ve&2)===0&&(Yl|=a),mt===4&&Zr(n,Rt)),Xt(n,c),a===1&&Ve===0&&(r.mode&1)===0&&(Qs=He()+500,kl&&Hr()))}function Xt(n,r){var a=n.callbackNode;or(n,r);var c=Ci(n,n===wt?Rt:0);if(c===0)a!==null&&Mo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Mo(a),r===1)n.tag===0?qv(um.bind(null,n)):Gf(um.bind(null,n)),zv(function(){(Ve&6)===0&&Hr()}),a=null;else{switch(Fr(c)){case 1:a=Ai;break;case 4:a=Vr;break;case 16:a=cn;break;case 536870912:a=tl;break;default:a=cn}a=ym(a,lm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function lm(n,r){if(eu=-1,tu=0,(Ve&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ys()&&n.callbackNode!==a)return null;var c=Ci(n,n===wt?Rt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=nu(n,c);else{r=c;var d=Ve;Ve|=2;var p=hm();(wt!==n||Rt!==r)&&(_r=null,Qs=He()+500,Bi(n,r));do try{d0();break}catch(T){cm(n,T)}while(!0);Mc(),Ql.current=p,Ve=d,lt!==null?r=0:(wt=null,Rt=0,r=mt)}if(r!==0){if(r===2&&(d=tn(n),d!==0&&(c=d,r=vh(n,d))),r===1)throw a=ha,Bi(n,0),Zr(n,c),Xt(n,He()),a;if(r===6)Zr(n,c);else{if(d=n.current.alternate,(c&30)===0&&!c0(d)&&(r=nu(n,c),r===2&&(p=tn(n),p!==0&&(c=p,r=vh(n,p))),r===1))throw a=ha,Bi(n,0),Zr(n,c),Xt(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:$i(n,Yt,_r);break;case 3:if(Zr(n,c),(c&130023424)===c&&(r=gh+500-He(),10<r)){if(Ci(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){$t(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ac($i.bind(null,n,Yt,_r),r);break}$i(n,Yt,_r);break;case 4:if(Zr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var _=31-jt(c);p=1<<_,_=r[_],_>d&&(d=_),c&=~p}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*u0(c/1960))-c,10<c){n.timeoutHandle=Ac($i.bind(null,n,Yt,_r),c);break}$i(n,Yt,_r);break;case 5:$i(n,Yt,_r);break;default:throw Error(t(329))}}}return Xt(n,He()),n.callbackNode===a?lm.bind(null,n):null}function vh(n,r){var a=da;return n.current.memoizedState.isDehydrated&&(Bi(n,r).flags|=256),n=nu(n,r),n!==2&&(r=Yt,Yt=a,r!==null&&wh(r)),n}function wh(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function c0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!xn(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zr(n,r){for(r&=~mh,r&=~Yl,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-jt(r),c=1<<a;n[a]=-1,r&=~c}}function um(n){if((Ve&6)!==0)throw Error(t(327));Ys();var r=Ci(n,0);if((r&1)===0)return Xt(n,He()),null;var a=nu(n,r);if(n.tag!==0&&a===2){var c=tn(n);c!==0&&(r=c,a=vh(n,c))}if(a===1)throw a=ha,Bi(n,0),Zr(n,r),Xt(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,$i(n,Yt,_r),Xt(n,He()),null}function Eh(n,r){var a=Ve;Ve|=1;try{return n(r)}finally{Ve=a,Ve===0&&(Qs=He()+500,kl&&Hr())}}function zi(n){Xr!==null&&Xr.tag===0&&(Ve&6)===0&&Ys();var r=Ve;Ve|=1;var a=yn.transition,c=Pe;try{if(yn.transition=null,Pe=1,n)return n()}finally{Pe=c,yn.transition=a,Ve=r,(Ve&6)===0&&Hr()}}function Th(){an=Gs.current,Qe(Gs)}function Bi(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,jv(a)),lt!==null)for(a=lt.return;a!==null;){var c=a;switch(Nc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Cl();break;case 3:qs(),Qe(Kt),Qe(Dt),Wc();break;case 5:Bc(c);break;case 4:qs();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:bc(c.type._context);break;case 22:case 23:Th()}a=a.return}if(wt=n,lt=n=ei(n.current,null),Rt=an=r,mt=0,ha=null,mh=Yl=ji=0,Yt=da=null,bi!==null){for(r=0;r<bi.length;r++)if(a=bi[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}a.pending=c}bi=null}return n}function cm(n,r){do{var a=lt;try{if(Mc(),Ul.current=$l,jl){for(var c=tt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}jl=!1}if(Ui=0,vt=pt=tt=null,sa=!1,oa=0,ph.current=null,a===null||a.return===null){mt=1,ha=r,lt=null;break}e:{var p=n,_=a.return,T=a,R=r;if(r=Rt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=R,q=T,G=q.tag;if((q.mode&1)===0&&(G===0||G===11||G===15)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var ee=Lp(_);if(ee!==null){ee.flags&=-257,Mp(ee,_,T,p,r),ee.mode&1&&Op(p,j,r),r=ee,R=j;var se=r.updateQueue;if(se===null){var oe=new Set;oe.add(R),r.updateQueue=oe}else se.add(R);break e}else{if((r&1)===0){Op(p,j,r),Ih();break e}R=Error(t(426))}}else if(Je&&T.mode&1){var st=Lp(_);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),Mp(st,_,T,p,r),Oc(Hs(R,T));break e}}p=R=Hs(R,T),mt!==4&&(mt=2),da===null?da=[p]:da.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var b=Dp(p,R,r);sp(p,b);break e;case 1:T=R;var k=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Yr===null||!Yr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var Y=Vp(p,T,r);sp(p,Y);break e}}p=p.return}while(p!==null)}fm(a)}catch(le){r=le,lt===a&&a!==null&&(lt=a=a.return);continue}break}while(!0)}function hm(){var n=Ql.current;return Ql.current=$l,n===null?$l:n}function Ih(){(mt===0||mt===3||mt===2)&&(mt=4),wt===null||(ji&268435455)===0&&(Yl&268435455)===0||Zr(wt,Rt)}function nu(n,r){var a=Ve;Ve|=2;var c=hm();(wt!==n||Rt!==r)&&(_r=null,Bi(n,r));do try{h0();break}catch(d){cm(n,d)}while(!0);if(Mc(),Ve=a,Ql.current=c,lt!==null)throw Error(t(261));return wt=null,Rt=0,mt}function h0(){for(;lt!==null;)dm(lt)}function d0(){for(;lt!==null&&!Za();)dm(lt)}function dm(n){var r=gm(n.alternate,n,an);n.memoizedProps=n.pendingProps,r===null?fm(n):lt=r,ph.current=null}function fm(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=i0(a,r,an),a!==null){lt=a;return}}else{if(a=s0(a,r),a!==null){a.flags&=32767,lt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,lt=null;return}}if(r=r.sibling,r!==null){lt=r;return}lt=r=n}while(r!==null);mt===0&&(mt=5)}function $i(n,r,a){var c=Pe,d=yn.transition;try{yn.transition=null,Pe=1,f0(n,r,a,c)}finally{yn.transition=d,Pe=c}return null}function f0(n,r,a,c){do Ys();while(Xr!==null);if((Ve&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if($e(n,p),n===wt&&(lt=wt=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Jl||(Jl=!0,ym(cn,function(){return Ys(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=yn.transition,yn.transition=null;var _=Pe;Pe=1;var T=Ve;Ve|=4,ph.current=null,a0(n,a),rm(a,n),Vv(Ic),jr=!!Tc,Ic=Tc=null,n.current=a,l0(a),oc(),Ve=T,Pe=_,yn.transition=p}else n.current=a;if(Jl&&(Jl=!1,Xr=n,Zl=d),p=n.pendingLanes,p===0&&(Yr=null),nl(a.stateNode),Xt(n,He()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Xl)throw Xl=!1,n=yh,yh=null,n;return(Zl&1)!==0&&n.tag!==0&&Ys(),p=n.pendingLanes,(p&1)!==0?n===_h?fa++:(fa=0,_h=n):fa=0,Hr(),null}function Ys(){if(Xr!==null){var n=Fr(Zl),r=yn.transition,a=Pe;try{if(yn.transition=null,Pe=16>n?16:n,Xr===null)var c=!1;else{if(n=Xr,Xr=null,Zl=0,(Ve&6)!==0)throw Error(t(331));var d=Ve;for(Ve|=4,ne=n.current;ne!==null;){var p=ne,_=p.child;if((ne.flags&16)!==0){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var j=T[R];for(ne=j;ne!==null;){var q=ne;switch(q.tag){case 0:case 11:case 15:ca(8,q,p)}var G=q.child;if(G!==null)G.return=q,ne=G;else for(;ne!==null;){q=ne;var W=q.sibling,ee=q.return;if(Jp(q),q===j){ne=null;break}if(W!==null){W.return=ee,ne=W;break}ne=ee}}}var se=p.alternate;if(se!==null){var oe=se.child;if(oe!==null){se.child=null;do{var st=oe.sibling;oe.sibling=null,oe=st}while(oe!==null)}}ne=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ne=_;else e:for(;ne!==null;){if(p=ne,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ca(9,p,p.return)}var b=p.sibling;if(b!==null){b.return=p.return,ne=b;break e}ne=p.return}}var k=n.current;for(ne=k;ne!==null;){_=ne;var F=_.child;if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,ne=F;else e:for(_=k;ne!==null;){if(T=ne,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Gl(9,T)}}catch(le){rt(T,T.return,le)}if(T===_){ne=null;break e}var Y=T.sibling;if(Y!==null){Y.return=T.return,ne=Y;break e}ne=T.return}}if(Ve=d,Hr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ri,n)}catch{}c=!0}return c}finally{Pe=a,yn.transition=r}}return!1}function pm(n,r,a){r=Hs(a,r),r=Dp(n,r,1),n=Gr(n,r,1),r=$t(),n!==null&&(Mr(n,1,r),Xt(n,r))}function rt(n,r,a){if(n.tag===3)pm(n,n,a);else for(;r!==null;){if(r.tag===3){pm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yr===null||!Yr.has(c))){n=Hs(a,n),n=Vp(r,n,1),r=Gr(r,n,1),n=$t(),r!==null&&(Mr(r,1,n),Xt(r,n));break}}r=r.return}}function p0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=$t(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Rt&a)===a&&(mt===4||mt===3&&(Rt&130023424)===Rt&&500>He()-gh?Bi(n,0):mh|=a),Xt(n,r)}function mm(n,r){r===0&&((n.mode&1)===0?r=1:(r=vs,vs<<=1,(vs&130023424)===0&&(vs=4194304)));var a=$t();n=mr(n,r),n!==null&&(Mr(n,r,a),Xt(n,a))}function m0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),mm(n,a)}function g0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),mm(n,a)}var gm;gm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Kt.current)Qt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Qt=!1,r0(n,r,a);Qt=(n.flags&131072)!==0}else Qt=!1,Je&&(r.flags&1048576)!==0&&Qf(r,Nl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Hl(n,r),n=r.pendingProps;var d=Fs(r,Dt.current);Ws(r,a),d=Kc(null,r,c,n,d,a);var p=Gc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(c)?(p=!0,Pl(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,jc(r),d.updater=Wl,r.stateNode=d,d._reactInternals=r,eh(r,c,n,a),r=ih(null,r,c,!0,p,a)):(r.tag=0,Je&&p&&xc(r),Bt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Hl(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=_0(c),n=Dn(c,n),d){case 0:r=rh(null,r,c,n,a);break e;case 1:r=Bp(null,r,c,n,a);break e;case 11:r=bp(null,r,c,n,a);break e;case 14:r=Fp(null,r,c,Dn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Dn(c,d),rh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Dn(c,d),Bp(n,r,c,d,a);case 3:e:{if($p(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,ip(n,r),bl(r,c,null,a);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=Hs(Error(t(423)),r),r=Wp(n,r,c,a,d);break e}else if(c!==d){d=Hs(Error(t(424)),r),r=Wp(n,r,c,a,d);break e}else for(on=$r(r.stateNode.containerInfo.firstChild),sn=r,Je=!0,Nn=null,a=np(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zs(),c===d){r=yr(n,r,a);break e}Bt(n,r,c,a)}r=r.child}return r;case 5:return ap(r),n===null&&Vc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,_=d.children,Sc(c,d)?_=null:p!==null&&Sc(c,p)&&(r.flags|=32),zp(n,r),Bt(n,r,_,a),r.child;case 6:return n===null&&Vc(r),null;case 13:return qp(n,r,a);case 4:return zc(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Bs(r,null,c,a):Bt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Dn(c,d),bp(n,r,c,d,a);case 7:return Bt(n,r,r.pendingProps,a),r.child;case 8:return Bt(n,r,r.pendingProps.children,a),r.child;case 12:return Bt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,_=d.value,Ke(Ol,c._currentValue),c._currentValue=_,p!==null)if(xn(p.value,_)){if(p.children===d.children&&!Kt.current){r=yr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var R=T.firstContext;R!==null;){if(R.context===c){if(p.tag===1){R=gr(-1,a&-a),R.tag=2;var j=p.updateQueue;if(j!==null){j=j.shared;var q=j.pending;q===null?R.next=R:(R.next=q.next,q.next=R),j.pending=R}}p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),Fc(p.return,a,r),T.lanes|=a;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(t(341));_.lanes|=a,T=_.alternate,T!==null&&(T.lanes|=a),Fc(_,a,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Bt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Ws(r,a),d=mn(d),c=c(d),r.flags|=1,Bt(n,r,c,a),r.child;case 14:return c=r.type,d=Dn(c,r.pendingProps),d=Dn(c.type,d),Fp(n,r,c,d,a);case 15:return Up(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Dn(c,d),Hl(n,r),r.tag=1,Gt(c)?(n=!0,Pl(r)):n=!1,Ws(r,a),xp(r,c,d),eh(r,c,d,a),ih(null,r,c,!0,n,a);case 19:return Kp(n,r,a);case 22:return jp(n,r,a)}throw Error(t(156,r.tag))};function ym(n,r){return ys(n,r)}function y0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,r,a,c){return new y0(n,r,a,c)}function Sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _0(n){if(typeof n=="function")return Sh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===Ue)return 14}return 2}function ei(n,r){var a=n.alternate;return a===null?(a=_n(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ru(n,r,a,c,d,p){var _=2;if(c=n,typeof n=="function")Sh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case x:return Wi(a.children,d,p,r);case I:_=8,d|=8;break;case A:return n=_n(12,a,r,d|2),n.elementType=A,n.lanes=p,n;case S:return n=_n(13,a,r,d),n.elementType=S,n.lanes=p,n;case Me:return n=_n(19,a,r,d),n.elementType=Me,n.lanes=p,n;case je:return iu(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:_=10;break e;case N:_=9;break e;case L:_=11;break e;case Ue:_=14;break e;case Ze:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=_n(_,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function Wi(n,r,a,c){return n=_n(7,n,c,r),n.lanes=a,n}function iu(n,r,a,c){return n=_n(22,n,c,r),n.elementType=je,n.lanes=a,n.stateNode={isHidden:!1},n}function Ah(n,r,a){return n=_n(6,n,null,r),n.lanes=a,n}function Rh(n,r,a){return r=_n(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function v0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lr(0),this.expirationTimes=Lr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ch(n,r,a,c,d,p,_,T,R){return n=new v0(n,r,a,T,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=_n(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jc(p),n}function w0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ie,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function _m(n){if(!n)return qr;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return Hf(n,a,r)}return r}function vm(n,r,a,c,d,p,_,T,R){return n=Ch(a,c,!0,n,d,p,_,T,R),n.context=_m(null),a=n.current,c=$t(),d=Jr(a),p=gr(c,d),p.callback=r??null,Gr(a,p,d),n.current.lanes=d,Mr(n,d,c),Xt(n,c),n}function su(n,r,a,c){var d=r.current,p=$t(),_=Jr(d);return a=_m(a),r.context===null?r.context=a:r.pendingContext=a,r=gr(p,_),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Gr(d,r,_),n!==null&&(Ln(n,d,_,p),Ml(n,d,_)),_}function ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Ph(n,r){wm(n,r),(n=n.alternate)&&wm(n,r)}function E0(){return null}var Em=typeof reportError=="function"?reportError:function(n){console.error(n)};function kh(n){this._internalRoot=n}au.prototype.render=kh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));su(n,r,null,null)},au.prototype.unmount=kh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;zi(function(){su(null,n,null,null)}),r[hr]=null}};function au(n){this._internalRoot=n}au.prototype.unstable_scheduleHydration=function(n){if(n){var r=al();n={blockedOn:null,target:n,priority:r};for(var a=0;a<$n.length&&r!==0&&r<$n[a].priority;a++);$n.splice(a,0,n),a===0&&cl(n)}};function xh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function T0(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var j=ou(_);p.call(j)}}var _=vm(r,c,n,0,null,!1,!1,"",Tm);return n._reactRootContainer=_,n[hr]=_.current,Xo(n.nodeType===8?n.parentNode:n),zi(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var T=c;c=function(){var j=ou(R);T.call(j)}}var R=Ch(n,0,!1,null,null,!1,!1,"",Tm);return n._reactRootContainer=R,n[hr]=R.current,Xo(n.nodeType===8?n.parentNode:n),zi(function(){su(r,R,a,c)}),R}function uu(n,r,a,c,d){var p=a._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var T=d;d=function(){var R=ou(_);T.call(R)}}su(r,_,n,d)}else _=T0(a,r,n,d,c);return ou(_)}sl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Or(r.pendingLanes);a!==0&&(br(r,a|1),Xt(r,He()),(Ve&6)===0&&(Qs=He()+500,Hr()))}break;case 13:zi(function(){var c=mr(n,1);if(c!==null){var d=$t();Ln(c,n,1,d)}}),Ph(n,1)}},ws=function(n){if(n.tag===13){var r=mr(n,134217728);if(r!==null){var a=$t();Ln(r,n,134217728,a)}Ph(n,134217728)}},ol=function(n){if(n.tag===13){var r=Jr(n),a=mr(n,r);if(a!==null){var c=$t();Ln(a,n,r,c)}Ph(n,r)}},al=function(){return Pe},ll=function(n,r){var a=Pe;try{return Pe=n,r()}finally{Pe=a}},hs=function(n,r,a){switch(r){case"input":if(To(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Rl(c);if(!d)throw Error(t(90));ss(c),To(c,d)}}}break;case"textarea":us(n,a);break;case"select":r=a.value,r!=null&&rr(n,!!a.multiple,r,!1)}},Ei=Eh,Do=zi;var I0={usingClientEntryPoint:!1,Events:[ea,Ms,Rl,zn,No,Eh]},pa={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S0={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Lo(n),n===null?null:n.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||E0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{Ri=cu.inject(S0),en=cu}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0,Jt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(r))throw Error(t(200));return w0(n,r,null,a)},Jt.createRoot=function(n,r){if(!xh(n))throw Error(t(299));var a=!1,c="",d=Em;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Ch(n,1,!1,null,null,a,!1,c,d),n[hr]=r.current,Xo(n.nodeType===8?n.parentNode:n),new kh(r)},Jt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Lo(r),n=n===null?null:n.stateNode,n},Jt.flushSync=function(n){return zi(n)},Jt.hydrate=function(n,r,a){if(!lu(r))throw Error(t(200));return uu(null,n,r,!0,a)},Jt.hydrateRoot=function(n,r,a){if(!xh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",_=Em;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),r=vm(r,null,n,1,a??null,d,!1,p,_),n[hr]=r.current,Xo(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new au(r)},Jt.render=function(n,r,a){if(!lu(r))throw Error(t(200));return uu(null,n,r,!1,a)},Jt.unmountComponentAtNode=function(n){if(!lu(n))throw Error(t(40));return n._reactRootContainer?(zi(function(){uu(null,null,n,!1,function(){n._reactRootContainer=null,n[hr]=null})}),!0):!1},Jt.unstable_batchedUpdates=Eh,Jt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!lu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return uu(n,r,a,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var xm;function V0(){if(xm)return Vh.exports;xm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Vh.exports=D0(),Vh.exports}var Nm;function O0(){if(Nm)return hu;Nm=1;var i=V0();return hu.createRoot=i.createRoot,hu.hydrateRoot=i.hydrateRoot,hu}var L0=O0();const M0=Zg(L0);var eo=(i=>(i.Friends="My Circle",i.Community="Discover",i.Profile="Profile",i))(eo||{}),ln=(i=>(i.Free="free",i.Busy="busy",i.Social="social",i))(ln||{}),Dm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},b0=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],m=i[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,g=o+2<i.length,v=g?i[o+2]:0,E=u>>2,C=(u&3)<<4|m>>4;let V=(m&15)<<2|v>>6,U=v&63;g||(U=64,h||(V=64)),s.push(t[E],t[C],t[V],t[U])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ey(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):b0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const C=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||v==null||C==null)throw new F0;const V=u<<2|m>>4;if(s.push(V),v!==64){const U=m<<4&240|v>>2;if(s.push(U),C!==64){const Q=v<<6&192|C;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class F0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U0=function(i){const e=ey(i);return ty.encodeByteArray(e,!0)},Ru=function(i){return U0(i).replace(/\./g,"")},ny=function(i){try{return ty.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=()=>j0().__FIREBASE_DEFAULTS__,B0=()=>{if(typeof process>"u"||typeof Dm>"u")return;const i=Dm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ny(i[1]);return e&&JSON.parse(e)},$u=()=>{try{return z0()||B0()||$0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ry=i=>{var e,t;return(t=(e=$u())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},W0=i=>{const e=ry(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},iy=()=>{var i;return(i=$u())===null||i===void 0?void 0:i.config},sy=i=>{var e;return(e=$u())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ru(JSON.stringify(t)),Ru(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function G0(){var i;const e=(i=$u())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y0(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function X0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J0(){const i=Ut();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Z0(){return!G0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ew(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="FirebaseError";class xr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nw,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?rw(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new xr(o,m,s)}}function rw(i,e){return i.replace(iw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const iw=/\{\$([^}]+)}/g;function sw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Cu(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(Vm(u)&&Vm(h)){if(!Cu(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Vm(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ya(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function _a(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function ow(i,e){const t=new aw(i,e);return t.subscribe.bind(t)}class aw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");lw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Mh),o.error===void 0&&(o.error=Mh),o.complete===void 0&&(o.complete=Mh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lw(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(i){return i&&i._delegate?i._delegate:i}class Qi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new q0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hw(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cw(i){return i===qi?void 0:i}function hw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const fw={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},pw=ke.INFO,mw={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},gw=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=mw[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Id{constructor(e){this.name=e,this._logLevel=pw,this._logHandler=gw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const yw=(i,e)=>e.some(t=>i instanceof t);let Om,Lm;function _w(){return Om||(Om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vw(){return Lm||(Lm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oy=new WeakMap,Xh=new WeakMap,ay=new WeakMap,bh=new WeakMap,Sd=new WeakMap;function ww(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(ai(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&oy.set(t,i)}).catch(()=>{}),Sd.set(e,i),e}function Ew(i){if(Xh.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Xh.set(i,e)}let Jh={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Xh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ay.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ai(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Tw(i){Jh=i(Jh)}function Iw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Fh(this),e,...t);return ay.set(s,e.sort?e.sort():[e]),ai(s)}:vw().includes(i)?function(...e){return i.apply(Fh(this),e),ai(oy.get(this))}:function(...e){return ai(i.apply(Fh(this),e))}}function Sw(i){return typeof i=="function"?Iw(i):(i instanceof IDBTransaction&&Ew(i),yw(i,_w())?new Proxy(i,Jh):i)}function ai(i){if(i instanceof IDBRequest)return ww(i);if(bh.has(i))return bh.get(i);const e=Sw(i);return e!==i&&(bh.set(i,e),Sd.set(e,i)),e}const Fh=i=>Sd.get(i);function Aw(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=ai(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ai(h.result),g.oldVersion,g.newVersion,ai(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Rw=["get","getKey","getAll","getAllKeys","count"],Cw=["put","add","delete","clear"],Uh=new Map;function Mm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Uh.get(e))return Uh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Cw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Rw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return Uh.set(e,u),u}Tw(i=>({...i,get:(e,t,s)=>Mm(e,t)||i.get(e,t,s),has:(e,t)=>!!Mm(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kw(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zh="@firebase/app",bm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Id("@firebase/app"),xw="@firebase/app-compat",Nw="@firebase/analytics-compat",Dw="@firebase/analytics",Vw="@firebase/app-check-compat",Ow="@firebase/app-check",Lw="@firebase/auth",Mw="@firebase/auth-compat",bw="@firebase/database",Fw="@firebase/data-connect",Uw="@firebase/database-compat",jw="@firebase/functions",zw="@firebase/functions-compat",Bw="@firebase/installations",$w="@firebase/installations-compat",Ww="@firebase/messaging",qw="@firebase/messaging-compat",Hw="@firebase/performance",Kw="@firebase/performance-compat",Gw="@firebase/remote-config",Qw="@firebase/remote-config-compat",Yw="@firebase/storage",Xw="@firebase/storage-compat",Jw="@firebase/firestore",Zw="@firebase/vertexai-preview",eE="@firebase/firestore-compat",tE="firebase",nE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",rE={[Zh]:"fire-core",[xw]:"fire-core-compat",[Dw]:"fire-analytics",[Nw]:"fire-analytics-compat",[Ow]:"fire-app-check",[Vw]:"fire-app-check-compat",[Lw]:"fire-auth",[Mw]:"fire-auth-compat",[bw]:"fire-rtdb",[Fw]:"fire-data-connect",[Uw]:"fire-rtdb-compat",[jw]:"fire-fn",[zw]:"fire-fn-compat",[Bw]:"fire-iid",[$w]:"fire-iid-compat",[Ww]:"fire-fcm",[qw]:"fire-fcm-compat",[Hw]:"fire-perf",[Kw]:"fire-perf-compat",[Gw]:"fire-rc",[Qw]:"fire-rc-compat",[Yw]:"fire-gcs",[Xw]:"fire-gcs-compat",[Jw]:"fire-fst",[eE]:"fire-fst-compat",[Zw]:"fire-vertex","fire-js":"fire-js",[tE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Map,iE=new Map,td=new Map;function Fm(i,e){try{i.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function so(i){const e=i.name;if(td.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,i);for(const t of Pu.values())Fm(t,i);for(const t of iE.values())Fm(t,i);return!0}function Ad(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Mn(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new ba("app","Firebase",sE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=nE;function ly(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ed,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw li.create("bad-app-name",{appName:String(o)});if(t||(t=iy()),!t)throw li.create("no-options");const u=Pu.get(o);if(u){if(Cu(t,u.options)&&Cu(s,u.config))return u;throw li.create("duplicate-app",{appName:o})}const h=new dw(o);for(const g of td.values())h.addComponent(g);const m=new oE(t,s,h);return Pu.set(o,m),m}function uy(i=ed){const e=Pu.get(i);if(!e&&i===ed&&iy())return ly();if(!e)throw li.create("no-app",{appName:i});return e}function ui(i,e,t){var s;let o=(s=rE[i])!==null&&s!==void 0?s:i;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(m.join(" "));return}so(new Qi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firebase-heartbeat-database",lE=1,Pa="firebase-heartbeat-store";let jh=null;function cy(){return jh||(jh=Aw(aE,lE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Pa)}catch(t){console.warn(t)}}}}).catch(i=>{throw li.create("idb-open",{originalErrorMessage:i.message})})),jh}async function uE(i){try{const t=(await cy()).transaction(Pa),s=await t.objectStore(Pa).get(hy(i));return await t.done,s}catch(e){if(e instanceof xr)Rr.warn(e.message);else{const t=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(t.message)}}}async function Um(i,e){try{const s=(await cy()).transaction(Pa,"readwrite");await s.objectStore(Pa).put(e,hy(i)),await s.done}catch(t){if(t instanceof xr)Rr.warn(t.message);else{const s=li.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(s.message)}}}function hy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=1024,hE=720*60*60*1e3;class dE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pE(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=jm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=hE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Rr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jm(),{heartbeatsToSend:s,unsentEntries:o}=fE(this._heartbeatsCache.heartbeats),u=Ru(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Rr.warn(t),""}}}function jm(){return new Date().toISOString().substring(0,10)}function fE(i,e=cE){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),zm(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zm(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class pE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ew()?tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Um(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Um(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zm(i){return Ru(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(i){so(new Qi("platform-logger",e=>new Pw(e),"PRIVATE")),so(new Qi("heartbeat",e=>new dE(e),"PRIVATE")),ui(Zh,bm,i),ui(Zh,bm,"esm2017"),ui("fire-js","")}mE("");var gE="firebase",yE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(gE,yE,"app");function Rd(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _E=dy,fy=new ba("auth","Firebase",dy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Id("@firebase/auth");function vE(i,...e){ku.logLevel<=ke.WARN&&ku.warn(`Auth (${po}): ${i}`,...e)}function yu(i,...e){ku.logLevel<=ke.ERROR&&ku.error(`Auth (${po}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(i,...e){throw Pd(i,...e)}function Fn(i,...e){return Pd(i,...e)}function Cd(i,e,t){const s=Object.assign(Object.assign({},_E()),{[e]:t});return new ba("auth","Firebase",s).create(e,{appName:i.name})}function Ir(i){return Cd(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wE(i,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&wn(i,"argument-error"),Cd(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pd(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return fy.create(i,...e)}function fe(i,e,...t){if(!i)throw Pd(e,...t)}function wr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw yu(e),new Error(e)}function Cr(i,e){i||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function EE(){return Bm()==="http:"||Bm()==="https:"}function Bm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EE()||Y0()||"connection"in navigator)?navigator.onLine:!0}function IE(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cr(t>e,"Short delay should be less than long delay!"),this.isMobile=K0()||X0()}get(){return TE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(i,e){Cr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new Ua(3e4,6e4);function pi(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function mi(i,e,t,s,o={}){return my(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Fa(Object.assign({key:i.config.apiKey},h)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:g},u);return Q0()||(v.referrerPolicy="no-referrer"),py.fetch()(gy(i,i.config.apiHost,t,m),v)})}async function my(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},SE),e);try{const o=new CE(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw du(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw du(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw du(i,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Cd(i,E,v);wn(i,E)}}catch(o){if(o instanceof xr)throw o;wn(i,"network-request-failed",{message:String(o)})}}async function ja(i,e,t,s,o={}){const u=await mi(i,e,t,s,o);return"mfaPendingCredential"in u&&wn(i,"multi-factor-auth-required",{_serverResponse:u}),u}function gy(i,e,t,s){const o=`${e}${t}?${s}`;return i.config.emulator?kd(i.config,o):`${i.config.apiScheme}://${o}`}function RE(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),AE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(i,e,s);return o.customData._tokenResponse=t,o}function $m(i){return i!==void 0&&i.enterprise!==void 0}class PE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kE(i,e){return mi(i,"GET","/v2/recaptchaConfig",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(i,e){return mi(i,"POST","/v1/accounts:delete",e)}async function yy(i,e){return mi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NE(i,e=!1){const t=Wt(i),s=await t.getIdToken(e),o=xd(s);fe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Ia(zh(o.auth_time)),issuedAtTime:Ia(zh(o.iat)),expirationTime:Ia(zh(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function zh(i){return Number(i)*1e3}function xd(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=ny(t);return o?JSON.parse(o):(yu("Failed to decode base64 JWT payload"),null)}catch(o){return yu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Wm(i){const e=xd(i);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xr&&DE(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function DE({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(i){var e;const t=i.auth,s=await i.getIdToken(),o=await ka(i,yy(t,{idToken:s}));fe(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?_y(u.providerUserInfo):[],m=LE(i.providerData,h),g=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=g?v:!1,C={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new rd(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,C)}async function OE(i){const e=Wt(i);await xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LE(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _y(i){return i.map(e=>{var{providerId:t}=e,s=Rd(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(i,e){const t=await my(i,{},async()=>{const s=Fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=gy(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",py.fetch()(h,{method:"POST",headers:m,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bE(i,e){return mi(i,"POST","/v2/accounts:revokeToken",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=Wm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await ME(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new to;return s&&(fe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(fe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(i,e){fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=Rd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new rd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await ka(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return NE(this,e)}reload(){return OE(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await xu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await ka(this,xE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,m,g,v,E;const C=(s=t.displayName)!==null&&s!==void 0?s:void 0,V=(o=t.email)!==null&&o!==void 0?o:void 0,U=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,Q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,X=(m=t.tenantId)!==null&&m!==void 0?m:void 0,H=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,ye=(v=t.createdAt)!==null&&v!==void 0?v:void 0,_e=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:Ee,emailVerified:me,isAnonymous:We,providerData:Ie,stsTokenManager:x}=t;fe(Ee&&x,e,"internal-error");const I=to.fromJSON(this.name,x);fe(typeof Ee=="string",e,"internal-error"),ni(C,e.name),ni(V,e.name),fe(typeof me=="boolean",e,"internal-error"),fe(typeof We=="boolean",e,"internal-error"),ni(U,e.name),ni(Q,e.name),ni(X,e.name),ni(H,e.name),ni(ye,e.name),ni(_e,e.name);const A=new Er({uid:Ee,auth:e,email:V,emailVerified:me,displayName:C,isAnonymous:We,photoURL:Q,phoneNumber:U,tenantId:X,stsTokenManager:I,createdAt:ye,lastLoginAt:_e});return Ie&&Array.isArray(Ie)&&(A.providerData=Ie.map(P=>Object.assign({},P))),H&&(A._redirectEventId=H),A}static async _fromIdTokenResponse(e,t,s=!1){const o=new to;o.updateFromServerResponse(t);const u=new Er({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await xu(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?_y(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new to;m.updateFromIdToken(s);const g=new Er({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new Map;function Tr(i){Cr(i instanceof Function,"Expected a class definition");let e=qm.get(i);return e?(Cr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,qm.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vy.type="NONE";const Hm=vy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(i,e,t){return`firebase:${i}:${e}:${t}`}class no{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=_u(this.userKey,o.apiKey,u),this.fullPersistenceKey=_u("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new no(Tr(Hm),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||Tr(Hm);const h=_u(s,e.config.apiKey,e.name);let m=null;for(const v of t)try{const E=await v._get(h);if(E){const C=Er._fromJSON(e,E);v!==u&&(m=C),u=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new no(u,e,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(h)}catch{}})),new no(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ay(e))return"Blackberry";if(Ry(e))return"Webos";if(Ey(e))return"Safari";if((e.includes("chrome/")||Ty(e))&&!e.includes("edge/"))return"Chrome";if(Sy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function wy(i=Ut()){return/firefox\//i.test(i)}function Ey(i=Ut()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ty(i=Ut()){return/crios\//i.test(i)}function Iy(i=Ut()){return/iemobile/i.test(i)}function Sy(i=Ut()){return/android/i.test(i)}function Ay(i=Ut()){return/blackberry/i.test(i)}function Ry(i=Ut()){return/webos/i.test(i)}function Nd(i=Ut()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FE(i=Ut()){var e;return Nd(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UE(){return J0()&&document.documentMode===10}function Cy(i=Ut()){return Nd(i)||Sy(i)||Ry(i)||Ay(i)||/windows phone/i.test(i)||Iy(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(i,e=[]){let t;switch(i){case"Browser":t=Km(Ut());break;case"Worker":t=`${Km(Ut())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(i,e={}){return mi(i,"GET","/v2/passwordPolicy",pi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=6;class $E{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:BE,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gm(this),this.idTokenSubscription=new Gm(this),this.beforeStateQueue=new jE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await no.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yy(this,{idToken:e}),s=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Ir(this));const t=e?Wt(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zE(this),t=new $E(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bE(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tr(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[Tr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Py(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vE(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function gi(i){return Wt(i)}class Gm{constructor(e){this.auth=e,this.observer=null,this.addObserver=ow(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qE(i){Wu=i}function ky(i){return Wu.loadJS(i)}function HE(){return Wu.recaptchaEnterpriseScript}function KE(){return Wu.gapiScript}function GE(i){return`__${i}${Math.floor(Math.random()*1e6)}`}const QE="recaptcha-enterprise",YE="NO_RECAPTCHA";class XE{constructor(e){this.type=QE,this.auth=gi(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{kE(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new PE(g);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,h(v.siteKey)}}).catch(g=>{m(g)})})}function o(u,h,m){const g=window.grecaptcha;$m(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(v=>{h(v)}).catch(()=>{h(YE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,h)=>{s(this.auth).then(m=>{if(!t&&$m(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=HE();g.length!==0&&(g+=m),ky(g).then(()=>{o(m,u,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function Qm(i,e,t,s=!1){const o=new XE(i);let u;try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function id(i,e,t,s){var o;if(!((o=i._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Qm(i,e,t,t==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Qm(i,e,t,t==="getOobCode");return s(i,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(i,e){const t=Ad(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Cu(u,e??{}))return o;wn(o,"already-initialized")}return t.initialize({options:e})}function ZE(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Tr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function eT(i,e,t){const s=gi(i);fe(s._canInitEmulator,s,"emulator-config-failed"),fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=xy(e),{host:h,port:m}=tT(e),g=m===null?"":`:${m}`;s.config.emulator={url:`${u}//${h}${g}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),nT()}function xy(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function tT(i){const e=xy(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Ym(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:Ym(h)}}}function Ym(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function nT(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,t){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}async function rT(i,e){return mi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(i,e){return ja(i,"POST","/v1/accounts:signInWithPassword",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(i,e){return ja(i,"POST","/v1/accounts:signInWithEmailLink",pi(i,e))}async function oT(i,e){return ja(i,"POST","/v1/accounts:signInWithEmailLink",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Dd{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new xa(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new xa(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return id(e,t,"signInWithPassword",iT);case"emailLink":return sT(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return id(e,s,"signUpPassword",rT);case"emailLink":return oT(e,{idToken:t,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(i,e){return ja(i,"POST","/v1/accounts:signInWithIdp",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="http://localhost";class Yi extends Dd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=Rd(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new Yi(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ro(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ro(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ro(e,t)}buildRequest(){const e={requestUri:aT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fa(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uT(i){const e=ya(_a(i)).link,t=e?ya(_a(e)).deep_link_id:null,s=ya(_a(i)).deep_link_id;return(s?ya(_a(s)).link:null)||s||t||e||i}class Vd{constructor(e){var t,s,o,u,h,m;const g=ya(_a(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(s=g.oobCode)!==null&&s!==void 0?s:null,C=lT((o=g.mode)!==null&&o!==void 0?o:null);fe(v&&E&&C,"argument-error"),this.apiKey=v,this.operation=C,this.code=E,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=g.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=uT(e);try{return new Vd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,t){return xa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Vd.parseLink(t);return fe(s,"argument-error"),xa._fromEmailAndCode(e,s.code,s.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Od{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends za{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yi._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return vr.credential(t,s)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends za{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.GITHUB_SIGN_IN_METHOD="github.com";ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends za{constructor(){super("twitter.com")}static credential(e,t){return Yi._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return si.credential(t,s)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(i,e){return ja(i,"POST","/v1/accounts:signUp",pi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await Er._fromIdTokenResponse(e,s,o),h=Xm(s);return new Xi({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Xm(s);return new Xi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Xm(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends xr{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Nu(e,t,s,o)}}function Ny(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(i,u,e,s):u})}async function hT(i,e,t=!1){const s=await ka(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Xi._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(i,e,t=!1){const{auth:s}=i;if(Mn(s.app))return Promise.reject(Ir(s));const o="reauthenticate";try{const u=await ka(i,Ny(s,o,e,i),t);fe(u.idToken,s,"internal-error");const h=xd(u.idToken);fe(h,s,"internal-error");const{sub:m}=h;return fe(i.uid===m,s,"user-mismatch"),Xi._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&wn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(i,e,t=!1){if(Mn(i.app))return Promise.reject(Ir(i));const s="signIn",o=await Ny(i,s,e),u=await Xi._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}async function fT(i,e){return Dy(gi(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(i){const e=gi(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pT(i,e,t){if(Mn(i.app))return Promise.reject(Ir(i));const s=gi(i),h=await id(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Vy(i),g}),m=await Xi._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function mT(i,e,t){return Mn(i.app)?Promise.reject(Ir(i)):fT(Wt(i),mo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Vy(i),s})}function gT(i,e,t,s){return Wt(i).onIdTokenChanged(e,t,s)}function yT(i,e,t){return Wt(i).beforeAuthStateChanged(e,t)}function _T(i,e,t,s){return Wt(i).onAuthStateChanged(e,t,s)}function vT(i){return Wt(i).signOut()}const Du="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Du,"1"),this.storage.removeItem(Du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=1e3,ET=10;class Ly extends Oy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);UE()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ET):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},wT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ly.type="LOCAL";const TT=Ly;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends Oy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}My.type="SESSION";const by=My;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new qu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,u)),g=await IT(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const v=Ld("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(C){const V=C;if(V.data.eventId===v)switch(V.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(V.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function AT(i){Xn().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function RT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CT(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PT(){return Fy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="firebaseLocalStorageDb",kT=1,Vu="firebaseLocalStorage",jy="fbase_key";class Ba{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hu(i,e){return i.transaction([Vu],e?"readwrite":"readonly").objectStore(Vu)}function xT(){const i=indexedDB.deleteDatabase(Uy);return new Ba(i).toPromise()}function sd(){const i=indexedDB.open(Uy,kT);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Vu,{keyPath:jy})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Vu)?e(s):(s.close(),await xT(),e(await sd()))})})}async function Jm(i,e,t){const s=Hu(i,!0).put({[jy]:e,value:t});return new Ba(s).toPromise()}async function NT(i,e){const t=Hu(i,!1).get(e),s=await new Ba(t).toPromise();return s===void 0?null:s.value}function Zm(i,e){const t=Hu(i,!0).delete(e);return new Ba(t).toPromise()}const DT=800,VT=3;class zy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>VT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(PT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RT(),!this.activeServiceWorker)return;this.sender=new ST(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sd();return await Jm(e,Du,"1"),await Zm(e,Du),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Jm(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>NT(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Hu(o,!1).getAll();return new Ba(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zy.type="LOCAL";const OT=zy;new Ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(i,e){return e?Tr(e):(fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Dd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LT(i){return Dy(i.auth,new Md(i),i.bypassAuthState)}function MT(i){const{auth:e,user:t}=i;return fe(t,e,"internal-error"),dT(t,new Md(i),i.bypassAuthState)}async function bT(i){const{auth:e,user:t}=i;return fe(t,e,"internal-error"),hT(t,new Md(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LT;case"linkViaPopup":case"linkViaRedirect":return bT;case"reauthViaPopup":case"reauthViaRedirect":return MT;default:wn(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new Ua(2e3,1e4);async function UT(i,e,t){if(Mn(i.app))return Promise.reject(Fn(i,"operation-not-supported-in-this-environment"));const s=gi(i);wE(i,e,Od);const o=By(s,t);return new Hi(s,"signInViaPopup",e,o).executeNotNull()}class Hi extends $y{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Ld();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FT.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="pendingRedirect",vu=new Map;class zT extends $y{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=vu.get(this.auth._key());if(!e){try{const s=await BT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}vu.set(this.auth._key(),e)}return this.bypassAuthState||vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BT(i,e){const t=qT(e),s=WT(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function $T(i,e){vu.set(i._key(),e)}function WT(i){return Tr(i._redirectPersistence)}function qT(i){return _u(jT,i.config.apiKey,i.name)}async function HT(i,e,t=!1){if(Mn(i.app))return Promise.reject(Ir(i));const s=gi(i),o=By(s,e),h=await new zT(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=600*1e3;class GT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Wy(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KT&&this.cachedEventUids.clear(),this.cachedEventUids.has(eg(e))}saveEventToCache(e){this.cachedEventUids.add(eg(e)),this.lastProcessedEventTime=Date.now()}}function eg(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Wy({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QT(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wy(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(i,e={}){return mi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JT=/^https?/;async function ZT(i){if(i.config.emulator)return;const{authorizedDomains:e}=await YT(i);for(const t of e)try{if(eI(t))return}catch{}wn(i,"unauthorized-domain")}function eI(i){const e=nd(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!JT.test(t))return!1;if(XT.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Ua(3e4,6e4);function tg(){const i=Xn().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function nI(i){return new Promise((e,t)=>{var s,o,u;function h(){tg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tg(),t(Fn(i,"network-request-failed"))},timeout:tI.get()})}if(!((o=(s=Xn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Xn().gapi)===null||u===void 0)&&u.load)h();else{const m=GE("iframefcb");return Xn()[m]=()=>{gapi.load?h():t(Fn(i,"network-request-failed"))},ky(`${KE()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw wu=null,e})}let wu=null;function rI(i){return wu=wu||nI(i),wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Ua(5e3,15e3),sI="__/auth/iframe",oI="emulator/auth/iframe",aI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uI(i){const e=i.config;fe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?kd(e,oI):`https://${i.config.authDomain}/${sI}`,s={apiKey:e.apiKey,appName:i.name,v:po},o=lI.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Fa(s).slice(1)}`}async function cI(i){const e=await rI(i),t=Xn().gapi;return fe(t,i,"internal-error"),e.open({where:document.body,url:uI(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(i,"network-request-failed"),m=Xn().setTimeout(()=>{u(h)},iI.get());function g(){Xn().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dI=500,fI=600,pI="_blank",mI="http://localhost";class ng{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gI(i,e,t,s=dI,o=fI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},hI),{width:s.toString(),height:o.toString(),top:u,left:h}),v=Ut().toLowerCase();t&&(m=Ty(v)?pI:t),wy(v)&&(e=e||mI,g.scrollbars="yes");const E=Object.entries(g).reduce((V,[U,Q])=>`${V}${U}=${Q},`,"");if(FE(v)&&m!=="_self")return yI(e||"",m),new ng(null);const C=window.open(e||"",m,E);fe(C,i,"popup-blocked");try{C.focus()}catch{}return new ng(C)}function yI(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="__/auth/handler",vI="emulator/auth/handler",wI=encodeURIComponent("fac");async function rg(i,e,t,s,o,u){fe(i.config.authDomain,i,"auth-domain-config-required"),fe(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:po,eventId:o};if(e instanceof Od){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",sw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,C]of Object.entries({}))h[E]=C}if(e instanceof za){const E=e.getScopes().filter(C=>C!=="");E.length>0&&(h.scopes=E.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await i._getAppCheckToken(),v=g?`#${wI}=${encodeURIComponent(g)}`:"";return`${EI(i)}?${Fa(m).slice(1)}${v}`}function EI({config:i}){return i.emulator?kd(i,vI):`https://${i.authDomain}/${_I}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class TI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=by,this._completeRedirectFn=HT,this._overrideRedirectResult=$T}async _openPopup(e,t,s,o){var u;Cr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await rg(e,t,s,nd(),o);return gI(e,h,Ld())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await rg(e,t,s,nd(),o);return AT(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Cr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await cI(e),s=new GT(e);return t.register("authEvent",o=>(fe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bh,{type:Bh},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Bh];h!==void 0&&t(!!h),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cy()||Ey()||Nd()}}const II=TI;var ig="@firebase/auth",sg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RI(i){so(new Qi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;fe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Py(i)},v=new WE(s,o,u,g);return ZE(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),so(new Qi("auth-internal",e=>{const t=gi(e.getProvider("auth").getImmediate());return(s=>new SI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(ig,sg,AI(i)),ui(ig,sg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=300,PI=sy("authIdTokenMaxAge")||CI;let og=null;const kI=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>PI)return;const o=t==null?void 0:t.token;og!==o&&(og=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xI(i=uy()){const e=Ad(i,"auth");if(e.isInitialized())return e.getImmediate();const t=JE(i,{popupRedirectResolver:II,persistence:[OT,TT,by]}),s=sy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=kI(u.toString());yT(t,h,()=>h(t.currentUser)),gT(t,m=>h(m))}}const o=ry("auth");return o&&eT(t,`http://${o}`),t}function NI(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}qE({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Fn("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",NI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RI("Browser");var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,qy;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function A(){}A.prototype=I.prototype,x.D=I.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(P,N,L){for(var S=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)S[Me-2]=arguments[Me];return I.prototype[N].apply(P,S)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,A){A||(A=0);var P=Array(16);if(typeof I=="string")for(var N=0;16>N;++N)P[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;16>N;++N)P[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=x.g[0],A=x.g[1],N=x.g[2];var L=x.g[3],S=I+(L^A&(N^L))+P[0]+3614090360&4294967295;I=A+(S<<7&4294967295|S>>>25),S=L+(N^I&(A^N))+P[1]+3905402710&4294967295,L=I+(S<<12&4294967295|S>>>20),S=N+(A^L&(I^A))+P[2]+606105819&4294967295,N=L+(S<<17&4294967295|S>>>15),S=A+(I^N&(L^I))+P[3]+3250441966&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(L^A&(N^L))+P[4]+4118548399&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(N^I&(A^N))+P[5]+1200080426&4294967295,L=I+(S<<12&4294967295|S>>>20),S=N+(A^L&(I^A))+P[6]+2821735955&4294967295,N=L+(S<<17&4294967295|S>>>15),S=A+(I^N&(L^I))+P[7]+4249261313&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(L^A&(N^L))+P[8]+1770035416&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(N^I&(A^N))+P[9]+2336552879&4294967295,L=I+(S<<12&4294967295|S>>>20),S=N+(A^L&(I^A))+P[10]+4294925233&4294967295,N=L+(S<<17&4294967295|S>>>15),S=A+(I^N&(L^I))+P[11]+2304563134&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(L^A&(N^L))+P[12]+1804603682&4294967295,I=A+(S<<7&4294967295|S>>>25),S=L+(N^I&(A^N))+P[13]+4254626195&4294967295,L=I+(S<<12&4294967295|S>>>20),S=N+(A^L&(I^A))+P[14]+2792965006&4294967295,N=L+(S<<17&4294967295|S>>>15),S=A+(I^N&(L^I))+P[15]+1236535329&4294967295,A=N+(S<<22&4294967295|S>>>10),S=I+(N^L&(A^N))+P[1]+4129170786&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^N&(I^A))+P[6]+3225465664&4294967295,L=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(L^I))+P[11]+643717713&4294967295,N=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(N^L))+P[0]+3921069994&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^L&(A^N))+P[5]+3593408605&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^N&(I^A))+P[10]+38016083&4294967295,L=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(L^I))+P[15]+3634488961&4294967295,N=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(N^L))+P[4]+3889429448&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^L&(A^N))+P[9]+568446438&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^N&(I^A))+P[14]+3275163606&4294967295,L=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(L^I))+P[3]+4107603335&4294967295,N=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(N^L))+P[8]+1163531501&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(N^L&(A^N))+P[13]+2850285829&4294967295,I=A+(S<<5&4294967295|S>>>27),S=L+(A^N&(I^A))+P[2]+4243563512&4294967295,L=I+(S<<9&4294967295|S>>>23),S=N+(I^A&(L^I))+P[7]+1735328473&4294967295,N=L+(S<<14&4294967295|S>>>18),S=A+(L^I&(N^L))+P[12]+2368359562&4294967295,A=N+(S<<20&4294967295|S>>>12),S=I+(A^N^L)+P[5]+4294588738&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^N)+P[8]+2272392833&4294967295,L=I+(S<<11&4294967295|S>>>21),S=N+(L^I^A)+P[11]+1839030562&4294967295,N=L+(S<<16&4294967295|S>>>16),S=A+(N^L^I)+P[14]+4259657740&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^L)+P[1]+2763975236&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^N)+P[4]+1272893353&4294967295,L=I+(S<<11&4294967295|S>>>21),S=N+(L^I^A)+P[7]+4139469664&4294967295,N=L+(S<<16&4294967295|S>>>16),S=A+(N^L^I)+P[10]+3200236656&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^L)+P[13]+681279174&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^N)+P[0]+3936430074&4294967295,L=I+(S<<11&4294967295|S>>>21),S=N+(L^I^A)+P[3]+3572445317&4294967295,N=L+(S<<16&4294967295|S>>>16),S=A+(N^L^I)+P[6]+76029189&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(A^N^L)+P[9]+3654602809&4294967295,I=A+(S<<4&4294967295|S>>>28),S=L+(I^A^N)+P[12]+3873151461&4294967295,L=I+(S<<11&4294967295|S>>>21),S=N+(L^I^A)+P[15]+530742520&4294967295,N=L+(S<<16&4294967295|S>>>16),S=A+(N^L^I)+P[2]+3299628645&4294967295,A=N+(S<<23&4294967295|S>>>9),S=I+(N^(A|~L))+P[0]+4096336452&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~N))+P[7]+1126891415&4294967295,L=I+(S<<10&4294967295|S>>>22),S=N+(I^(L|~A))+P[14]+2878612391&4294967295,N=L+(S<<15&4294967295|S>>>17),S=A+(L^(N|~I))+P[5]+4237533241&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~L))+P[12]+1700485571&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~N))+P[3]+2399980690&4294967295,L=I+(S<<10&4294967295|S>>>22),S=N+(I^(L|~A))+P[10]+4293915773&4294967295,N=L+(S<<15&4294967295|S>>>17),S=A+(L^(N|~I))+P[1]+2240044497&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~L))+P[8]+1873313359&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~N))+P[15]+4264355552&4294967295,L=I+(S<<10&4294967295|S>>>22),S=N+(I^(L|~A))+P[6]+2734768916&4294967295,N=L+(S<<15&4294967295|S>>>17),S=A+(L^(N|~I))+P[13]+1309151649&4294967295,A=N+(S<<21&4294967295|S>>>11),S=I+(N^(A|~L))+P[4]+4149444226&4294967295,I=A+(S<<6&4294967295|S>>>26),S=L+(A^(I|~N))+P[11]+3174756917&4294967295,L=I+(S<<10&4294967295|S>>>22),S=N+(I^(L|~A))+P[2]+718787259&4294967295,N=L+(S<<15&4294967295|S>>>17),S=A+(L^(N|~I))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var A=I-this.blockSize,P=this.B,N=this.h,L=0;L<I;){if(N==0)for(;L<=A;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<I;)if(P[N++]=x.charCodeAt(L++),N==this.blockSize){o(this,P),N=0;break}}else for(;L<I;)if(P[N++]=x[L++],N==this.blockSize){o(this,P),N=0;break}}this.h=N,this.o+=I},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var A=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=A&255,A/=256;for(this.u(x),x=Array(16),I=A=0;4>I;++I)for(var P=0;32>P;P+=8)x[A++]=this.g[I]>>>P&255;return x};function u(x,I){var A=m;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=I(x)}function h(x,I){this.h=I;for(var A=[],P=!0,N=x.length-1;0<=N;N--){var L=x[N]|0;P&&L==I||(A[N]=L,P=!1)}this.g=A}var m={};function g(x){return-128<=x&&128>x?u(x,function(I){return new h([I|0],0>I?-1:0)}):new h([x|0],0>x?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return C;if(0>x)return H(v(-x));for(var I=[],A=1,P=0;x>=A;P++)I[P]=x/A|0,A*=4294967296;return new h(I,0)}function E(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return H(E(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(I,8)),P=C,N=0;N<x.length;N+=8){var L=Math.min(8,x.length-N),S=parseInt(x.substring(N,N+L),I);8>L?(L=v(Math.pow(I,L)),P=P.j(L).add(v(S))):(P=P.j(A),P=P.add(v(S)))}return P}var C=g(0),V=g(1),U=g(16777216);i=h.prototype,i.m=function(){if(X(this))return-H(this).m();for(var x=0,I=1,A=0;A<this.g.length;A++){var P=this.i(A);x+=(0<=P?P:4294967296+P)*I,I*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(Q(this))return"0";if(X(this))return"-"+H(this).toString(x);for(var I=v(Math.pow(x,6)),A=this,P="";;){var N=me(A,I).g;A=ye(A,N.j(I));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=N,Q(A))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function Q(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function X(x){return x.h==-1}i.l=function(x){return x=ye(this,x),X(x)?-1:Q(x)?0:1};function H(x){for(var I=x.g.length,A=[],P=0;P<I;P++)A[P]=~x.g[P];return new h(A,~x.h).add(V)}i.abs=function(){return X(this)?H(this):this},i.add=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],P=0,N=0;N<=I;N++){var L=P+(this.i(N)&65535)+(x.i(N)&65535),S=(L>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);P=S>>>16,L&=65535,S&=65535,A[N]=S<<16|L}return new h(A,A[A.length-1]&-2147483648?-1:0)};function ye(x,I){return x.add(H(I))}i.j=function(x){if(Q(this)||Q(x))return C;if(X(this))return X(x)?H(this).j(H(x)):H(H(this).j(x));if(X(x))return H(this.j(H(x)));if(0>this.l(U)&&0>x.l(U))return v(this.m()*x.m());for(var I=this.g.length+x.g.length,A=[],P=0;P<2*I;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<x.g.length;N++){var L=this.i(P)>>>16,S=this.i(P)&65535,Me=x.i(N)>>>16,Ue=x.i(N)&65535;A[2*P+2*N]+=S*Ue,_e(A,2*P+2*N),A[2*P+2*N+1]+=L*Ue,_e(A,2*P+2*N+1),A[2*P+2*N+1]+=S*Me,_e(A,2*P+2*N+1),A[2*P+2*N+2]+=L*Me,_e(A,2*P+2*N+2)}for(P=0;P<I;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=I;P<2*I;P++)A[P]=0;return new h(A,0)};function _e(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function Ee(x,I){this.g=x,this.h=I}function me(x,I){if(Q(I))throw Error("division by zero");if(Q(x))return new Ee(C,C);if(X(x))return I=me(H(x),I),new Ee(H(I.g),H(I.h));if(X(I))return I=me(x,H(I)),new Ee(H(I.g),I.h);if(30<x.g.length){if(X(x)||X(I))throw Error("slowDivide_ only works with positive integers.");for(var A=V,P=I;0>=P.l(x);)A=We(A),P=We(P);var N=Ie(A,1),L=Ie(P,1);for(P=Ie(P,2),A=Ie(A,2);!Q(P);){var S=L.add(P);0>=S.l(x)&&(N=N.add(A),L=S),P=Ie(P,1),A=Ie(A,1)}return I=ye(x,N.j(I)),new Ee(N,I)}for(N=C;0<=x.l(I);){for(A=Math.max(1,Math.floor(x.m()/I.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=v(A),S=L.j(I);X(S)||0<S.l(x);)A-=P,L=v(A),S=L.j(I);Q(L)&&(L=V),N=N.add(L),x=ye(x,S)}return new Ee(N,x)}i.A=function(x){return me(this,x).h},i.and=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)&x.i(P);return new h(A,this.h&x.h)},i.or=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)|x.i(P);return new h(A,this.h|x.h)},i.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),A=[],P=0;P<I;P++)A[P]=this.i(P)^x.i(P);return new h(A,this.h^x.h)};function We(x){for(var I=x.g.length+1,A=[],P=0;P<I;P++)A[P]=x.i(P)<<1|x.i(P-1)>>>31;return new h(A,x.h)}function Ie(x,I){var A=I>>5;I%=32;for(var P=x.g.length-A,N=[],L=0;L<P;L++)N[L]=0<I?x.i(L+A)>>>I|x.i(L+A+1)<<32-I:x.i(L+A);return new h(N,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,qy=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Gi=h}).apply(typeof ag<"u"?ag:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hy,va,Ky,Eu,od,Gy,Qy,Yy;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(l,f){if(f)e:{var y=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in y))break e;y=y[M]}l=l[l.length-1],w=y[l],f=f(w),f!=w&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,w=!1,M={next:function(){if(!w&&y<l.length){var z=y++;return{value:f(z,l[z]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function v(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function E(l,f,y){return l.call.apply(l.bind,arguments)}function C(l,f,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function V(l,f,y){return V=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:C,V.apply(null,arguments)}function U(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function Q(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,M,z){for(var J=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)J[ze-2]=arguments[ze];return f.prototype[M].apply(w,J)}}function X(l){const f=l.length;if(0<f){const y=Array(f);for(let w=0;w<f;w++)y[w]=l[w];return y}return[]}function H(l,f){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const M=l.length||0,z=w.length||0;l.length=M+z;for(let J=0;J<z;J++)l[M+J]=w[J]}else l.push(w)}}class ye{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _e(l){return/^[\s\xa0]*$/.test(l)}function Ee(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function me(l){return me[" "](l),l}me[" "]=function(){};var We=Ee().indexOf("Gecko")!=-1&&!(Ee().toLowerCase().indexOf("webkit")!=-1&&Ee().indexOf("Edge")==-1)&&!(Ee().indexOf("Trident")!=-1||Ee().indexOf("MSIE")!=-1)&&Ee().indexOf("Edge")==-1;function Ie(l,f,y){for(const w in l)f.call(y,l[w],w,l)}function x(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function I(l){const f={};for(const y in l)f[y]=l[y];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let y,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(y in w)l[y]=w[y];for(let z=0;z<A.length;z++)y=A[z],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function N(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function L(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ie;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Me{constructor(){this.h=this.g=null}add(f,y){const w=Ue.get();w.set(f,y),this.h?this.h.next=w:this.g=w,this.h=w}}var Ue=new ye(()=>new Ze,l=>l.reset());class Ze{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let je,Z=!1,ie=new Me,te=()=>{const l=m.Promise.resolve(void 0);je=()=>{l.then(O)}};var O=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(y){L(y)}var f=Ue;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Z=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l})();function Ae(l,f){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(We){e:{try{me(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ae.aa.h.call(this)}}Q(Ae,ue);var xe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function qe(l,f,y,w,M){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!w,this.ha=M,this.key=++Fe,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function tr(l){this.src=l,this.g={},this.h=0}tr.prototype.add=function(l,f,y,w,M){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var J=Nr(l,f,w,M);return-1<J?(f=l[J],y||(f.fa=!1)):(f=new qe(f,this.src,z,!!w,M),f.fa=y,l.push(f)),f};function ss(l,f){var y=f.type;if(y in l.g){var w=l.g[y],M=Array.prototype.indexOf.call(w,f,void 0),z;(z=0<=M)&&Array.prototype.splice.call(w,M,1),z&&(yt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Nr(l,f,y,w){for(var M=0;M<l.length;++M){var z=l[M];if(!z.da&&z.listener==f&&z.capture==!!y&&z.ha==w)return M}return-1}var yi="closure_lm_"+(1e6*Math.random()|0),os={};function Eo(l,f,y,w,M){if(Array.isArray(f)){for(var z=0;z<f.length;z++)Eo(l,f[z],y,w,M);return null}return y=So(y),l&&l[be]?l.K(f,y,v(w)?!!w.capture:!1,M):To(l,f,y,!1,w,M)}function To(l,f,y,w,M,z){if(!f)throw Error("Invalid event type");var J=v(M)?!!M.capture:!!M,ze=ls(l);if(ze||(l[yi]=ze=new tr(l)),y=ze.add(f,y,w,J,z),y.proxy)return y;if(w=Ya(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)Se||(M=J),M===void 0&&(M=!1),l.addEventListener(f.toString(),w,M);else if(l.attachEvent)l.attachEvent(rr(f.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ya(){function l(y){return f.call(l.src,l.listener,y)}const f=Io;return l}function as(l,f,y,w,M){if(Array.isArray(f))for(var z=0;z<f.length;z++)as(l,f[z],y,w,M);else w=v(w)?!!w.capture:!!w,y=So(y),l&&l[be]?(l=l.i,f=String(f).toString(),f in l.g&&(z=l.g[f],y=Nr(z,y,w,M),-1<y&&(yt(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[f],l.h--)))):l&&(l=ls(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Nr(f,y,w,M)),(y=-1<l?f[l]:null)&&nr(y))}function nr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[be])ss(f.i,l);else{var y=l.type,w=l.proxy;f.removeEventListener?f.removeEventListener(y,w,l.capture):f.detachEvent?f.detachEvent(rr(y),w):f.addListener&&f.removeListener&&f.removeListener(w),(y=ls(f))?(ss(y,l),y.h==0&&(y.src=null,f[yi]=null)):yt(l)}}}function rr(l){return l in os?os[l]:os[l]="on"+l}function Io(l,f){if(l.da)l=!0;else{f=new Ae(f,this);var y=l.listener,w=l.ha||l.src;l.fa&&nr(l),l=y.call(w,f)}return l}function ls(l){return l=l[yi],l instanceof tr?l:null}var us="__closure_events_fn_"+(1e9*Math.random()>>>0);function So(l){return typeof l=="function"?l:(l[us]||(l[us]=function(f){return l.handleEvent(f)}),l[us])}function ht(){B.call(this),this.i=new tr(this),this.M=this,this.F=null}Q(ht,B),ht.prototype[be]=!0,ht.prototype.removeEventListener=function(l,f,y,w){as(this,l,f,y,w)};function dt(l,f){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=f.type||f,typeof f=="string")f=new ue(f,l);else if(f instanceof ue)f.target=f.target||l;else{var M=f;f=new ue(w,l),P(f,M)}if(M=!0,y)for(var z=y.length-1;0<=z;z--){var J=f.g=y[z];M=ir(J,w,!0,f)&&M}if(J=f.g=l,M=ir(J,w,!0,f)&&M,M=ir(J,w,!1,f)&&M,y)for(z=0;z<y.length;z++)J=f.g=y[z],M=ir(J,w,!1,f)&&M}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],w=0;w<y.length;w++)yt(y[w]);delete l.g[f],l.h--}}this.F=null},ht.prototype.K=function(l,f,y,w){return this.i.add(String(l),f,!1,y,w)},ht.prototype.L=function(l,f,y,w){return this.i.add(String(l),f,!0,y,w)};function ir(l,f,y,w){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,z=0;z<f.length;++z){var J=f[z];if(J&&!J.da&&J.capture==y){var ze=J.listener,ft=J.ha||J.src;J.fa&&ss(l.i,J),M=ze.call(ft,w)!==!1&&M}}return M&&!w.defaultPrevented}function Ao(l,f,y){if(typeof l=="function")y&&(l=V(l,y));else if(l&&typeof l.handleEvent=="function")l=V(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Dr(l){l.g=Ao(()=>{l.g=null,l.i&&(l.i=!1,Dr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class _i extends B{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(l){B.call(this),this.h=l,this.g={}}Q(vi,B);var Ro=[];function Co(l){Ie(l.g,function(f,y){this.g.hasOwnProperty(y)&&nr(f)},l),l.g={}}vi.prototype.N=function(){vi.aa.N.call(this),Co(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=m.JSON.stringify,ko=m.JSON.parse,xo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function wi(){}wi.prototype.h=null;function cs(l){return l.h||(l.h=l.i())}function hs(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){ue.call(this,"d")}Q(jn,ue);function ds(){ue.call(this,"c")}Q(ds,ue);var zn={},No=null;function Ei(){return No=No||new ht}zn.La="serverreachability";function Do(l){ue.call(this,zn.La,l)}Q(Do,ue);function sr(l){const f=Ei();dt(f,new Do(f))}zn.STAT_EVENT="statevent";function Vo(l,f){ue.call(this,zn.STAT_EVENT,l),this.stat=f}Q(Vo,ue);function it(l){const f=Ei();dt(f,new Vo(f,l))}zn.Ma="timingevent";function fs(l,f){ue.call(this,zn.Ma,l),this.size=f}Q(fs,ue);function En(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Ii(l,f,y,w,M,z){l.info(function(){if(l.g)if(z)for(var J="",ze=z.split("&"),ft=0;ft<ze.length;ft++){var Ne=ze[ft].split("=");if(1<Ne.length){var _t=Ne[0];Ne=Ne[1];var at=_t.split("_");J=2<=at.length&&at[1]=="type"?J+(_t+"="+Ne+"&"):J+(_t+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+f+`
`+y+`
`+J})}function ps(l,f,y,w,M,z,J){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+f+`
`+y+`
`+z+" "+J})}function Tn(l,f,y,w){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+sc(l,y)+(w?" "+w:"")})}function Oo(l,f){l.info(function(){return"TIMEOUT: "+f})}Ti.prototype.info=function(){};function sc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<M.length;J++)M[J]=""}}}}return Po(y)}catch{return f}}var ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function Si(){}Q(Si,wi),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},In=new Si;function Sn(l,f,y,w){this.j=l,this.i=f,this.l=y,this.R=w||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ja}function Ja(){this.i=null,this.g="",this.h=!1}var Lo={},gs={};function ys(l,f,y){l.L=1,l.v=br(tn(f)),l.m=y,l.P=!0,Mo(l,null)}function Mo(l,f){l.F=Date.now(),He(l),l.A=tn(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Ur(y.i,"t",w),l.C=0,y=l.j.J,l.h=new Ja,l.g=gl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new _i(V(l.Y,l,l.g),l.O)),f=l.U,y=l.g,w=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ro[0]=M.toString()),M=Ro);for(var z=0;z<M.length;z++){var J=Eo(y,M[z],w||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),sr(),Ii(l.i,l.u,l.A,l.l,l.R,l.m)}Sn.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ht(l)==3?f.j():this.Y(l)},Sn.prototype.Y=function(l){try{if(l==this.g)e:{const at=Ht(this.g);var f=this.g.Ba();const dn=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||at!=4||f==7||(f==8||0>=dn?sr(3):sr(2)),Ai(this);var y=this.g.Z();this.X=y;t:if(Za(this)){var w=Bo(this.g);l="";var M=w.length,z=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Vr(this);var J="";break t}this.h.i=new m.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(w[f],{stream:!(z&&f==M-1)});w.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=y==200,ps(this.i,this.u,this.A,this.l,this.R,at,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,ft=this.g;if((ze=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_e(ze)){var Ne=ze;break t}}Ne=null}if(y=Ne)Tn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bo(this,y);else{this.o=!1,this.s=3,it(12),cn(this),Vr(this);break e}}if(this.P){y=!0;let rn;for(;!this.J&&this.C<J.length;)if(rn=oc(this,J),rn==gs){at==4&&(this.s=4,it(14),y=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Lo){this.s=4,it(15),Tn(this.i,this.l,J,"[Invalid Chunk]"),y=!1;break}else Tn(this.i,this.l,rn,null),bo(this,rn);if(Za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||J.length!=0||this.h.h||(this.s=1,it(16),y=!1),this.o=this.o&&y,!y)Tn(this.i,this.l,J,"[Invalid Chunked Response]"),cn(this),Vr(this);else if(0<J.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Wo(_t),_t.M=!0,it(11))}}else Tn(this.i,this.l,J,null),bo(this,J);at==4&&cn(this),this.o&&!this.J&&(at==4?Ps(this.j,this):(this.o=!1,He(this)))}else Is(this.g),y==400&&0<J.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),cn(this),Vr(this)}}}catch{}finally{}};function Za(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function oc(l,f){var y=l.C,w=f.indexOf(`
`,y);return w==-1?gs:(y=Number(f.substring(y,w)),isNaN(y)?Lo:(w+=1,w+y>f.length?gs:(f=f.slice(w,w+y),l.C=w+y,f)))}Sn.prototype.cancel=function(){this.J=!0,cn(this)};function He(l){l.S=Date.now()+l.I,el(l,l.I)}function el(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=En(V(l.ba,l),f)}function Ai(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Sn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Oo(this.i,this.A),this.L!=2&&(sr(),it(17)),cn(this),this.s=2,Vr(this)):el(this,this.S-l)};function Vr(l){l.j.G==0||l.J||Ps(l.j,l)}function cn(l){Ai(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Co(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function bo(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||jt(y.h,l))){if(!l.K&&jt(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Cs(y),kn(y);else break e;Rs(y),it(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=En(V(y.Za,y),6e3));if(1>=nl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else cr(y,11)}else if((l.K||y.g==l)&&Cs(y),!_e(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(y.T=Ne[0],Ne=Ne[1],y.G==2)if(Ne[0]=="c"){y.K=Ne[1],y.ia=Ne[2];const _t=Ne[3];_t!=null&&(y.la=_t,y.j.info("VER="+y.la));const at=Ne[4];at!=null&&(y.Aa=at,y.j.info("SVER="+y.Aa));const dn=Ne[5];dn!=null&&typeof dn=="number"&&0<dn&&(w=1.5*dn,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const rn=l.g;if(rn){const Di=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var z=w.h;z.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Fo(z,z.h),z.h=null))}if(w.D){const xs=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;xs&&(w.ya=xs,$e(w.I,w.D,xs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var J=l;if(w.qa=ml(w,w.J?w.ia:null,w.W),J.K){rl(w.h,J);var ze=J,ft=w.L;ft&&(ze.I=ft),ze.B&&(Ai(ze),He(ze)),w.g=J}else Ni(w);0<y.i.length&&qn(y)}else Ne[0]!="stop"&&Ne[0]!="close"||cr(y,7);else y.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?cr(y,7):St(y):Ne[0]!="noop"&&y.l&&y.l.ta(Ne),y.v=0)}}sr(4)}catch{}}var tl=class{constructor(l,f){this.g=l,this.map=f}};function Ri(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function nl(l){return l.h?1:l.g?l.g.size:0}function jt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Fo(l,f){l.g?l.g.add(f):l.h=f}function rl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Ri.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function il(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return X(l.i)}function _s(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,w=0;w<y;w++)f.push(l[w]);return f}f=[],y=0;for(w in l)f[y++]=l[w];return f}function vs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const w in l)f[y++]=w;return f}}}function Or(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=vs(l),w=_s(l),M=w.length,z=0;z<M;z++)f.call(void 0,w[z],y&&y[z],l)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ac(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),M=null;if(0<=w){var z=l[y].substring(0,w);M=l[y].substring(w+1)}else z=l[y];f(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function or(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof or){this.h=l.h,Pi(this,l.j),this.o=l.o,this.g=l.g,Lr(this,l.s),this.l=l.l;var f=l.i,y=new Bn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Mr(this,y),this.m=l.m}else l&&(f=String(l).match(Ci))?(this.h=!1,Pi(this,f[1]||"",!0),this.o=Pe(f[2]||""),this.g=Pe(f[3]||"",!0),Lr(this,f[4]),this.l=Pe(f[5]||"",!0),Mr(this,f[6]||"",!0),this.m=Pe(f[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}or.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Fr(f,ws,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Fr(f,ws,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Fr(y,y.charAt(0)=="/"?al:ol,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Fr(y,Uo)),l.join("")};function tn(l){return new or(l)}function Pi(l,f,y){l.j=y?Pe(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Lr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Mr(l,f,y){f instanceof Bn?(l.i=f,$n(l.i,l.h)):(y||(f=Fr(f,ll)),l.i=new Bn(f,l.h))}function $e(l,f,y){l.i.set(f,y)}function br(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Pe(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,sl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ws=/[#\/\?@]/g,ol=/[#\?:]/g,al=/[#\?]/g,ll=/[#\?@]/g,Uo=/#/g;function Bn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&ac(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}i=Bn.prototype,i.add=function(l,f){It(this),this.i=null,l=hn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function An(l,f){It(l),f=hn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Rn(l,f){return It(l),f=hn(l,f),l.g.has(f)}i.forEach=function(l,f){It(this),this.g.forEach(function(y,w){y.forEach(function(M){l.call(f,M,w,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let w=0;w<f.length;w++){const M=l[w];for(let z=0;z<M.length;z++)y.push(f[w])}return y},i.V=function(l){It(this);let f=[];if(typeof l=="string")Rn(this,l)&&(f=f.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},i.set=function(l,f){return It(this),this.i=null,l=hn(this,l),Rn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Ur(l,f,y){An(l,f),0<y.length&&(l.i=null,l.g.set(hn(l,f),X(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var w=f[y];const z=encodeURIComponent(String(w)),J=this.V(w);for(w=0;w<J.length;w++){var M=z;J[w]!==""&&(M+="="+encodeURIComponent(String(J[w]))),l.push(M)}}return this.i=l.join("&")};function hn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function $n(l,f){f&&!l.j&&(It(l),l.i=null,l.g.forEach(function(y,w){var M=w.toLowerCase();w!=M&&(An(this,w),Ur(this,M,y))},l)),l.j=f}function lc(l,f){const y=new Ti;if(m.Image){const w=new Image;w.onload=U(qt,y,"TestLoadImage: loaded",!0,f,w),w.onerror=U(qt,y,"TestLoadImage: error",!1,f,w),w.onabort=U(qt,y,"TestLoadImage: abort",!1,f,w),w.ontimeout=U(qt,y,"TestLoadImage: timeout",!1,f,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else f(!1)}function ul(l,f){const y=new Ti,w=new AbortController,M=setTimeout(()=>{w.abort(),qt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:w.signal}).then(z=>{clearTimeout(M),z.ok?qt(y,"TestPingServer: ok",!0,f):qt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),qt(y,"TestPingServer: error",!1,f)})}function qt(l,f,y,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(y)}catch{}}function uc(){this.g=new xo}function cl(l,f,y){const w=y||"";try{Or(l,function(M,z){let J=M;v(M)&&(J=Po(M)),f.push(w+z+"="+encodeURIComponent(J))})}catch(M){throw f.push(w+"type="+encodeURIComponent("_badmap")),M}}function ar(l){this.l=l.Ub||null,this.j=l.eb||!1}Q(ar,wi),ar.prototype.g=function(){return new ki(this.l,this.j)},ar.prototype.i=(function(l){return function(){return l}})({});function ki(l,f){ht.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(ki,ht),i=ki.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Pn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function hl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Cn(this):Pn(this),this.readyState==3&&hl(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Cn(this))},i.Qa=function(l){this.g&&(this.response=l,Cn(this))},i.ga=function(){this.g&&Cn(this)};function Cn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function lr(l){let f="";return Ie(l,function(y,w){f+=w,f+=":",f+=y,f+=`\r
`}),f}function jr(l,f,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=lr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):$e(l,f,y))}function Xe(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(Xe,ht);var cc=/^https?$/i,jo=["POST","PUT"];i=Xe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?cs(this.o):cs(In),this.g.onreadystatechange=V(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(z){xi(this,z);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)y.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const z of w.keys())y.set(z,w.get(z));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),M=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(jo,f,void 0))||w||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of y)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ts(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){xi(this,z)}};function xi(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Es(l),nn(l)}function Es(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),nn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Xe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?zo(this):this.bb())},i.bb=function(){zo(this)};function zo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Ht(l)!=4||l.Z()!=2)){if(l.u&&Ht(l)==4)Ao(l.Ea,0,l);else if(dt(l,"readystatechange"),Ht(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var w;if(w=J===0){var M=String(l.D).match(Ci)[1]||null;!M&&m.self&&m.self.location&&(M=m.self.location.protocol.slice(0,-1)),w=!cc.test(M?M.toLowerCase():"")}y=w}if(y)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var z=2<Ht(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Es(l)}}finally{nn(l)}}}}function nn(l,f){if(l.g){Ts(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||dt(l,"ready");try{y.onreadystatechange=w}catch{}}}function Ts(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Ht(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ko(f)}};function Bo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Is(l){const f={};l=(l.g&&2<=Ht(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(_e(l[w]))continue;var y=N(l[w]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=f[M]||[];f[M]=z,z.push(y)}x(f,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function $o(l){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,l),this.cb=Wn("retryDelaySeedMs",1e4,l),this.Wa=Wn("forwardChannelMaxRetries",2,l),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(l&&l.concurrentRequestLimit),this.Da=new uc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=$o.prototype,i.la=8,i.G=1,i.connect=function(l,f,y,w){it(0),this.W=l,this.H=f||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=ml(this,null,this.W),qn(this)};function St(l){if(Ss(l),l.G==3){var f=l.U++,y=tn(l.I);if($e(y,"SID",l.K),$e(y,"RID",f),$e(y,"TYPE","terminate"),ur(l,y),f=new Sn(l,l.j,f),f.L=2,f.v=br(tn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=gl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),He(f)}pl(l)}function kn(l){l.g&&(Wo(l),l.g.cancel(),l.g=null)}function Ss(l){kn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function qn(l){if(!en(l.h)&&!l.s){l.s=!0;var f=l.Ga;je||te(),Z||(je(),Z=!0),ie.add(f,l),l.B=0}}function hc(l,f){return nl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=En(V(l.Ga,l,f),fl(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Sn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=I(z),P(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=zr(this,M,f),y=tn(this.I),$e(y,"RID",l),$e(y,"CVER",22),this.D&&$e(y,"X-HTTP-Session-Id",this.D),ur(this,y),z&&(this.O?f="headers="+encodeURIComponent(String(lr(z)))+"&"+f:this.m&&jr(y,this.m,z)),Fo(this.h,M),this.Ua&&$e(y,"TYPE","init"),this.P?($e(y,"$req",f),$e(y,"SID","null"),M.T=!0,ys(M,y,null)):ys(M,y,f),this.G=2}}else this.G==3&&(l?As(this,l):this.i.length==0||en(this.h)||As(this))};function As(l,f){var y;f?y=f.l:y=l.U++;const w=tn(l.I);$e(w,"SID",l.K),$e(w,"RID",y),$e(w,"AID",l.T),ur(l,w),l.m&&l.o&&jr(w,l.m,l.o),y=new Sn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=zr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Fo(l.h,y),ys(y,w,f)}function ur(l,f){l.H&&Ie(l.H,function(y,w){$e(f,w,y)}),l.l&&Or({},function(y,w){$e(f,w,y)})}function zr(l,f,y){y=Math.min(l.i.length,y);var w=l.l?V(l.l.Na,l.l,l):null;e:{var M=l.i;let z=-1;for(;;){const J=["count="+y];z==-1?0<y?(z=M[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let ze=!0;for(let ft=0;ft<y;ft++){let Ne=M[ft].g;const _t=M[ft].map;if(Ne-=z,0>Ne)z=Math.max(0,M[ft].g-100),ze=!1;else try{cl(_t,J,"req"+Ne+"_")}catch{w&&w(_t)}}if(ze){w=J.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,w}function Ni(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;je||te(),Z||(je(),Z=!0),ie.add(f,l),l.v=0}}function Rs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=En(V(l.Fa,l),fl(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,dl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=En(V(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),kn(this),dl(this))};function Wo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function dl(l){l.g=new Sn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=tn(l.qa);$e(f,"RID","rpc"),$e(f,"SID",l.K),$e(f,"AID",l.T),$e(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(f,"TO",l.ja),$e(f,"TYPE","xmlhttp"),ur(l,f),l.m&&l.o&&jr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=br(tn(f)),y.m=null,y.P=!0,Mo(y,l)}i.Za=function(){this.C!=null&&(this.C=null,kn(this),Rs(this),it(19))};function Cs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Ps(l,f){var y=null;if(l.g==f){Cs(l),Wo(l),l.g=null;var w=2}else if(jt(l.h,f))y=f.D,rl(l.h,f),w=1;else return;if(l.G!=0){if(f.o)if(w==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;w=Ei(),dt(w,new fs(w,y)),qn(l)}else Ni(l);else if(M=f.s,M==3||M==0&&0<f.X||!(w==1&&hc(l,f)||w==2&&Rs(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),M){case 1:cr(l,5);break;case 4:cr(l,10);break;case 3:cr(l,6);break;default:cr(l,2)}}}function fl(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function cr(l,f){if(l.j.info("Error code "+f),f==2){var y=V(l.fb,l),w=l.Xa;const M=!w;w=new or(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Pi(w,"https"),br(w),M?lc(w.toString(),y):ul(w.toString(),y)}else it(2);l.G=0,l.l&&l.l.sa(f),pl(l),Ss(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function pl(l){if(l.G=0,l.ka=[],l.l){const f=il(l.h);(f.length!=0||l.i.length!=0)&&(H(l.ka,f),H(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function ml(l,f,y){var w=y instanceof or?tn(y):new or(y);if(w.g!="")f&&(w.g=f+"."+w.g),Lr(w,w.s);else{var M=m.location;w=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var z=new or(null);w&&Pi(z,w),f&&(z.g=f),M&&Lr(z,M),y&&(z.l=y),w=z}return y=l.D,f=l.ya,y&&f&&$e(w,y,f),$e(w,"VER",l.la),ur(l,w),w}function gl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Xe(new ar({eb:y})):new Xe(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function qo(){}i=qo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ks(){}ks.prototype.g=function(l,f){return new zt(l,f)};function zt(l,f){ht.call(this),this.g=new $o(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!_e(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_e(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Hn(this)}Q(zt,ht),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){St(this.g)},zt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Po(l),l=y);f.i.push(new tl(f.Ya++,l)),f.G==3&&qn(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,zt.aa.N.call(this)};function yl(l){jn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}Q(yl,jn);function _l(){ds.call(this),this.status=1}Q(_l,ds);function Hn(l){this.g=l}Q(Hn,qo),Hn.prototype.ua=function(){dt(this.g,"a")},Hn.prototype.ta=function(l){dt(this.g,new yl(l))},Hn.prototype.sa=function(l){dt(this.g,new _l)},Hn.prototype.ra=function(){dt(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Yy=function(){return new ks},Qy=function(){return Ei()},Gy=zn,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,Eu=ms,Xa.COMPLETE="complete",Ky=Xa,hs.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",ht.prototype.listen=ht.prototype.K,va=hs,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,Hy=Xe}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const lg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Id("@firebase/firestore");function ga(){return Ji.logLevel}function ae(i,...e){if(Ji.logLevel<=ke.DEBUG){const t=e.map(bd);Ji.debug(`Firestore (${go}): ${i}`,...t)}}function Pr(i,...e){if(Ji.logLevel<=ke.ERROR){const t=e.map(bd);Ji.error(`Firestore (${go}): ${i}`,...t)}}function oo(i,...e){if(Ji.logLevel<=ke.WARN){const t=e.map(bd);Ji.warn(`Firestore (${go}): ${i}`,...t)}}function bd(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(i="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+i;throw Pr(e),new Error(e)}function Be(i,e){i||ge()}function we(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bt.UNAUTHENTICATED)))}shutdown(){}}class VI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class OI{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Sr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Sr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Be(typeof s.accessToken=="string"),new Xy(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new bt(e)}}class LI{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MI{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new LI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);const s=u=>{u.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string"),this.R=t.token,new bI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=UI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%e.length))}return s}}function Le(i,e){return i<e?-1:i>e?1:0}function ao(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new gt(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new gt(0,0))}static max(){return new ve(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,s){t===void 0?t=0:t>e.length&&ge(),s===void 0?s=e.length-t:s>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Na.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ye extends Na{construct(e,t,s){return new Ye(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const jI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Na{construct(e,t,s){return new kt(e,t,s)}static isValidIdentifier(e){return jI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ye.fromString(e))}static fromName(e){return new ce(Ye.fromString(e).popFirst(5))}static empty(){return new ce(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ye(e.slice()))}}function zI(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=ve.fromTimestamp(s===1e9?new gt(t+1,0):new gt(t,s));return new hi(o,ce.empty(),e)}function BI(i){return new hi(i.readTime,i.key,-1)}class hi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new hi(ve.min(),ce.empty(),-1)}static max(){return new hi(ve.max(),ce.empty(),-1)}}function $I(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(i.documentKey,e.documentKey),t!==0?t:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==WI)throw i;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(g=>s(g)))})),h=!0,u===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;t(e[v]).next((E=>{h[v]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new K(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function HI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wa(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fd.oe=-1;function Ku(i){return i==null}function Ou(i){return i===0&&1/i==-1/0}function KI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ou(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function yo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Zy(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Pt.RED,this.left=o??Pt.EMPTY,this.right=u??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Pt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,s,o,u){return this}insert(e,t,s){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cg(this.data.getIterator())}getIteratorFrom(e){return new cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new xt(kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new e_("Invalid base64 string: "+u):u}})(e);return new Nt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const GI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(i){if(Be(!!i),typeof i=="string"){let e=0;const t=GI.exec(i);if(Be(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ot(i.seconds),nanos:ot(i.nanos)}}function ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Zi(i){return typeof i=="string"?Nt.fromBase64String(i):Nt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jd(i){const e=i.mapValue.fields.__previous_value__;return Ud(e)?jd(e):e}function Da(i){const e=di(i.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t,s,o,u,h,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v}}class Va{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu={mapValue:{}};function es(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ud(i)?4:XI(i)?9007199254740991:YI(i)?10:11:ge()}function er(i,e){if(i===e)return!0;const t=es(i);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Da(i).isEqual(Da(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=di(o.timestampValue),m=di(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Zi(o.bytesValue).isEqual(Zi(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return ot(o.geoPointValue.latitude)===ot(u.geoPointValue.latitude)&&ot(o.geoPointValue.longitude)===ot(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ot(o.integerValue)===ot(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ot(o.doubleValue),m=ot(u.doubleValue);return h===m?Ou(h)===Ou(m):isNaN(h)&&isNaN(m)}return!1})(i,e);case 9:return ao(i.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(ug(h)!==ug(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!er(h[g],m[g])))return!1;return!0})(i,e);default:return ge()}}function Oa(i,e){return(i.values||[]).find((t=>er(t,e)))!==void 0}function lo(i,e){if(i===e)return 0;const t=es(i),s=es(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=ot(u.integerValue||u.doubleValue),g=ot(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return hg(i.timestampValue,e.timestampValue);case 4:return hg(Da(i),Da(e));case 5:return Le(i.stringValue,e.stringValue);case 6:return(function(u,h){const m=Zi(u),g=Zi(h);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const E=Le(m[v],g[v]);if(E!==0)return E}return Le(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Le(ot(u.latitude),ot(h.latitude));return m!==0?m:Le(ot(u.longitude),ot(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return dg(i.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,g,v,E;const C=u.fields||{},V=h.fields||{},U=(m=C.value)===null||m===void 0?void 0:m.arrayValue,Q=(g=V.value)===null||g===void 0?void 0:g.arrayValue,X=Le(((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0,((E=Q==null?void 0:Q.values)===null||E===void 0?void 0:E.length)||0);return X!==0?X:dg(U,Q)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===mu.mapValue&&h===mu.mapValue)return 0;if(u===mu.mapValue)return 1;if(h===mu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let C=0;C<g.length&&C<E.length;++C){const V=Le(g[C],E[C]);if(V!==0)return V;const U=lo(m[g[C]],v[E[C]]);if(U!==0)return U}return Le(g.length,E.length)})(i.mapValue,e.mapValue);default:throw ge()}}function hg(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const t=di(i),s=di(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function dg(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=lo(t[o],s[o]);if(u)return u}return Le(t.length,s.length)}function uo(i){return ad(i)}function ad(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=di(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Zi(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ce.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=ad(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${ad(t.fields[h])}`;return o+"}"})(i.mapValue):ge()}function fg(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ld(i){return!!i&&"integerValue"in i}function zd(i){return!!i&&"arrayValue"in i}function pg(i){return!!i&&"nullValue"in i}function mg(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Tu(i){return!!i&&"mapValue"in i}function YI(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Sa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return yo(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Sa(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function XI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(t)}setAll(e){let t=kt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=Sa(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Tu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){yo(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new vn(Sa(this.value))}}function t_(i){const e=[];return yo(i.fields,((t,s)=>{const o=new kt([t]);if(Tu(s)){const u=t_(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,u,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ft(e,0,ve.min(),ve.min(),ve.min(),vn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,ve.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,ve.min(),ve.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,ve.min(),ve.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.position=e,this.inclusive=t}}function gg(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=ce.comparator(ce.fromName(h.referenceValue),t.key):s=lo(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function yg(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!er(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function JI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{}class ct extends n_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new eS(e,t,s):t==="array-contains"?new rS(e,s):t==="in"?new iS(e,s):t==="not-in"?new sS(e,s):t==="array-contains-any"?new oS(e,s):new ct(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new tS(e,s):new nS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(lo(t,this.value)):t!==null&&es(this.value)===es(t)&&this.matchesComparison(lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends n_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Un(e,t)}matches(e){return r_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function r_(i){return i.op==="and"}function i_(i){return ZI(i)&&r_(i)}function ZI(i){for(const e of i.filters)if(e instanceof Un)return!1;return!0}function ud(i){if(i instanceof ct)return i.field.canonicalString()+i.op.toString()+uo(i.value);if(i_(i))return i.filters.map((e=>ud(e))).join(",");{const e=i.filters.map((t=>ud(t))).join(",");return`${i.op}(${e})`}}function s_(i,e){return i instanceof ct?(function(s,o){return o instanceof ct&&s.op===o.op&&s.field.isEqual(o.field)&&er(s.value,o.value)})(i,e):i instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&s_(h,o.filters[m])),!0):!1})(i,e):void ge()}function o_(i){return i instanceof ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${uo(t.value)}`})(i):i instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map(o_).join(" ,")+"}"})(i):"Filter"}class eS extends ct{constructor(e,t,s){super(e,t,s),this.key=ce.fromName(s.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class tS extends ct{constructor(e,t){super(e,"in",t),this.keys=a_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nS extends ct{constructor(e,t){super(e,"not-in",t),this.keys=a_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function a_(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>ce.fromName(s.referenceValue)))}class rS extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zd(t)&&Oa(t.arrayValue,this.value)}}class iS extends ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oa(this.value.arrayValue,t)}}class sS extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Oa(this.value.arrayValue,t)}}class oS extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Oa(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function _g(i,e=null,t=[],s=[],o=null,u=null,h=null){return new aS(i,e,t,s,o,u,h)}function Bd(i){const e=we(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>ud(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>uo(s))).join(",")),e.ue=t}return e.ue}function $d(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!JI(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!s_(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!yg(i.startAt,e.startAt)&&yg(i.endAt,e.endAt)}function cd(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lS(i,e,t,s,o,u,h,m){return new qa(i,e,t,s,o,u,h,m)}function Wd(i){return new qa(i)}function vg(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function l_(i){return i.collectionGroup!==null}function Aa(i){const e=we(i);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new xt(kt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Mu(u,s))})),t.has(kt.keyField().canonicalString())||e.ce.push(new Mu(kt.keyField(),s))}return e.ce}function Jn(i){const e=we(i);return e.le||(e.le=uS(e,Aa(i))),e.le}function uS(i,e){if(i.limitType==="F")return _g(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Mu(o.field,u)}));const t=i.endAt?new Lu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Lu(i.startAt.position,i.startAt.inclusive):null;return _g(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function hd(i,e){const t=i.filters.concat([e]);return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function dd(i,e,t){return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Gu(i,e){return $d(Jn(i),Jn(e))&&i.limitType===e.limitType}function u_(i){return`${Bd(Jn(i))}|lt:${i.limitType}`}function Xs(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>o_(o))).join(", ")}]`),Ku(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>uo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(Jn(i))}; limitType=${i.limitType})`}function Qu(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ce.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Aa(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const v=gg(h,m,g);return h.inclusive?v<=0:v<0})(s.startAt,Aa(s),o)||s.endAt&&!(function(h,m,g){const v=gg(h,m,g);return h.inclusive?v>=0:v>0})(s.endAt,Aa(s),o))})(i,e)}function cS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function c_(i){return(e,t)=>{let s=!1;for(const o of Aa(i)){const u=hS(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function hS(i,e,t){const s=i.field.isKeyField()?ce.comparator(e.key,t.key):(function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?lo(g,v):ge()})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Zy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new nt(ce.comparator);function kr(){return dS}const h_=new nt(ce.comparator);function wa(...i){let e=h_;for(const t of i)e=e.insert(t.key,t);return e}function d_(i){let e=h_;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ki(){return Ra()}function f_(){return Ra()}function Ra(){return new _o((i=>i.toString()),((i,e)=>i.isEqual(e)))}const fS=new nt(ce.comparator),pS=new xt(ce.comparator);function Ce(...i){let e=pS;for(const t of i)e=e.add(t);return e}const mS=new xt(Le);function gS(){return mS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function p_(i){return{integerValue:""+i}}function yS(i,e){return KI(e)?p_(e):qd(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function _S(i,e,t){return i instanceof bu?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ud(u)&&(u=jd(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(t,e):i instanceof La?g_(i,e):i instanceof Ma?y_(i,e):(function(o,u){const h=m_(o,u),m=wg(h)+wg(o.Pe);return ld(h)&&ld(o.Pe)?p_(m):qd(o.serializer,m)})(i,e)}function vS(i,e,t){return i instanceof La?g_(i,e):i instanceof Ma?y_(i,e):t}function m_(i,e){return i instanceof Fu?(function(s){return ld(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class bu extends Yu{}class La extends Yu{constructor(e){super(),this.elements=e}}function g_(i,e){const t=__(e);for(const s of i.elements)t.some((o=>er(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ma extends Yu{constructor(e){super(),this.elements=e}}function y_(i,e){let t=__(e);for(const s of i.elements)t=t.filter((o=>!er(o,s)));return{arrayValue:{values:t}}}class Fu extends Yu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function wg(i){return ot(i.integerValue||i.doubleValue)}function __(i){return zd(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function wS(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof La&&o instanceof La||s instanceof Ma&&o instanceof Ma?ao(s.elements,o.elements,er):s instanceof Fu&&o instanceof Fu?er(s.Pe,o.Pe):s instanceof bu&&o instanceof bu})(i.transform,e.transform)}class ES{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Xu{}function v_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new E_(i.key,Ar.none()):new Ha(i.key,i.data,Ar.none());{const t=i.data,s=vn.empty();let o=new xt(kt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new rs(i.key,s,new bn(o.toArray()),Ar.none())}}function TS(i,e,t){i instanceof Ha?(function(o,u,h){const m=o.value.clone(),g=Tg(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,t):i instanceof rs?(function(o,u,h){if(!Iu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Tg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(w_(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ca(i,e,t,s){return i instanceof Ha?(function(u,h,m,g){if(!Iu(u.precondition,h))return m;const v=u.value.clone(),E=Ig(u.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(i,e,t,s):i instanceof rs?(function(u,h,m,g){if(!Iu(u.precondition,h))return m;const v=Ig(u.fieldTransforms,g,h),E=h.data;return E.setAll(w_(u)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((C=>C.field)))})(i,e,t,s):(function(u,h,m){return Iu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(i,e,t)}function IS(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=m_(s.transform,o||null);u!=null&&(t===null&&(t=vn.empty()),t.set(s.field,u))}return t||null}function Eg(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ao(s,o,((u,h)=>wS(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ha extends Xu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class rs extends Xu{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function w_(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function Tg(i,e,t){const s=new Map;Be(i.length===t.length);for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,vS(h,m,t[o]))}return s}function Ig(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,_S(u,h,e))}return s}class E_ extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SS extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&TS(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ca(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ca(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=f_();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=v_(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ve.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,((t,s)=>Eg(t,s)))&&ao(this.baseMutations,e.baseMutations,((t,s)=>Eg(t,s)))}}class Hd{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Be(e.mutations.length===s.length);let o=(function(){return fS})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Hd(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,De;function PS(i){switch(i){default:return ge();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function T_(i){if(i===void 0)return Pr("GRPC error has no .code"),$.UNKNOWN;switch(i){case ut.OK:return $.OK;case ut.CANCELLED:return $.CANCELLED;case ut.UNKNOWN:return $.UNKNOWN;case ut.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ut.INTERNAL:return $.INTERNAL;case ut.UNAVAILABLE:return $.UNAVAILABLE;case ut.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ut.NOT_FOUND:return $.NOT_FOUND;case ut.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ut.ABORTED:return $.ABORTED;case ut.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ut.DATA_LOSS:return $.DATA_LOSS;default:return ge()}}(De=ut||(ut={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Gi([4294967295,4294967295],0);function Sg(i){const e=kS().encode(i),t=new qy;return t.update(e),new Uint8Array(t.digest())}function Ag(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Gi([t,s],0),new Gi([o,u],0)]}class Kd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ea(`Invalid padding: ${t}`);if(s<0)throw new Ea(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Gi.fromNumber(this.Ie)}Ee(e,t,s){let o=e.add(t.multiply(Gi.fromNumber(s)));return o.compare(xS)===1&&(o=new Gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Sg(e),[s,o]=Ag(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Kd(u,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.Ie===0)return;const t=Sg(e),[s,o]=Ag(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ju(ve.min(),o,new nt(Le),kr(),Ce())}}class Ka{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ka(s,t,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class I_{constructor(e,t){this.targetId=e,this.me=t}}class S_{constructor(e,t,s=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Rg{constructor(){this.fe=0,this.ge=Pg(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),t=Ce(),s=Ce();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ge()}})),new Ka(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=Pg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class NS{constructor(e){this.Le=e,this.Be=new Map,this.ke=kr(),this.qe=Cg(),this.Qe=new nt(Le)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:ge()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((s,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,s=e.me.count,o=this.Je(t);if(o){const u=o.target;if(cd(u))if(s===0){const h=new ce(u.path);this.Ue(t,h,Ft.newNoDocument(h,ve.min()))}else Be(s===1);else{const h=this.Ye(t);if(h!==s){const m=this.Ze(e),g=m?this.Xe(m,e,h):1;if(g!==0){this.je(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=Zi(s).toUint8Array()}catch(g){if(g instanceof e_)return oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Kd(h,o,u)}catch(g){return oo(g instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((u,h)=>{const m=this.Je(h);if(m){if(u.current&&cd(m.target)){const g=new ce(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,Ft.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}}));let s=Ce();this.qe.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.Je(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new Ju(e,t,this.Qe,this.ke,s);return this.ke=kr(),this.qe=Cg(),this.Qe=new nt(Le),o}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Rg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(Le),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rg),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cg(){return new nt(ce.comparator)}function Pg(){return new nt(ce.comparator)}const DS={asc:"ASCENDING",desc:"DESCENDING"},VS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OS={and:"AND",or:"OR"};class LS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fd(i,e){return i.useProto3Json||Ku(e)?e:{value:e}}function Uu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function MS(i,e){return Uu(i,e.toTimestamp())}function Zn(i){return Be(!!i),ve.fromTimestamp((function(t){const s=di(t);return new gt(s.seconds,s.nanos)})(i))}function Gd(i,e){return pd(i,e).canonicalString()}function pd(i,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function R_(i){const e=Ye.fromString(i);return Be(N_(e)),e}function md(i,e){return Gd(i.databaseId,e.path)}function $h(i,e){const t=R_(e);if(t.get(1)!==i.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ce(P_(t))}function C_(i,e){return Gd(i.databaseId,e)}function bS(i){const e=R_(i);return e.length===4?Ye.emptyPath():P_(e)}function gd(i){return new Ye(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function P_(i){return Be(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function kg(i,e,t){return{name:md(i,e),fields:t.value.mapValue.fields}}function FS(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ge()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(v,E){return v.useProto3Json?(Be(E===void 0||typeof E=="string"),Nt.fromBase64String(E||"")):(Be(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Nt.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const E=v.code===void 0?$.UNKNOWN:T_(v.code);return new re(E,v.message||"")})(h);t=new S_(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$h(i,s.document.name),u=Zn(s.document.updateTime),h=s.document.createTime?Zn(s.document.createTime):ve.min(),m=new vn({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(o,u,h,m),v=s.targetIds||[],E=s.removedTargetIds||[];t=new Su(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$h(i,s.document),u=s.readTime?Zn(s.readTime):ve.min(),h=Ft.newNoDocument(o,u),m=s.removedTargetIds||[];t=new Su([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$h(i,s.document),u=s.removedTargetIds||[];t=new Su([],u,o,null)}else{if(!("filter"in e))return ge();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new CS(o,u),m=s.targetId;t=new I_(m,h)}}return t}function US(i,e){let t;if(e instanceof Ha)t={update:kg(i,e.key,e.value)};else if(e instanceof E_)t={delete:md(i,e.key)};else if(e instanceof rs)t={update:kg(i,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof SS))return ge();t={verify:md(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof bu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof La)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ma)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Fu)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw ge()})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:MS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ge()})(i,e.precondition)),t}function jS(i,e){return i&&i.length>0?(Be(e!==void 0),i.map((t=>(function(o,u){let h=o.updateTime?Zn(o.updateTime):Zn(u);return h.isEqual(ve.min())&&(h=Zn(u)),new ES(h,o.transformResults||[])})(t,e)))):[]}function zS(i,e){return{documents:[C_(i,e.path)]}}function BS(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=C_(i,o);const u=(function(v){if(v.length!==0)return x_(Un.create(v,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(v){if(v.length!==0)return v.map((E=>(function(V){return{field:Js(V.field),direction:qS(V.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=fd(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{_t:t,parent:o}}function $S(i){let e=bS(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Be(s===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(C){const V=k_(C);return V instanceof Un&&i_(V)?V.getFilters():[V]})(t.where));let h=[];t.orderBy&&(h=(function(C){return C.map((V=>(function(Q){return new Mu(Zs(Q.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(V)))})(t.orderBy));let m=null;t.limit&&(m=(function(C){let V;return V=typeof C=="object"?C.value:C,Ku(V)?null:V})(t.limit));let g=null;t.startAt&&(g=(function(C){const V=!!C.before,U=C.values||[];return new Lu(U,V)})(t.startAt));let v=null;return t.endAt&&(v=(function(C){const V=!C.before,U=C.values||[];return new Lu(U,V)})(t.endAt)),lS(e,o,h,u,m,"F",g,v)}function WS(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k_(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Zs(t.unaryFilter.field);return ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Zs(t.unaryFilter.field);return ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Zs(t.unaryFilter.field);return ct.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Zs(t.unaryFilter.field);return ct.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ge()}})(i):i.fieldFilter!==void 0?(function(t){return ct.create(Zs(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map((s=>k_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ge()}})(t.compositeFilter.op))})(i):ge()}function qS(i){return DS[i]}function HS(i){return VS[i]}function KS(i){return OS[i]}function Js(i){return{fieldPath:i.canonicalString()}}function Zs(i){return kt.fromServerFormat(i.fieldPath)}function x_(i){return i instanceof ct?(function(t){if(t.op==="=="){if(mg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(pg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(pg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:HS(t.op),value:t.value}}})(i):i instanceof Un?(function(t){const s=t.getFilters().map((o=>x_(o)));return s.length===1?s[0]:{compositeFilter:{op:KS(t.op),filters:s}}})(i):ge()}function GS(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function N_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t,s,o,u=ve.min(),h=ve.min(),m=Nt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.ct=e}}function YS(i){const e=$S({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.un=new JS}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(hi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class JS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new xt(Ye.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new xt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new co(0)}static kn(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.changes=new _o((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ca(s.mutation,o,bn.empty(),gt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ce()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ce()){const o=Ki();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let h=wa();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Ki();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ce())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let u=kr();const h=Ra(),m=(function(){return Ra()})();return t.forEach(((g,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof rs)?u=u.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Ca(E.mutation,v,E.mutation.getFieldMask(),gt.now())):h.set(v.key,bn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,E)=>h.set(v,E))),t.forEach(((v,E)=>{var C;return m.set(v,new eA(E,(C=h.get(v))!==null&&C!==void 0?C:null))})),m)))}recalculateAndSaveOverlays(e,t){const s=Ra();let o=new nt(((h,m)=>h-m)),u=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let E=s.get(g)||bn.empty();E=m.applyToLocalView(v,E),s.set(g,E);const C=(o.get(m.batchId)||Ce()).add(g);o=o.insert(m.batchId,C)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,E=g.value,C=f_();E.forEach((V=>{if(!u.has(V)){const U=v_(t.get(V),s.get(V));U!==null&&C.set(V,U),u=u.add(V)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,C))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ce.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):l_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):K.resolve(Ki());let m=-1,g=u;return h.next((v=>K.forEach(v,((E,C)=>(m<C.largestBatchId&&(m=C.largestBatchId),u.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next((V=>{g=g.insert(E,V)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,Ce()))).next((E=>({batchId:m,changes:d_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((s=>{let o=wa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=wa();return this.indexManager.getCollectionParents(e,u).next((m=>K.forEach(m,(g=>{const v=(function(C,V){return new qa(V,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((E=>{E.forEach(((C,V)=>{h=h.insert(C,V)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((h=>{u.forEach(((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ft.newInvalidDocument(E)))}));let m=wa();return h.forEach(((g,v)=>{const E=u.get(g);E!==void 0&&Ca(E.mutation,v,bn.empty(),gt.now()),Qu(t,v)&&(m=m.insert(g,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Zn(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:YS(o.bundledQuery),readTime:Zn(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.overlays=new nt(ce.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ki();return K.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.ht(e,t,u)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Ki(),u=t.length+1,h=new ce(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new nt(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let E=u.get(v.largestBatchId);E===null&&(E=Ki(),u=u.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=Ki(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=o)););return K.resolve(m)}ht(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new RS(t,s));let u=this.Ir.get(t);u===void 0&&(u=Ce(),this.Ir.set(t,u)),this.Ir.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.Tr=new xt(Tt.Er),this.dr=new xt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Vr(new Tt(e,t))}mr(e,t){e.forEach((s=>this.removeReference(s,t)))}gr(e){const t=new ce(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1),u=[];return this.dr.forEachInRange([s,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ce(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1);let u=Ce();return this.dr.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Tt(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ce.comparator(e.key,t.key)||Le(e.wr,t.wr)}static Ar(e,t){return Le(e.wr,t.wr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xt(Tt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new AS(u,t,s,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new Tt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.vr(s),u=o<0?0:o;return K.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([s,o],(h=>{const m=this.Dr(h.wr);u.push(m)})),K.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new xt(Le);return t.forEach((o=>{const u=new Tt(o,0),h=new Tt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(m=>{s=s.add(m.wr)}))})),K.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;ce.isDocumentKey(u)||(u=u.child(""));const h=new Tt(new ce(u),0);let m=new xt(Le);return this.br.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.wr)),!0)}),h),K.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return K.forEach(t.mutations,(o=>{const u=new Tt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,t){const s=new Tt(t,0),o=this.br.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.Mr=e,this.docs=(function(){return new nt(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=kr();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ft.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=kr();const h=t.path,m=new ce(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||$I(BI(E),s)<=0||(o.has(E.key)||Qu(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return K.resolve(u)}getAllFromCollectionGroup(e,t,s,o){ge()}Or(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new aA(this)}getSize(e){return K.resolve(this.size)}}class aA extends ZS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.persistence=e,this.Nr=new _o((t=>Bd(t)),$d),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qd,this.targetCount=0,this.kr=co.Bn()}forEachTarget(e,t){return this.Nr.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new co(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Nr.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),K.waitFor(u).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Fd(0),this.Kr=!1,this.Kr=!0,this.$r=new iA,this.referenceDelegate=e(this),this.Ur=new lA(this),this.indexManager=new XS,this.remoteDocumentCache=(function(o){return new oA(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new QS(t),this.Gr=new nA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new sA(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){ae("MemoryPersistence","Starting transaction:",e);const o=new cA(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,t){return K.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,t))))}}class cA extends qI{constructor(e){super(),this.currentSequenceNumber=e}}class Yd{constructor(e){this.persistence=e,this.Jr=new Qd,this.Yr=null}static Zr(e){return new Yd(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,(s=>{const o=ce.fromPath(s);return this.ei(e,o).next((u=>{u||t.removeEntry(o,ve.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=o}static Wi(e,t){let s=Ce(),o=Ce();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Xd(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Z0()?8:HI(Ut())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.Yi(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,t,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new hA;return this.Xi(e,t,h).next((m=>{if(u.result=m,this.zi)return this.es(e,t,h,m.size)}))})).next((()=>u.result))}es(e,t,s,o){return s.documentReadCount<this.ji?(ga()<=ke.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Xs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(ga()<=ke.DEBUG&&ae("QueryEngine","Query:",Xs(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(ga()<=ke.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Xs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):K.resolve())}Yi(e,t){if(vg(t))return K.resolve(null);let s=Jn(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dd(t,null,"F"),s=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Ce(...u);return this.Ji.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.ts(t,m);return this.ns(t,v,h,g.readTime)?this.Yi(e,dd(t,null,"F")):this.rs(e,v,t,g)}))))})))))}Zi(e,t,s,o){return vg(t)||o.isEqual(ve.min())?K.resolve(null):this.Ji.getDocuments(e,s).next((u=>{const h=this.ts(t,u);return this.ns(t,h,s,o)?K.resolve(null):(ga()<=ke.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xs(t)),this.rs(e,h,t,zI(o,-1)).next((m=>m)))}))}ts(e,t){let s=new xt(c_(e));return t.forEach(((o,u)=>{Qu(e,u)&&(s=s.add(u))})),s}ns(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,s){return ga()<=ke.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Xs(t)),this.Ji.getDocumentsMatchingQuery(e,t,hi.min(),s)}rs(e,t,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,s,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new nt(Le),this._s=new _o((u=>Bd(u)),$d),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function pA(i,e,t,s){return new fA(i,e,t,s)}async function D_(i,e){const t=we(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Ce();for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of u){m.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((v=>({hs:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function mA(i,e){const t=we(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,v,E){const C=v.batch,V=C.keys();let U=K.resolve();return V.forEach((Q=>{U=U.next((()=>E.getEntry(g,Q))).next((X=>{const H=v.docVersions.get(Q);Be(H!==null),X.version.compareTo(H)<0&&(C.applyToRemoteDocument(X,v),X.isValidDocument()&&(X.setReadTime(v.commitVersion),E.addEntry(X)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(g,C)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ce();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function V_(i){const e=we(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function gA(i,e){const t=we(i),s=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach(((E,C)=>{const V=o.get(C);if(!V)return;m.push(t.Ur.removeMatchingKeys(u,E.removedDocuments,C).next((()=>t.Ur.addMatchingKeys(u,E.addedDocuments,C))));let U=V.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(C)!==null?U=U.withResumeToken(Nt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,s)),o=o.insert(C,U),(function(X,H,ye){return X.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0})(V,U,E)&&m.push(t.Ur.updateTargetData(u,U))}));let g=kr(),v=Ce();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(yA(u,h,e.documentUpdates).next((E=>{g=E.Ps,v=E.Is}))),!s.isEqual(ve.min())){const E=t.Ur.getLastRemoteSnapshotVersion(u).next((C=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return K.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(t.os=o,u)))}function yA(i,e,t){let s=Ce(),o=Ce();return t.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=kr();return t.forEach(((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ae("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{Ps:h,Is:o}}))}function _A(i,e){const t=we(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vA(i,e){const t=we(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Ur.getTargetData(s,e).next((u=>u?(o=u,K.resolve(o)):t.Ur.allocateTargetId(s).next((h=>(o=new oi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s}))}async function yd(i,e,t){const s=we(i),o=s.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Wa(h))throw h;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function xg(i,e,t){const s=we(i);let o=ve.min(),u=Ce();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,E){const C=we(g),V=C._s.get(E);return V!==void 0?K.resolve(C.os.get(V)):C.Ur.getTargetData(v,E)})(s,h,Jn(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.ss.getDocumentsMatchingQuery(h,e,t?o:ve.min(),t?u:Ce()))).next((m=>(wA(s,cS(e),m),{documents:m,Ts:u})))))}function wA(i,e,t){let s=i.us.get(e)||ve.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.us.set(e,s)}class Ng{constructor(){this.activeTargetIds=gS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EA{constructor(){this.so=new Ng,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ng,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function Wh(){return gu===null?gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class AA extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,s,o,u,h){const m=Wh(),g=this.xo(t,s.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,u,h),this.No(t,g,v,o).then((E=>(ae("RestConnection",`Received RPC '${t}' ${m}: `,E),E)),(E=>{throw oo("RestConnection",`RPC '${t}' ${m} failed with error: `,E,"url: ",g,"request:",o),E}))}Lo(t,s,o,u,h,m){return this.Mo(t,s,o,u,h)}Oo(t,s,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((u,h)=>t[h]=u)),o&&o.headers.forEach(((u,h)=>t[h]=u))}xo(t,s){const o=IA[t];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,o){const u=Wh();return new Promise(((h,m)=>{const g=new Hy;g.setWithCredentials(!0),g.listenOnce(Ky.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Eu.NO_ERROR:const E=g.getResponseJson();ae(Mt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case Eu.TIMEOUT:ae(Mt,`RPC '${e}' ${u} timed out`),m(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:const C=g.getStatus();if(ae(Mt,`RPC '${e}' ${u} failed with status:`,C,"response text:",g.getResponseText()),C>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const U=V==null?void 0:V.error;if(U&&U.status&&U.message){const Q=(function(H){const ye=H.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ye)>=0?ye:$.UNKNOWN})(U.status);m(new re(Q,U.message))}else m(new re($.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new re($.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ae(Mt,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ae(Mt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",v,s,15)}))}Bo(e,t,s){const o=Wh(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Yy(),m=Qy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=u.join("");ae(Mt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const C=h.createWebChannel(E,g);let V=!1,U=!1;const Q=new SA({Io:H=>{U?ae(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(V||(ae(Mt,`Opening RPC '${e}' stream ${o} transport.`),C.open(),V=!0),ae(Mt,`RPC '${e}' stream ${o} sending:`,H),C.send(H))},To:()=>C.close()}),X=(H,ye,_e)=>{H.listen(ye,(Ee=>{try{_e(Ee)}catch(me){setTimeout((()=>{throw me}),0)}}))};return X(C,va.EventType.OPEN,(()=>{U||(ae(Mt,`RPC '${e}' stream ${o} transport opened.`),Q.yo())})),X(C,va.EventType.CLOSE,(()=>{U||(U=!0,ae(Mt,`RPC '${e}' stream ${o} transport closed`),Q.So())})),X(C,va.EventType.ERROR,(H=>{U||(U=!0,oo(Mt,`RPC '${e}' stream ${o} transport errored:`,H),Q.So(new re($.UNAVAILABLE,"The operation could not be completed")))})),X(C,va.EventType.MESSAGE,(H=>{var ye;if(!U){const _e=H.data[0];Be(!!_e);const Ee=_e,me=Ee.error||((ye=Ee[0])===null||ye===void 0?void 0:ye.error);if(me){ae(Mt,`RPC '${e}' stream ${o} received error:`,me);const We=me.status;let Ie=(function(A){const P=ut[A];if(P!==void 0)return T_(P)})(We),x=me.message;Ie===void 0&&(Ie=$.INTERNAL,x="Unknown error status: "+We+" with message "+me.message),U=!0,Q.So(new re(Ie,x)),C.close()}else ae(Mt,`RPC '${e}' stream ${o} received:`,_e),Q.bo(_e)}})),X(m,Gy.STAT_EVENT,(H=>{H.stat===od.PROXY?ae(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===od.NOPROXY&&ae(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.wo()}),0),Q}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(i){return new LS(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,s=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-s);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,s,o,u,h,m,g){this.ui=e,this.Ho=s,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new O_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===t&&this.P_(s,o)}),(s=>{e((()=>{const o=new re($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RA extends L_{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=FS(this.serializer,e),s=(function(u){if(!("targetChange"in u))return ve.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?ve.min():h.readTime?Zn(h.readTime):ve.min()})(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=gd(this.serializer),t.addTarget=(function(u,h){let m;const g=h.target;if(m=cd(g)?{documents:zS(u,g)}:{query:BS(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=A_(u,h.resumeToken);const v=fd(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(ve.min())>0){m.readTime=Uu(u,h.snapshotVersion.toTimestamp());const v=fd(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=WS(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=gd(this.serializer),t.removeTarget=e,this.a_(t)}}class CA extends L_{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=jS(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=gd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>US(this.serializer,s)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,pd(t,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re($.UNKNOWN,u.toString())}))}Lo(e,t,s,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Lo(e,pd(t,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new re($.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class kA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pr(t),this.D_=!1):ae("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{s.enqueueAndForget((async()=>{is(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const v=we(g);v.L_.add(4),await Ga(v),v.q_.set("Unknown"),v.L_.delete(4),await ec(v)})(this))}))})),this.q_=new kA(s,o)}}async function ec(i){if(is(i))for(const e of i.B_)await e(!0)}async function Ga(i){for(const e of i.B_)await e(!1)}function M_(i,e){const t=we(i);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tf(t)?ef(t):vo(t).r_()&&Zd(t,e))}function Jd(i,e){const t=we(i),s=vo(t);t.N_.delete(e),s.r_()&&b_(t,e),t.N_.size===0&&(s.r_()?s.o_():is(t)&&t.q_.set("Unknown"))}function Zd(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vo(i).A_(e)}function b_(i,e){i.Q_.xe(e),vo(i).R_(e)}function ef(i){i.Q_=new NS({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),vo(i).start(),i.q_.v_()}function tf(i){return is(i)&&!vo(i).n_()&&i.N_.size>0}function is(i){return we(i).L_.size===0}function F_(i){i.Q_=void 0}async function NA(i){i.q_.set("Online")}async function DA(i){i.N_.forEach(((e,t)=>{Zd(i,e)}))}async function VA(i,e){F_(i),tf(i)?(i.q_.M_(e),ef(i)):i.q_.set("Unknown")}async function OA(i,e,t){if(i.q_.set("Online"),e instanceof S_&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))})(i,e)}catch(s){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ju(i,s)}else if(e instanceof Su?i.Q_.Ke(e):e instanceof I_?i.Q_.He(e):i.Q_.We(e),!t.isEqual(ve.min()))try{const s=await V_(i.localStore);t.compareTo(s)>=0&&await(function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.N_.get(v);E&&u.N_.set(v,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const E=u.N_.get(g);if(!E)return;u.N_.set(g,E.withResumeToken(Nt.EMPTY_BYTE_STRING,E.snapshotVersion)),b_(u,g);const C=new oi(E.target,g,v,E.sequenceNumber);Zd(u,C)})),u.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){ae("RemoteStore","Failed to raise snapshot:",s),await ju(i,s)}}async function ju(i,e,t){if(!Wa(e))throw e;i.L_.add(1),await Ga(i),i.q_.set("Offline"),t||(t=()=>V_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ae("RemoteStore","Retrying IndexedDB access"),await t(),i.L_.delete(1),await ec(i)}))}function U_(i,e){return e().catch((t=>ju(i,t,e)))}async function tc(i){const e=we(i),t=fi(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LA(e);)try{const o=await _A(e.localStore,s);if(o===null){e.O_.length===0&&t.o_();break}s=o.batchId,MA(e,o)}catch(o){await ju(e,o)}j_(e)&&z_(e)}function LA(i){return is(i)&&i.O_.length<10}function MA(i,e){i.O_.push(e);const t=fi(i);t.r_()&&t.V_&&t.m_(e.mutations)}function j_(i){return is(i)&&!fi(i).n_()&&i.O_.length>0}function z_(i){fi(i).start()}async function bA(i){fi(i).p_()}async function FA(i){const e=fi(i);for(const t of i.O_)e.m_(t.mutations)}async function UA(i,e,t){const s=i.O_.shift(),o=Hd.from(s,e,t);await U_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await tc(i)}async function jA(i,e){e&&fi(i).V_&&await(async function(s,o){if((function(h){return PS(h)&&h!==$.ABORTED})(o.code)){const u=s.O_.shift();fi(s).s_(),await U_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await tc(s)}})(i,e),j_(i)&&z_(i)}async function Vg(i,e){const t=we(i);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const s=is(t);t.L_.add(3),await Ga(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await ec(t)}async function zA(i,e){const t=we(i);e?(t.L_.delete(2),await ec(t)):e||(t.L_.add(2),await Ga(t),t.q_.set("Unknown"))}function vo(i){return i.K_||(i.K_=(function(t,s,o){const u=we(t);return u.w_(),new RA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Eo:NA.bind(null,i),Ro:DA.bind(null,i),mo:VA.bind(null,i),d_:OA.bind(null,i)}),i.B_.push((async e=>{e?(i.K_.s_(),tf(i)?ef(i):i.q_.set("Unknown")):(await i.K_.stop(),F_(i))}))),i.K_}function fi(i){return i.U_||(i.U_=(function(t,s,o){const u=we(t);return u.w_(),new CA(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bA.bind(null,i),mo:jA.bind(null,i),f_:FA.bind(null,i),g_:UA.bind(null,i)}),i.B_.push((async e=>{e?(i.U_.s_(),await tc(i)):(await i.U_.stop(),i.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))}))),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,m=new nf(e,t,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rf(i,e){if(Pr("AsyncQueue",`${e}: ${i}`),Wa(i))return new re($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ce.comparator(t.key,s.key):(t,s)=>ce.comparator(t.key,s.key),this.keyedMap=wa(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.W_=new nt(ce.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ho{constructor(e,t,s,o,u,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new ho(e,t,io.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class $A{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const o=we(t),u=o.queries;o.queries=Lg(),u.forEach(((h,m)=>{for(const g of m.j_)g.onError(s)}))})(this,new re($.ABORTED,"Firestore shutting down"))}}function Lg(){return new _o((i=>u_(i)),Gu)}async function B_(i,e){const t=we(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(s=2):(u=new BA,s=e.J_()?0:1);try{switch(s){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=rf(h,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&sf(t)}async function $_(i,e){const t=we(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function WA(i,e){const t=we(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(s=!0);h.z_=o}}s&&sf(t)}function qA(i,e,t){const s=we(i),o=s.queries.get(e);if(o)for(const u of o.j_)u.onError(t);s.queries.delete(e)}function sf(i){i.Y_.forEach((e=>{e.next()}))}var _d,Mg;(Mg=_d||(_d={})).ea="default",Mg.Cache="cache";class W_{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ho(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class HA{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=c_(e),this.Ra=new io(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new Og,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,C)=>{const V=o.get(E),U=Qu(this.query,C)?C:null,Q=!!V&&this.mutatedKeys.has(V.key),X=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let H=!1;V&&U?V.data.isEqual(U.data)?Q!==X&&(s.track({type:3,doc:U}),H=!0):this.ga(V,U)||(s.track({type:2,doc:U}),H=!0,(g&&this.Aa(U,g)>0||v&&this.Aa(U,v)<0)&&(m=!0)):!V&&U?(s.track({type:0,doc:U}),H=!0):V&&!U&&(s.track({type:1,doc:V}),H=!0,(g||v)&&(m=!0)),H&&(U?(h=h.add(U),u=X?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Ra:h,fa:s,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((E,C)=>(function(U,Q){const X=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return X(U)-X(Q)})(E.type,C.type)||this.Aa(E.doc,C.doc))),this.pa(s),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,v=g!==this.Ea;return this.Ea=g,h.length!==0||v?{snapshot:new ho(this.query,e.Ra,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Og,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const t=[];return e.forEach((s=>{this.da.has(s)||t.push(new H_(s))})),this.da.forEach((s=>{e.has(s)||t.push(new q_(s))})),t}ba(e){this.Ta=e.Ts,this.da=Ce();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class GA{constructor(e){this.key=e,this.va=!1}}class QA{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new _o((m=>u_(m)),Gu),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(ce.comparator),this.Na=new Map,this.La=new Qd,this.Ba={},this.ka=new Map,this.qa=co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YA(i,e,t=!0){const s=J_(i);let o;const u=s.Fa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await K_(s,e,t,!0),o}async function XA(i,e){const t=J_(i);await K_(t,e,!0,!1)}async function K_(i,e,t,s){const o=await vA(i.localStore,Jn(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await JA(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&M_(i.remoteStore,o),m}async function JA(i,e,t,s,o){i.Ka=(C,V,U)=>(async function(X,H,ye,_e){let Ee=H.view.ma(ye);Ee.ns&&(Ee=await xg(X.localStore,H.query,!1).then((({documents:x})=>H.view.ma(x,Ee))));const me=_e&&_e.targetChanges.get(H.targetId),We=_e&&_e.targetMismatches.get(H.targetId)!=null,Ie=H.view.applyChanges(Ee,X.isPrimaryClient,me,We);return Fg(X,H.targetId,Ie.wa),Ie.snapshot})(i,C,V,U);const u=await xg(i.localStore,e,!0),h=new HA(e,u.Ts),m=h.ma(u.documents),g=Ka.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),v=h.applyChanges(m,i.isPrimaryClient,g);Fg(i,t,v.wa);const E=new KA(e,t,h);return i.Fa.set(e,E),i.Ma.has(t)?i.Ma.get(t).push(e):i.Ma.set(t,[e]),v.snapshot}async function ZA(i,e,t){const s=we(i),o=s.Fa.get(e),u=s.Ma.get(o.targetId);if(u.length>1)return s.Ma.set(o.targetId,u.filter((h=>!Gu(h,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await yd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Jd(s.remoteStore,o.targetId),vd(s,o.targetId)})).catch($a)):(vd(s,o.targetId),await yd(s.localStore,o.targetId,!0))}async function e1(i,e){const t=we(i),s=t.Fa.get(e),o=t.Ma.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Jd(t.remoteStore,s.targetId))}async function t1(i,e,t){const s=l1(i);try{const o=await(function(h,m){const g=we(h),v=gt.now(),E=m.reduce(((U,Q)=>U.add(Q.key)),Ce());let C,V;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let Q=kr(),X=Ce();return g.cs.getEntries(U,E).next((H=>{Q=H,Q.forEach(((ye,_e)=>{_e.isValidDocument()||(X=X.add(ye))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,Q))).next((H=>{C=H;const ye=[];for(const _e of m){const Ee=IS(_e,C.get(_e.key).overlayedDocument);Ee!=null&&ye.push(new rs(_e.key,Ee,t_(Ee.value.mapValue),Ar.exists(!0)))}return g.mutationQueue.addMutationBatch(U,v,ye,m)})).next((H=>{V=H;const ye=H.applyToLocalDocumentSet(C,X);return g.documentOverlayCache.saveOverlays(U,H.batchId,ye)}))})).then((()=>({batchId:V.batchId,changes:d_(C)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let v=h.Ba[h.currentUser.toKey()];v||(v=new nt(Le)),v=v.insert(m,g),h.Ba[h.currentUser.toKey()]=v})(s,o.batchId,t),await Qa(s,o.changes),await tc(s.remoteStore)}catch(o){const u=rf(o,"Failed to persist write");t.reject(u)}}async function G_(i,e){const t=we(i);try{const s=await gA(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Na.get(u);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Be(h.va):o.removedDocuments.size>0&&(Be(h.va),h.va=!1))})),await Qa(t,s,e)}catch(s){await $a(s)}}function bg(i,e,t){const s=we(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Fa.forEach(((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=we(h);g.onlineState=m;let v=!1;g.queries.forEach(((E,C)=>{for(const V of C.j_)V.Z_(m)&&(v=!0)})),v&&sf(g)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function n1(i,e,t){const s=we(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Na.get(e),u=o&&o.key;if(u){let h=new nt(ce.comparator);h=h.insert(u,Ft.newNoDocument(u,ve.min()));const m=Ce().add(u),g=new Ju(ve.min(),new Map,new nt(Le),h,m);await G_(s,g),s.Oa=s.Oa.remove(u),s.Na.delete(e),of(s)}else await yd(s.localStore,e,!1).then((()=>vd(s,e,t))).catch($a)}async function r1(i,e){const t=we(i),s=e.batch.batchId;try{const o=await mA(t.localStore,e);Y_(t,s,null),Q_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Qa(t,o)}catch(o){await $a(o)}}async function i1(i,e,t){const s=we(i);try{const o=await(function(h,m){const g=we(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,m).next((C=>(Be(C!==null),E=C.keys(),g.mutationQueue.removeMutationBatch(v,C)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(s.localStore,e);Y_(s,e,t),Q_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Qa(s,o)}catch(o){await $a(o)}}function Q_(i,e){(i.ka.get(e)||[]).forEach((t=>{t.resolve()})),i.ka.delete(e)}function Y_(i,e,t){const s=we(i);let o=s.Ba[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function vd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),t&&i.Ca.$a(s,t);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach((s=>{i.La.containsKey(s)||X_(i,s)}))}function X_(i,e){i.xa.delete(e.path.canonicalString());const t=i.Oa.get(e);t!==null&&(Jd(i.remoteStore,t),i.Oa=i.Oa.remove(e),i.Na.delete(t),of(i))}function Fg(i,e,t){for(const s of t)s instanceof q_?(i.La.addReference(s.key,e),s1(i,s)):s instanceof H_?(ae("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||X_(i,s.key)):ge()}function s1(i,e){const t=e.key,s=t.path.canonicalString();i.Oa.get(t)||i.xa.has(s)||(ae("SyncEngine","New document in limbo: "+t),i.xa.add(s),of(i))}function of(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const t=new ce(Ye.fromString(e)),s=i.qa.next();i.Na.set(s,new GA(t)),i.Oa=i.Oa.insert(t,s),M_(i.remoteStore,new oi(Jn(Wd(t.path)),s,"TargetPurposeLimboResolution",Fd.oe))}}async function Qa(i,e,t){const s=we(i),o=[],u=[],h=[];s.Fa.isEmpty()||(s.Fa.forEach(((m,g)=>{h.push(s.Ka(g,e,t).then((v=>{var E;if((v||t)&&s.isPrimaryClient){const C=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,C?"current":"not-current")}if(v){o.push(v);const C=Xd.Wi(g.targetId,v);u.push(C)}})))})),await Promise.all(h),s.Ca.d_(o),await(async function(g,v){const E=we(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>K.forEach(v,(V=>K.forEach(V.$i,(U=>E.persistence.referenceDelegate.addReference(C,V.targetId,U))).next((()=>K.forEach(V.Ui,(U=>E.persistence.referenceDelegate.removeReference(C,V.targetId,U)))))))))}catch(C){if(!Wa(C))throw C;ae("LocalStore","Failed to update sequence numbers: "+C)}for(const C of v){const V=C.targetId;if(!C.fromCache){const U=E.os.get(V),Q=U.snapshotVersion,X=U.withLastLimboFreeSnapshotVersion(Q);E.os=E.os.insert(V,X)}}})(s.localStore,u))}async function o1(i,e){const t=we(i);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const s=await D_(t.localStore,e);t.currentUser=e,(function(u,h){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new re($.CANCELLED,h))}))})),u.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qa(t,s.hs)}}function a1(i,e){const t=we(i),s=t.Na.get(e);if(s&&s.va)return Ce().add(s.key);{let o=Ce();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const m=t.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function J_(i){const e=we(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n1.bind(null,e),e.Ca.d_=WA.bind(null,e.eventManager),e.Ca.$a=qA.bind(null,e.eventManager),e}function l1(i){const e=we(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i1.bind(null,e),e}class zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return pA(this.persistence,new dA,e.initialUser,this.serializer)}Ga(e){return new uA(Yd.Zr,this.serializer)}Wa(e){return new EA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zu.provider={build:()=>new zu};class wd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=o1.bind(null,this.syncEngine),await zA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $A})()}createDatastore(e){const t=Zu(e.databaseInfo.databaseId),s=(function(u){return new AA(u)})(e.databaseInfo);return(function(u,h,m,g){return new PA(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,h,m){return new xA(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>bg(this.syncEngine,t,0)),(function(){return Dg.D()?new Dg:new TA})())}createSyncEngine(e,t){return(function(o,u,h,m,g,v,E){const C=new QA(o,u,h,m,g,v);return E&&(C.Qa=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=we(o);ae("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await Ga(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wd.provider={build:()=>new wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=bt.UNAUTHENTICATED,this.clientId=Jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{ae("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ae("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=rf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Hh(i,e){i.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await D_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Ug(i,e){i.asyncQueue.verifyOperationInProgress();const t=await c1(i);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>Vg(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Vg(e.remoteStore,o))),i._onlineComponents=e}async function c1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;oo("Error using user provided cache. Falling back to memory cache: "+t),await Hh(i,new zu)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Hh(i,new zu);return i._offlineComponents}async function ev(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Ug(i,i._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await Ug(i,new wd))),i._onlineComponents}function h1(i){return ev(i).then((e=>e.syncEngine))}async function tv(i){const e=await ev(i),t=e.eventManager;return t.onListen=YA.bind(null,e.syncEngine),t.onUnlisten=ZA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e1.bind(null,e.syncEngine),t}function d1(i,e,t={}){const s=new Sr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,v){const E=new Z_({next:V=>{E.Za(),h.enqueueAndForget((()=>$_(u,C)));const U=V.docs.has(m);!U&&V.fromCache?v.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&V.fromCache&&g&&g.source==="server"?v.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(V)},error:V=>v.reject(V)}),C=new W_(Wd(m.path),E,{includeMetadataChanges:!0,_a:!0});return B_(u,C)})(await tv(i),i.asyncQueue,e,t,s))),s.promise}function f1(i,e,t={}){const s=new Sr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,v){const E=new Z_({next:V=>{E.Za(),h.enqueueAndForget((()=>$_(u,C))),V.fromCache&&g.source==="server"?v.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(V)},error:V=>v.reject(V)}),C=new W_(m,E,{includeMetadataChanges:!0,_a:!0});return B_(u,C)})(await tv(i),i.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(i,e,t){if(!t)throw new re($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function p1(i,e,t,s){if(e===!0&&s===!0)throw new re($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function zg(i){if(!ce.isDocumentKey(i))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Bg(i){if(ce.isDocumentKey(i))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function nc(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ge()}function ts(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nc(i);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DI;switch(s.type){case"firstParty":return new MI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=jg.get(t);s&&(ae("ComponentProvider","Removing Datastore"),jg.delete(t),s.terminate())})(this),Promise.resolve()}}function m1(i,e,t,s={}){var o;const u=(i=ts(i,rc))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=bt.MOCK_USER;else{m=H0(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new bt(v)}i._authCredentials=new VI(new Xy(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wo(this.firestore,e,this._query)}}class Zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class ci extends wo{constructor(e,t,s){super(e,t,Wd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new ce(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function iv(i,e,...t){if(i=Wt(i),rv("collection","path",e),i instanceof rc){const s=Ye.fromString(e,...t);return Bg(s),new ci(i,null,s)}{if(!(i instanceof Zt||i instanceof ci))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ye.fromString(e,...t));return Bg(s),new ci(i.firestore,null,s)}}function g1(i,e,...t){if(i=Wt(i),arguments.length===1&&(e=Jy.newId()),rv("doc","path",e),i instanceof rc){const s=Ye.fromString(e,...t);return zg(s),new Zt(i,null,new ce(s))}{if(!(i instanceof Zt||i instanceof ci))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ye.fromString(e,...t));return zg(s),new Zt(i.firestore,i instanceof ci?i.converter:null,new ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new O_(this,"async_queue_retry"),this.Vu=()=>{const s=qh();s&&ae("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Sr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wa(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m})(s);throw Pr("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=nf.createAndSchedule(this,e,t,s,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class ic extends rc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Wg,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wg(e),this._firestoreClient=void 0,await e}}}function y1(i,e){const t=typeof i=="object"?i:uy(),s=typeof i=="string"?i:"(default)",o=Ad(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=W0("firestore");u&&m1(o,...u)}return o}function af(i){if(i._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||_1(i),i._firestoreClient}function _1(i){var e,t,s;const o=i._freezeSettings(),u=(function(m,g,v,E){return new QI(m,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,nv(E.experimentalLongPollingOptions),E.useFetchStreams)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new u1(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Nt.fromBase64String(e))}catch(t){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fo(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=/^__.*__$/;class w1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ha(e,this.data,t,this.fieldTransforms)}}function ov(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class hf{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ov(this.Cu)&&v1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class E1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zu(e)}Qu(e,t,s,o=!1){return new hf({Cu:e,methodName:t,qu:s,path:kt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function av(i){const e=i._freezeSettings(),t=Zu(i._databaseId);return new E1(i._databaseId,!!e.ignoreUndefinedProperties,t)}function T1(i,e,t,s,o,u={}){const h=i.Qu(u.merge||u.mergeFields?2:0,e,t,o);cv("Data must be an object, but it was:",h,s);const m=lv(s,h);let g,v;if(u.merge)g=new bn(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const C of u.mergeFields){const V=S1(e,C,t);if(!h.contains(V))throw new re($.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);R1(E,V)||E.push(V)}g=new bn(E),v=h.fieldTransforms.filter((C=>g.covers(C.field)))}else g=null,v=h.fieldTransforms;return new w1(new vn(m),g,v)}function I1(i,e,t,s=!1){return df(t,i.Qu(s?4:3,e))}function df(i,e){if(uv(i=Wt(i)))return cv("Unsupported field value:",e,i),lv(i,e);if(i instanceof sv)return(function(s,o){if(!ov(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=df(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return yS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gt.fromDate(s);return{timestampValue:Uu(o.serializer,u)}}if(s instanceof gt){const u=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uu(o.serializer,u)}}if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fo)return{bytesValue:A_(o.serializer,s._byteString)};if(s instanceof Zt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gd(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof cf)return(function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return qd(m.serializer,g)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${nc(s)}`)})(i,e)}function lv(i,e){const t={};return Zy(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(i,((s,o)=>{const u=df(o,e.Mu(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function uv(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof uf||i instanceof fo||i instanceof Zt||i instanceof sv||i instanceof cf)}function cv(i,e,t){if(!uv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const s=nc(t);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function S1(i,e,t){if((e=Wt(e))instanceof lf)return e._internalPath;if(typeof e=="string")return hv(i,e);throw Bu("Field path arguments must be of type string or ",i,!1,void 0,t)}const A1=new RegExp("[~\\*/\\[\\]]");function hv(i,e,t){if(e.search(A1)>=0)throw Bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new lf(...e.split("."))._internalPath}catch{throw Bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Bu(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new re($.INVALID_ARGUMENT,m+i+g)}function R1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class C1 extends dv{data(){return super.data()}}function fv(i,e){return typeof e=="string"?hv(i,e):e instanceof lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ff{}class k1 extends ff{}function pv(i,e,...t){let s=[];e instanceof ff&&s.push(e),s=s.concat(t),(function(u){const h=u.filter((g=>g instanceof mf)).length,m=u.filter((g=>g instanceof pf)).length;if(h>1||h>0&&m>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class pf extends k1{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new pf(e,t,s)}_apply(e){const t=this._parse(e);return mv(e._query,t),new wo(e.firestore,e.converter,hd(e._query,t))}_parse(e){const t=av(e.firestore);return(function(u,h,m,g,v,E,C){let V;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Hg(C,E);const U=[];for(const Q of C)U.push(qg(g,u,Q));V={arrayValue:{values:U}}}else V=qg(g,u,C)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Hg(C,E),V=I1(m,h,C,E==="in"||E==="not-in");return ct.create(v,E,V)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class mf extends ff{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)mv(h,g),h=hd(h,g)})(e._query,t),new wo(e.firestore,e.converter,hd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qg(i,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l_(e)&&t.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ye.fromString(t));if(!ce.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return fg(i,new ce(s))}if(t instanceof Zt)return fg(i,t._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nc(t)}.`)}function Hg(i,e){if(!Array.isArray(i)||i.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mv(i,e){const t=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class x1{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return yo(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((h=>ot(h.doubleValue)));return new cf(u)}convertGeoPoint(e){return new uf(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const t=di(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ye.fromString(e);Be(N_(s));const o=new Va(s.get(1),s.get(3)),u=new ce(s.popFirst(5));return o.isEqual(t)||Pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i,e,t){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gv extends dv{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(fv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Au extends gv{data(e={}){return super.data(e)}}class D1{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ta(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Au(this._firestore,this._userDataWriter,s.key,s,new Ta(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Au(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ta(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Au(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ta(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:V1(m.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function V1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(i){i=ts(i,Zt);const e=ts(i.firestore,ic);return d1(af(e),i._key).then((t=>M1(e,i,t)))}class yv extends x1{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function _v(i){i=ts(i,wo);const e=ts(i.firestore,ic),t=af(e),s=new yv(e);return P1(i._query),f1(t,i._query).then((o=>new D1(e,s,i,o)))}function O1(i,e,t){i=ts(i,Zt);const s=ts(i.firestore,ic),o=N1(i.converter,e);return L1(s,[T1(av(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Ar.none())])}function L1(i,e){return(function(s,o){const u=new Sr;return s.asyncQueue.enqueueAndForget((async()=>t1(await h1(s),o,u))),u.promise})(af(i),e)}function M1(i,e,t){const s=t.docs.get(e._key),o=new yv(i);return new gv(i,o,e._key,s,new Ta(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){go=o})(po),so(new Qi("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new ic(new OI(s.getProvider("auth-internal")),new FI(s.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(v.options.projectId,E)})(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ui(lg,"4.7.3",e),ui(lg,"4.7.3","esm2017")})();const Ed={apiKey:"AIzaSyAMmArUjA5Cro-PDpyabQGexs9KZ3MH7dU",authDomain:"syncup-1360e.firebaseapp.com",projectId:"syncup-1360e",storageBucket:"syncup-1360e.firebasestorage.app",messagingSenderId:"389802074435",appId:"1:389802074435:web:70ee23b7a79a2da94c0ff6",measurementId:"G-RKM68KLK0H"},Gg="pk.eyJ1IjoiYm1hbnNrZSIsImEiOiJjbWd3cnZkcXAwcWh3MmtvcWlsMXBseHVsIn0.D5AzbcQdtfPNMjjUjDJUBw",Kh=[{id:"user-1",name:"You",avatarUrl:"https://m.media-amazon.com/images/I/41miU+cgrLL._UF1000,1000_QL80_.jpg",status:ln.Free,interests:["music","coffee","fitness","startups"],location:{lat:47.654,lng:-122.31,zone:"UW West Campus"},friends:["user-3","user-4","user-6"],bio:"Add bio..."},{id:"user-2",name:"Maya",avatarUrl:"https://m.media-amazon.com/images/I/41FsVcMh1RL._UF1000,1000_QL80_.jpg",status:ln.Social,interests:["hiking","art","coffee"],location:{lat:47.66,lng:-122.308,zone:"UW North Campus"},friends:["user-1"],bio:""},{id:"user-3",name:"Alex",avatarUrl:"https://m.media-amazon.com/images/I/41B3Q0XgFVL._UF1000,1000_QL80_.jpg",status:ln.Busy,interests:["tech","gaming","startups"],location:{lat:47.6255,lng:-122.3205,zone:"Capitol Hill"},friends:["user-1","user-4"],bio:""},{id:"user-4",name:"Chloe",avatarUrl:"https://m.media-amazon.com/images/I/41mSIgdsHvL.jpg",status:ln.Free,interests:["music","reading","yoga"],location:{lat:47.627,lng:-122.322,zone:"Capitol Hill"},friends:["user-1","user-3"],bio:""},{id:"user-5",name:"Ben",avatarUrl:"https://m.media-amazon.com/images/I/41ONa5HOwfL.jpg",status:ln.Free,interests:["fitness","startups","coffee"],location:{lat:47.6585,lng:-122.3055,zone:"University of Washington"},friends:[],bio:""},{id:"user-6",name:"Sara",avatarUrl:"https://m.media-amazon.com/images/I/41IK02LISNL._UF1000,1000_QL80_.jpg",status:ln.Social,interests:["art","music","foodie"],location:{lat:47.657,lng:-122.3035,zone:"University of Washington"},friends:[],bio:""}],Gh=[{id:"activity-1",authorId:"user-2",title:"Grabbing coffee!",location:"Verve Coffee",time:"2-4pm",type:"Join Me"},{id:"activity-2",authorId:"user-6",title:"Study group for finals",location:"Suzzallo Library",time:"Now until 5pm",type:"Micro-Event"},{id:"activity-3",authorId:"user-4",title:"Yoga in the park",location:"Grand Park",time:"6pm",type:"Join Me"}],gf=!Ed.apiKey||!Ed.projectId;let Qh,ns=null,Ct=null;if(gf)console.warn("Using mock data because Firebase environment variables are not set.");else try{Qh=ly(Ed),ns=y1(Qh),Ct=xI(Qh),console.log("Firebase initialized successfully.")}catch(i){console.error("Firebase initialization failed. Falling back to mock data.",i)}const b1=async()=>{if(gf||!ns)return Promise.resolve(Kh);try{const i=iv(ns,"users"),e=pv(i),t=await _v(e);return t.empty?(console.warn("Firestore 'users' collection is empty, returning mock data."),Kh):t.docs.map(o=>({id:o.id,...o.data()}))}catch(i){return console.error("Error fetching users from Firestore. Falling back to mock data:",i),Kh}},F1=async()=>{if(gf||!ns)return Promise.resolve(Gh);try{const i=iv(ns,"activities"),e=pv(i),t=await _v(e);return t.empty?(console.warn("Firestore 'activities' collection is empty, returning mock data."),Gh):t.docs.map(o=>({id:o.id,...o.data()}))}catch(i){return console.error("Error fetching activities from Firestore. Falling back to mock data:",i),Gh}},Yh=async(i,e)=>{if(!ns)return null;const t=g1(ns,"users",i);return(await Kg(t)).exists()||await O1(t,{id:i,name:e.displayName||"New User",avatarUrl:e.photoURL||"https://placehold.co/100x100",bio:"",interests:[],friends:[],createdAt:new Date}),Kg(t)},vv=Te.createContext({user:null,loading:!0}),U1=({children:i})=>{const[e,t]=Te.useState(null),[s,o]=Te.useState(!0);return Te.useEffect(()=>{if(!Ct){o(!1);return}const u=_T(Ct,h=>{t(h),o(!1)});return()=>u()},[]),D.jsx(vv.Provider,{value:{user:e,loading:s},children:i})},j1=()=>Te.useContext(vv);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B1=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Qg=i=>{const e=B1(i);return e.charAt(0).toUpperCase()+e.slice(1)},wv=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),$1=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Te.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},g)=>Te.createElement("svg",{ref:g,...W1,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:wv("lucide",o),...!u&&!$1(m)&&{"aria-hidden":"true"},...m},[...h.map(([v,E])=>Te.createElement(v,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=(i,e)=>{const t=Te.forwardRef(({className:s,...o},u)=>Te.createElement(q1,{ref:u,iconNode:e,className:wv(`lucide-${z1(Qg(i))}`,`lucide-${i}`,s),...o}));return t.displayName=Qg(i),t};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],G1=H1("bell",K1),Q1=()=>D.jsx("div",{className:"flex justify-center",children:D.jsx("img",{src:"icon.svg",width:"128",height:"128",alt:"My Icon"})}),Y1=()=>{const[i,e]=Te.useState(""),[t,s]=Te.useState(""),[o,u]=Te.useState(!0),[h,m]=Te.useState(null),[g,v]=Te.useState(!1),E=!!Ct,C=async U=>{if(U.preventDefault(),!!E){v(!0),m(null);try{o?(await mT(Ct,i,t),await Yh(Ct.currentUser.uid,{displayName:Ct.currentUser.displayName||void 0,photoURL:Ct.currentUser.photoURL||void 0})):(await pT(Ct,i,t),await Yh(Ct.currentUser.uid,{displayName:Ct.currentUser.displayName||void 0,photoURL:Ct.currentUser.photoURL||void 0}))}catch(Q){m(Q.message)}finally{v(!1)}}},V=async()=>{if(E){v(!0),m(null);try{const U=new vr;await UT(Ct,U),await Yh(Ct.currentUser.uid,{displayName:Ct.currentUser.displayName||void 0,photoURL:Ct.currentUser.photoURL||void 0})}catch(U){m(U.message)}finally{v(!1)}}};return D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-light px-4",children:D.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg",children:[D.jsx(Q1,{}),D.jsx("h1",{className:"text-3xl font-bold text-center text-brand-dark mt-4",children:"Welcome to syncUp"}),D.jsx("p",{className:"text-center text-slate-500 mt-2",children:o?"Sign in to find your circle.":"Create an account to get started."}),!E&&D.jsxs("div",{className:"mt-6 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700",children:[D.jsx("p",{className:"font-bold",children:"Firebase Not Configured"}),D.jsx("p",{className:"text-sm",children:"Authentication is disabled. Please set up your Firebase environment variables to sign in."})]}),D.jsxs("form",{onSubmit:C,className:"mt-8 space-y-6",children:[D.jsx("input",{type:"email",value:i,onChange:U=>e(U.target.value),placeholder:"Email Address",required:!0,disabled:!E,className:"w-full p-3 bg-slate-100 rounded-lg border border-transparent focus:outline-none focus:ring-2 focus:ring---color-primary disabled:opacity-50"}),D.jsx("input",{type:"password",value:t,onChange:U=>s(U.target.value),placeholder:"Password",required:!0,disabled:!E,className:"w-full p-3 bg-slate-100 rounded-lg border border-transparent focus:outline-none focus:ring-2 focus:ring---color-primary disabled:opacity-50"}),D.jsx("button",{type:"submit",disabled:g||!E,className:"w-full bg---color-primary text-white font-bold py-3 rounded-lg hover:bg-opacity-90 transition-all duration-300 disabled:bg-opacity-50",children:g?"Processing...":o?"Sign In":"Create Account"})]}),h&&D.jsx("p",{className:"mt-4 text-center text-sm text-red-500",children:h}),D.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[D.jsx("div",{className:"flex-grow border-t border-slate-200"}),D.jsx("span",{className:"mx-4 text-sm text-slate-400",children:"OR"}),D.jsx("div",{className:"flex-grow border-t border-slate-200"})]}),D.jsxs("button",{onClick:V,disabled:g||!E,className:"w-full mt-6 bg-white border border-slate-300 text-slate-700 font-semibold py-3 rounded-lg hover:bg-slate-50 transition-all flex items-center justify-center space-x-2 disabled:opacity-50",children:[D.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[D.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),D.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),D.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.519-3.487-11.034-8.272l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),D.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C39.99,35.508,44,30.016,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),D.jsx("span",{children:"Sign in with Google"})]}),D.jsxs("p",{className:"mt-8 text-center text-sm",children:[o?"Don't have an account?":"Already have an account?",D.jsx("button",{onClick:()=>u(!o),className:"font-semibold text---color-primary hover:underline ml-1",children:o?"Sign Up":"Sign In"})]})]})})},X1=({currentMode:i,onModeChange:e})=>{const t=[eo.Friends,eo.Community];return D.jsx("div",{className:"bg-white/70 backdrop-blur-sm p-1 rounded-full shadow-md flex items-center space-x-1",children:t.map(s=>D.jsx("button",{onClick:()=>e(s),className:`px-6 py-2 rounded-full text-sm font-semibold transition-colors duration-300 ease-in-out
            ${i===s?"bg-primary text-white shadow":"text-slate-600 hover:bg-indigo-100"}`,children:s},s))})},J1=({users:i,currentUser:e})=>{const t=Te.useRef(null),s=Te.useRef(null),o=Te.useRef([]),u=!Gg;return Te.useEffect(()=>{t.current&&(s.current||(mapboxgl.accessToken=Gg,s.current=new mapboxgl.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v12",center:[e.location.lng,e.location.lat],zoom:12}),s.current.addControl(new mapboxgl.NavigationControl,"top-right")))},[u,e.location]),Te.useEffect(()=>{s.current&&(o.current.forEach(h=>h.remove()),o.current=[],[e,...i].forEach(h=>{const m=document.createElement("div");m.className="w-12 h-12 rounded-full border-4 border-white shadow-xl bg-cover bg-center cursor-pointer",m.style.backgroundImage=`url(${h.avatarUrl})`;const g={[ln.Free]:"#a3e3a1",[ln.Social]:"#6587d6",[ln.Busy]:"#f19351"},v=document.createElement("span");v.className="absolute -top-1 -right-1 block h-4 w-4 rounded-full border-2 border-white",v.style.backgroundColor=g[h.status],m.appendChild(v);const E=new mapboxgl.Marker({element:m,anchor:"bottom"}).setLngLat([h.location.lng,h.location.lat]).setPopup(new mapboxgl.Popup({offset:35,closeButton:!1}).setHTML(`<div class="p-1 text-center">
               <h3 class="font-bold text-md text-slate-800">${h.name}</h3>
               <p class="text-sm text-slate-600">${h.location.zone}</p>
             </div>`)).addTo(s.current);o.current.push(E)}))},[i,e,u]),D.jsx("div",{ref:t,className:"w-full h-96 rounded-2xl shadow-lg"})},Z1={[ln.Free]:{color:"bg-status-free",text:"Free"},[ln.Social]:{color:"bg-status-social",text:"Social"},[ln.Busy]:{color:"bg-status-busy",text:"Busy"}},eR=({friend:i})=>{const e=Z1[i.status];return D.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:bg-slate-50 transition-colors",children:[D.jsxs("div",{className:"flex items-center space-x-3",children:[D.jsx("img",{src:i.avatarUrl,alt:i.name,className:"w-10 h-10 rounded-full object-cover"}),D.jsxs("div",{children:[D.jsx("p",{className:"font-semibold text-slate-800",children:i.name}),D.jsx("p",{className:"text-xs text-slate-500",children:i.location.zone})]})]}),D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx("span",{className:`w-3 h-3 rounded-full ${e.color}`}),D.jsx("span",{className:"text-sm font-medium text-slate-600",children:e.text})]})]})},tR=({friends:i})=>D.jsxs("div",{className:"space-y-2",children:[D.jsx("h3",{className:"px-3 text-lg font-bold text-slate-700",children:"Your Circle"}),i.map(e=>D.jsx(eR,{friend:e},e.id))]}),nR=()=>{const[i,e]=Te.useState(!1);return D.jsx("button",{onClick:()=>e(!0),className:`text-white text-sm font-semibold px-4 py-2 rounded-full transition-colors
        ${i?"joined cursor-default":"join hover:opacity-70"}
      `,disabled:i,children:i?"Requested!":"Join"})},Ev=({activity:i,author:e})=>e?D.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-md w-full flex items-start space-x-4",children:[D.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),D.jsxs("div",{className:"flex-1",children:[D.jsxs("p",{className:"text-sm text-slate-500",children:[D.jsx("span",{className:"font-bold text-slate-800",children:e.name})," posted a ",i.type==="Join Me"?"hangout":"public event",":"]}),D.jsx("h3",{className:"text-lg font-bold text-primary mt-1",children:i.title}),D.jsxs("div",{className:"text-xs text-slate-600 mt-2 flex items-center space-x-4",children:[D.jsxs("span",{className:"flex items-center",children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),i.location]}),D.jsxs("span",{className:"flex items-center",children:[D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z",clipRule:"evenodd"})}),i.time]})]})]}),D.jsx(nR,{})]}):null,rR=({currentUser:i,friends:e,activities:t,allUsers:s})=>{const o=t.filter(u=>u.type==="Join Me"&&i.friends.includes(u.authorId));return D.jsxs("div",{className:"space-y-6 p-4",children:[D.jsx(J1,{users:e,currentUser:i}),o.length>0&&D.jsxs("div",{className:"space-y-3",children:[D.jsx("h3",{className:"px-3 text-lg font-bold text-slate-700",children:"Join Me!"}),o.map(u=>D.jsx(Ev,{activity:u,author:s.find(h=>h.id===u.authorId)},u.id))]}),D.jsx(tR,{friends:e})]})},Yg=({interest:i,isShared:e})=>D.jsx("div",{className:`px-3 py-1 text-xs rounded-full capitalize
    ${e?"bg-emerald-100 text-emerald-800 font-semibold":"bg-slate-200 text-slate-700"}`,children:i}),iR=({user:i,currentUser:e,onConnect:t})=>{const s=e.interests.filter(u=>i.interests.includes(u)),o=i.interests.filter(u=>!e.interests.includes(u));return D.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-md w-full flex flex-col",children:[D.jsxs("div",{className:"flex items-center space-x-4",children:[D.jsx("img",{src:i.avatarUrl,alt:i.name,className:"w-16 h-16 rounded-full object-cover border-4 border-slate-100"}),D.jsxs("div",{className:"flex-1",children:[D.jsx("h3",{className:"text-xl font-bold text-slate-800",children:i.name}),D.jsx("p",{className:"text-sm text-slate-500",children:i.location.zone})]})]}),D.jsxs("div",{className:"mt-4",children:[D.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"Interests"}),D.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.map(u=>D.jsx(Yg,{interest:u,isShared:!0},u)),o.map(u=>D.jsx(Yg,{interest:u,isShared:!1},u))]})]}),D.jsx("button",{onClick:()=>t(i),className:"mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg hover:bg-opacity-90 transition-all duration-300 transform hover:scale-105",children:"Connect"})]})},sR=({currentUser:i,potentialConnections:e,communityEvents:t,allUsers:s,onConnect:o})=>D.jsxs("div",{className:"space-y-8 p-4",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"px-3 mb-3 text-lg font-bold text-slate-700",children:"Local Events"}),t.length>0?D.jsx("div",{className:"space-y-3",children:t.map(u=>D.jsx(Ev,{activity:u,author:s.find(h=>h.id===u.authorId)},u.id))}):D.jsx("p",{className:"text-center text-slate-500 py-4",children:"No community events nearby right now."})]}),D.jsxs("div",{children:[D.jsx("h3",{className:"px-3 mb-3 text-lg font-bold text-slate-700",children:"People to Discover"}),D.jsx("div",{className:"space-y-4",children:e.map(u=>D.jsx(iR,{user:u,currentUser:i,onConnect:o},u.id))})]})]}),oR=({currentUser:i,setCurrentUser:e,onSave:t})=>{const[s,o]=Te.useState(i.bio||""),[u,h]=Te.useState(i.interests||[]),[m,g]=Te.useState(i.avatarUrl||""),v=["Hiking","Music","Tech","Cooking","Art","Gaming","Fashion","Design","Sports","Film"],E=V=>{if(V.target.files&&V.target.files[0]){const U=new FileReader;U.onloadend=()=>g(U.result),U.readAsDataURL(V.target.files[0])}},C=async()=>{await vT(Ct),window.location.reload()};return D.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 rounded-2xl shadow bg-white",children:[D.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"My Profile"}),D.jsxs("div",{className:"flex flex-col items-center gap-3",children:[D.jsx("img",{src:m||"https://placehold.co/100x100",alt:"Profile",className:"w-24 h-24 rounded-full object-cover border"}),D.jsxs("label",{className:"text-sm text-blue-600 cursor-pointer",children:["Change Picture",D.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})]}),D.jsx("textarea",{className:"mt-4 w-full p-2 border rounded-lg",placeholder:"Write a short bio...",value:s,onChange:V=>o(V.target.value)}),D.jsxs("div",{className:"mt-4",children:[D.jsx("h2",{className:"font-semibold mb-2",children:"Select Interests"}),D.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(V=>D.jsx("button",{onClick:()=>h(U=>U.includes(V)?U.filter(Q=>Q!==V):[...U,V]),className:`px-3 py-1 rounded-full border ${u.includes(V)?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:V},V))})]}),D.jsxs("div",{className:"flex justify-between mt-6",children:[D.jsx("button",{onClick:C,children:"Log Out"}),D.jsx("button",{onClick:t,className:"join text-white text-sm font-semibold px-4 py-2 rounded-full hover:opacity-40 transition-opacity",children:"Save Changes"})]})]})},aR=i=>{const e=Math.floor((new Date().getTime()-i.getTime())/1e3);let t=Math.floor(e/86400);return t>1?t+"d ago":(t=Math.floor(e/3600),t>1?t+"h ago":(t=Math.floor(e/60),t>1?t+"m ago":"Just now"))},Xg=[{id:1,type:"join_request",text:'Alex clicked "Join" on your event.',createdAt:new Date(new Date().getTime()-2e3*1e3),isNew:!0},{id:2,type:"proximity",text:"Sam is doing an activity near you. Taylor is free and nearby.",createdAt:new Date(new Date().getTime()-7200*1e3),isNew:!0},{id:3,type:"chat",text:"Jordan sent you a chat.",createdAt:new Date(new Date().getTime()-24*3500*1e3),isNew:!0},{id:4,type:"event_nearby",text:"Community Yoga Event happening nearby today at 6 PM.",createdAt:new Date(new Date().getTime()-48*3600*1e3),isNew:!1},{id:5,type:"proximity",text:"Brady is nearby and also free!",createdAt:new Date(new Date().getTime()-300*3600*1e3),isNew:!1}],lR=({currentUser:i})=>D.jsxs("div",{className:"bg-white rounded-t-2xl p-6 shadow-lg min-h-[60vh] max-w-3xl mx-auto mt-6",children:[D.jsx("h2",{className:"text-2xl font-semibold text-brand-dark mb-6",children:"Notifications"}),Xg.length===0?D.jsx("p",{className:"text-slate-600",children:"No new notifications right now."}):D.jsx("ul",{className:"space-y-3",children:Xg.map(e=>D.jsxs("li",{className:"flex items-center space-x-3 p-4 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors cursor-pointer",children:[e.isNew&&D.jsx("div",{className:"w-2.5 h-2.5 busy rounded-full flex-shrink-0"}),D.jsxs("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-indigo-200 text-indigo-700",children:[e.type==="join_request"&&"🤝",e.type==="proximity"&&"📍",e.type==="chat"&&"💬",e.type==="event_nearby"&&"📅"]}),D.jsxs("div",{className:"flex flex-col",children:[D.jsx("p",{className:"text-slate-700 text-sm",children:e.text}),D.jsx("span",{className:"text-xs text-slate-400",children:aR(e.createdAt)})]})]},e.id))})]}),uR=({currentUser:i,otherUser:e,onSend:t})=>{const[s,o]=Te.useState(""),[u,h]=Te.useState(""),[m,g]=Te.useState(!1),v=Te.useCallback(async()=>{g(!0),h("");try{const U=i.interests.filter(Q=>e.interests.includes(Q))}catch(U){console.error("Failed to generate icebreaker",U),h("Sorry, couldn't generate a prompt right now.")}finally{g(!1)}},[i.interests,e.interests]),E=()=>{u&&(o(u),h(""))};function C(U){if(U.length===0)return"";if(U.length===1)return U[0];if(U.length===2)return`${U[0]} and ${U[1]}`;const Q=U.slice(0,-1).join(", "),X=U[U.length-1];return`${Q}, and ${X}`}const V=C(i.interests.filter(U=>e.interests.includes(U)));return D.jsxs("div",{className:"bg-white p-4 rounded-t-2xl shadow-lg border-t border-slate-200",children:[D.jsxs("div",{className:"text-center mb-4",children:[D.jsxs("h3",{className:"font-bold",children:["Chat with ",e.name]}),D.jsxs("p",{className:"text-xs text-slate-500",children:["You are both interested in ",V,"!"]})]}),u&&D.jsxs("div",{className:"bg-indigo-100 p-3 rounded-lg mb-3 text-center",children:[D.jsxs("p",{className:"text-sm text-indigo-800 italic",children:['"',u,'"']}),D.jsx("button",{onClick:E,className:"mt-2 text-xs font-semibold text-primary hover:underline",children:"Use this opener"})]}),D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx("button",{onClick:v,disabled:m,className:"p-2 bg-slate-100 rounded-full text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?D.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[D.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),D.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),D.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),placeholder:`Message ${e.name}...`,className:"flex-1 p-3 bg-slate-100 rounded-full border border-transparent focus:outline-none focus:ring-2 focus:ring-primary"}),D.jsx("button",{onClick:t,className:"p-3 bg-primary text-white rounded-full",children:D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:D.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})},cR=({message:i,duration:e=1e3,onClose:t})=>{const[s,o]=Te.useState(!0);return Te.useEffect(()=>{const u=setTimeout(()=>{o(!1),t==null||t()},e);return()=>clearTimeout(u)},[e,t]),s?D.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:D.jsx("div",{className:"primary text-white text-sm font-semibold px-4 py-2 rounded-full",children:i})}):null},Jg=()=>D.jsx("img",{src:"icon.svg",width:"128",height:"128",alt:"My Icon"}),hR=()=>{const{user:i,loading:e}=j1(),[t,s]=Te.useState(eo.Friends),[o,u]=Te.useState(null),[h,m]=Te.useState([]),[g,v]=Te.useState([]),[E,C]=Te.useState(!0),[V,U]=Te.useState(null),[Q,X]=Te.useState(!1),[H,ye]=Te.useState(!1),[_e,Ee]=Te.useState(!0);Te.useEffect(()=>{if(!i){C(!1);return}(async()=>{C(!0);try{const[Ue,Ze]=await Promise.all([b1(),F1()]);m(Ue),v(Ze)}catch(Ue){console.error("Failed to load app data",Ue)}finally{C(!1)}})()},[i]);const{currentUser:me,friends:We,potentialConnections:Ie,communityEvents:x}=Te.useMemo(()=>{if(!i)return{currentUser:null,friends:[],potentialConnections:[],communityEvents:[]};const Me=i.uid;let Ue=h.find(ie=>ie.id===Me);if(Ue||(Ue=h.find(ie=>ie.id==="user-1")),!Ue)return{currentUser:null,friends:[],potentialConnections:[],communityEvents:[]};const Ze=h.filter(ie=>Ue.friends.includes(ie.id)),je=h.filter(ie=>ie.id!==Ue.id&&!Ue.friends.includes(ie.id)),Z=g.filter(ie=>ie.type==="Micro-Event");return{currentUser:Ue,friends:Ze,potentialConnections:je,communityEvents:Z}},[h,g,i]),I=Me=>{U(Me)},A=Me=>{u(Me)},P=()=>{u(null)},N=()=>{X(!1)};if(e||E)return D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-light",children:D.jsxs("div",{className:"text-center",children:[D.jsx(Jg,{}),D.jsx("p",{className:"mt-4 text-lg font-semibold text-brand-dark animate-pulse",children:"Syncing up..."})]})});const L=()=>{P(),I("Message sent!")},S=()=>{I("Profile updated!"),s(eo.Friends),N()};return i?me?D.jsx("div",{className:"min-h-screen bg-brand-light font-sans antialiased",children:D.jsxs("div",{className:"container mx-auto max-w-lg relative pb-28",children:[D.jsxs("header",{className:"p-4 flex justify-between items-center sticky top-0 z-10 bg-brand-light/80 backdrop-blur-lg",children:[D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx(Jg,{}),D.jsx("h1",{className:"text-2xl font-bold text-brand-dark",children:"syncUp"})]}),D.jsxs("div",{className:"flex items-center space-x-3",children:[D.jsxs("button",{onClick:()=>ye(!0),className:"relative rounded-full p-2 transition-colors duration-300 ease-in-out hover:bg-indigo-100",children:[D.jsx(G1,{className:"w-6 h-6 text-slate-700"}),_e&&D.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 busy rounded-full ring-2 ring-white"})]}),D.jsx("button",{onClick:()=>X(!0),className:"rounded-full p-1 transition-colors duration-300 ease-in-out hover:bg-indigo-100",children:D.jsx("img",{src:me.avatarUrl,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"})})]})]}),D.jsx("div",{className:"flex justify-center my-4",children:D.jsx(X1,{currentMode:t,onModeChange:s})}),D.jsx("main",{children:t===eo.Friends?D.jsx(rR,{currentUser:me,friends:We,activities:g,allUsers:h}):D.jsx(sR,{currentUser:me,potentialConnections:Ie,communityEvents:x,allUsers:h,onConnect:A})}),o&&D.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-40 flex items-end justify-center",children:D.jsxs("div",{className:"w-full max-w-lg relative",children:[D.jsx("button",{onClick:P,className:"absolute -top-12 right-4 bg-white/80 p-2 rounded-full text-slate-700",children:D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),D.jsx(uR,{currentUser:me,otherUser:o,onSend:L})]})}),V&&D.jsx(cR,{message:V,onClose:()=>U(null)}),Q&&D.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50",children:D.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl p-8 w-[90%] max-w-4xl h-[80%] overflow-y-auto",children:[D.jsx("button",{onClick:N,className:"absolute top-3 right-5 text-gray-500 hover:text-gray-700 transition-colors",children:"✕"}),D.jsx(oR,{currentUser:me,setCurrentUser:Me=>{m(Ue=>Ue.map(Ze=>Ze.id===Me.id?Me:Ze))},onSave:S})]})}),H&&D.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50",children:D.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl p-8 w-[90%] max-w-4xl h-[80%] overflow-y-auto",children:[D.jsx("button",{onClick:()=>ye(!1),className:"absolute top-3 right-5 text-gray-500 hover:text-gray-700 transition-colors",children:"✕"}),D.jsx(lR,{currentUser:me})]})})]})}):D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-light text-center p-4",children:D.jsxs("div",{children:[D.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Error: User Profile Not Found"}),D.jsxs("p",{className:"text-slate-600 mt-2",children:["You are authenticated, but we couldn't find a user profile for you in the database. Please ensure a document exists in the 'users' collection with the ID: ",D.jsx("br",{}),D.jsx("strong",{className:"font-mono text-sm break-all",children:i.uid})]})]})}):D.jsx(Y1,{})},Tv=document.getElementById("root");if(!Tv)throw new Error("Could not find root element to mount to");const dR=M0.createRoot(Tv);dR.render(D.jsx(k0.StrictMode,{children:D.jsx(U1,{children:D.jsx(hR,{})})}));
